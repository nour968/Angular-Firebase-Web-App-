var eP=Object.defineProperty,tP=Object.defineProperties;var nP=Object.getOwnPropertyDescriptors;var nu=Object.getOwnPropertySymbols,rP=Object.getPrototypeOf,Pw=Object.prototype.hasOwnProperty,Mw=Object.prototype.propertyIsEnumerable,iP=Reflect.get;var Nw=(t,e,n)=>e in t?eP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,O=(t,e)=>{for(var n in e||={})Pw.call(e,n)&&Nw(t,n,e[n]);if(nu)for(var n of nu(e))Mw.call(e,n)&&Nw(t,n,e[n]);return t},fe=(t,e)=>tP(t,nP(e));var df=(t,e)=>{var n={};for(var r in t)Pw.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&nu)for(var r of nu(t))e.indexOf(r)<0&&Mw.call(t,r)&&(n[r]=t[r]);return n};var pt=(t,e,n)=>iP(rP(t),n,e);var m=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{a(n.next(u))}catch(l){i(l)}},o=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);a((n=n.apply(t,e)).next())});var Ow=null;var hf=1,ff=Symbol("SIGNAL");function we(t){let e=Ow;return Ow=t,e}var xw={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function sP(t){if(!(gf(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===hf)){if(!t.producerMustRecompute(t)&&!pf(t)){t.dirty=!1,t.lastCleanEpoch=hf;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=hf}}function kw(t){return t&&(t.nextProducerIndex=0),we(t)}function Lw(t,e){if(we(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(gf(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)mf(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function pf(t){ru(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(sP(n),r!==n.version))return!0}return!1}function Fw(t){if(ru(t),gf(t))for(let e=0;e<t.producerNode.length;e++)mf(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function mf(t,e){if(oP(t),ru(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)mf(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];ru(i),i.producerIndexOfThis[r]=e}}function gf(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ru(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function oP(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function aP(){throw new Error}var cP=aP;function Vw(t){cP=t}function Z(t){return typeof t=="function"}function ns(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var iu=ns(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Yr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var xe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Z(r))try{r()}catch(s){e=s instanceof iu?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Uw(s)}catch(o){e=e??[],o instanceof iu?e=[...e,...o.errors]:e.push(o)}}if(e)throw new iu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Uw(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Yr(n,e)}remove(e){let{_finalizers:n}=this;n&&Yr(n,e),e instanceof t&&e._removeParent(this)}};xe.EMPTY=(()=>{let t=new xe;return t.closed=!0,t})();var yf=xe.EMPTY;function su(t){return t instanceof xe||t&&"closed"in t&&Z(t.remove)&&Z(t.add)&&Z(t.unsubscribe)}function Uw(t){Z(t)?t():t.unsubscribe()}var Qt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var rs={setTimeout(t,e,...n){let{delegate:r}=rs;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=rs;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ou(t){rs.setTimeout(()=>{let{onUnhandledError:e}=Qt;if(e)e(t);else throw t})}function Ko(){}var jw=vf("C",void 0,void 0);function Bw(t){return vf("E",void 0,t)}function $w(t){return vf("N",t,void 0)}function vf(t,e,n){return{kind:t,value:e,error:n}}var Jr=null;function is(t){if(Qt.useDeprecatedSynchronousErrorHandling){let e=!Jr;if(e&&(Jr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Jr;if(Jr=null,n)throw r}}else t()}function Hw(t){Qt.useDeprecatedSynchronousErrorHandling&&Jr&&(Jr.errorThrown=!0,Jr.error=t)}var Zr=class extends xe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,su(e)&&e.add(this)):this.destination=dP}static create(e,n,r){return new ss(e,n,r)}next(e){this.isStopped?If($w(e),this):this._next(e)}error(e){this.isStopped?If(Bw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?If(jw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},uP=Function.prototype.bind;function _f(t,e){return uP.call(t,e)}var wf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){au(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){au(r)}else au(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){au(n)}}},ss=class extends Zr{constructor(e,n,r){super();let i;if(Z(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Qt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&_f(e.next,s),error:e.error&&_f(e.error,s),complete:e.complete&&_f(e.complete,s)}):i=e}this.destination=new wf(i)}};function au(t){Qt.useDeprecatedSynchronousErrorHandling?Hw(t):ou(t)}function lP(t){throw t}function If(t,e){let{onStoppedNotification:n}=Qt;n&&rs.setTimeout(()=>n(t,e))}var dP={closed:!0,next:Ko,error:lP,complete:Ko};var os=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Tt(t){return t}function cu(...t){return Ef(t)}function Ef(t){return t.length===0?Tt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ce=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=fP(n)?n:new ss(n,r,i);return is(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=qw(r),new r((i,s)=>{let o=new ss({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[os](){return this}pipe(...n){return Ef(n)(this)}toPromise(n){return n=qw(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function qw(t){var e;return(e=t??Qt.Promise)!==null&&e!==void 0?e:Promise}function hP(t){return t&&Z(t.next)&&Z(t.error)&&Z(t.complete)}function fP(t){return t&&t instanceof Zr||hP(t)&&su(t)}function Tf(t){return Z(t?.lift)}function pe(t){return e=>{if(Tf(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(t,e,n,r,i){return new bf(t,e,n,r,i)}var bf=class extends Zr{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function as(){return pe((t,e)=>{let n=null;t._refCount++;let r=ue(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var cs=class extends ce{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Tf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new xe;let n=this.getSubject();e.add(this.source.subscribe(ue(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=xe.EMPTY)}return e}refCount(){return as()(this)}};var zw=ns(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var tt=(()=>{class t extends ce{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new uu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new zw}next(n){is(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){is(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){is(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?yf:(this.currentObservers=null,s.push(n),new xe(()=>{this.currentObservers=null,Yr(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new ce;return n.source=this,n}}return t.create=(e,n)=>new uu(e,n),t})(),uu=class extends tt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:yf}};var We=class extends tt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Cf={now(){return(Cf.delegate||Date).now()},delegate:void 0};var lu=class extends xe{constructor(e,n){super()}schedule(e,n=0){return this}};var Qo={setInterval(t,e,...n){let{delegate:r}=Qo;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Qo;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var us=class extends lu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Qo.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Qo.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Yr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ls=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};ls.now=Cf.now;var ds=class extends ls{constructor(e,n=ls.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Df=new ds(us);var du=class extends us{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var hu=class extends ds{};var Sf=new hu(du);var bt=new ce(t=>t.complete());function Gw(t){return t&&Z(t.schedule)}function Ww(t){return t[t.length-1]}function fu(t){return Z(Ww(t))?t.pop():void 0}function ar(t){return Gw(Ww(t))?t.pop():void 0}function Af(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Qw(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function Kw(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xr(t){return this instanceof Xr?(this.v=t,this):new Xr(t)}function Yw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(w){return function(S){return Promise.resolve(S).then(w,p)}}function a(w,S){r[w]&&(i[w]=function(R){return new Promise(function(N,k){s.push([w,R,N,k])>1||u(w,R)})},S&&(i[w]=S(i[w])))}function u(w,S){try{l(r[w](S))}catch(R){y(s[0][3],R)}}function l(w){w.value instanceof Xr?Promise.resolve(w.value.v).then(h,p):y(s[0][2],w)}function h(w){u("next",w)}function p(w){u("throw",w)}function y(w,S){w(S),s.shift(),s.length&&u(s[0][0],s[0][1])}}function Jw(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Kw=="function"?Kw(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var pu=t=>t&&typeof t.length=="number"&&typeof t!="function";function mu(t){return Z(t?.then)}function gu(t){return Z(t[os])}function yu(t){return Symbol.asyncIterator&&Z(t?.[Symbol.asyncIterator])}function vu(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function pP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var _u=pP();function Iu(t){return Z(t?.[_u])}function wu(t){return Yw(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Xr(n.read());if(i)return yield Xr(void 0);yield yield Xr(r)}}finally{n.releaseLock()}})}function Eu(t){return Z(t?.getReader)}function ke(t){if(t instanceof ce)return t;if(t!=null){if(gu(t))return mP(t);if(pu(t))return gP(t);if(mu(t))return yP(t);if(yu(t))return Zw(t);if(Iu(t))return vP(t);if(Eu(t))return _P(t)}throw vu(t)}function mP(t){return new ce(e=>{let n=t[os]();if(Z(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function gP(t){return new ce(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function yP(t){return new ce(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ou)})}function vP(t){return new ce(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Zw(t){return new ce(e=>{IP(t,e).catch(n=>e.error(n))})}function _P(t){return Zw(wu(t))}function IP(t,e){var n,r,i,s;return Qw(this,void 0,void 0,function*(){try{for(n=Jw(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function yt(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function cr(t,e=0){return pe((n,r)=>{n.subscribe(ue(r,i=>yt(r,t,()=>r.next(i),e),()=>yt(r,t,()=>r.complete(),e),i=>yt(r,t,()=>r.error(i),e)))})}function ur(t,e=0){return pe((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Xw(t,e){return ke(t).pipe(ur(e),cr(e))}function eE(t,e){return ke(t).pipe(ur(e),cr(e))}function tE(t,e){return new ce(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function nE(t,e){return new ce(n=>{let r;return yt(n,e,()=>{r=t[_u](),yt(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>Z(r?.return)&&r.return()})}function Tu(t,e){if(!t)throw new Error("Iterable cannot be null");return new ce(n=>{yt(n,e,()=>{let r=t[Symbol.asyncIterator]();yt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function rE(t,e){return Tu(wu(t),e)}function iE(t,e){if(t!=null){if(gu(t))return Xw(t,e);if(pu(t))return tE(t,e);if(mu(t))return eE(t,e);if(yu(t))return Tu(t,e);if(Iu(t))return nE(t,e);if(Eu(t))return rE(t,e)}throw vu(t)}function Pe(t,e){return e?iE(t,e):ke(t)}function X(...t){let e=ar(t);return Pe(t,e)}function hs(t,e){let n=Z(t)?t:()=>t,r=i=>i.error(n());return new ce(e?i=>e.schedule(r,0,i):r)}function Rf(t){return!!t&&(t instanceof ce||Z(t.lift)&&Z(t.subscribe))}var Nn=ns(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ie(t,e){return pe((n,r)=>{let i=0;n.subscribe(ue(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:wP}=Array;function EP(t,e){return wP(e)?t(...e):t(e)}function bu(t){return ie(e=>EP(t,e))}var{isArray:TP}=Array,{getPrototypeOf:bP,prototype:CP,keys:DP}=Object;function Cu(t){if(t.length===1){let e=t[0];if(TP(e))return{args:e,keys:null};if(SP(e)){let n=DP(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function SP(t){return t&&typeof t=="object"&&bP(t)===CP}function Du(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Su(...t){let e=ar(t),n=fu(t),{args:r,keys:i}=Cu(t);if(r.length===0)return Pe([],e);let s=new ce(AP(r,e,i?o=>Du(i,o):Tt));return n?s.pipe(bu(n)):s}function AP(t,e,n=Tt){return r=>{sE(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)sE(e,()=>{let l=Pe(t[u],e),h=!1;l.subscribe(ue(r,p=>{s[u]=p,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function sE(t,e,n){t?yt(n,t,e):e()}function oE(t,e,n,r,i,s,o,a){let u=[],l=0,h=0,p=!1,y=()=>{p&&!u.length&&!l&&e.complete()},w=R=>l<r?S(R):u.push(R),S=R=>{s&&e.next(R),l++;let N=!1;ke(n(R,h++)).subscribe(ue(e,k=>{i?.(k),s?w(k):e.next(k)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let k=u.shift();o?yt(e,o,()=>S(k)):S(k)}y()}catch(k){e.error(k)}}))};return t.subscribe(ue(e,w,()=>{p=!0,y()})),()=>{a?.()}}function Ue(t,e,n=1/0){return Z(e)?Ue((r,i)=>ie((s,o)=>e(r,s,i,o))(ke(t(r,i))),n):(typeof e=="number"&&(n=e),pe((r,i)=>oE(r,i,t,n)))}function Nf(t=1/0){return Ue(Tt,t)}function aE(){return Nf(1)}function fs(...t){return aE()(Pe(t,ar(t)))}function Au(t){return new ce(e=>{ke(t()).subscribe(e)})}function Pf(...t){let e=fu(t),{args:n,keys:r}=Cu(t),i=new ce(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),u=o,l=o;for(let h=0;h<o;h++){let p=!1;ke(n[h]).subscribe(ue(s,y=>{p||(p=!0,l--),a[h]=y},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?Du(r,a):a),s.complete())}))}});return e?i.pipe(bu(e)):i}function kt(t,e){return pe((n,r)=>{let i=0;n.subscribe(ue(r,s=>t.call(e,s,i++)&&r.next(s)))})}function lr(t){return pe((e,n)=>{let r=null,i=!1,s;r=e.subscribe(ue(n,void 0,void 0,o=>{s=ke(t(o,lr(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function cE(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(ue(o,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function ps(t,e){return Z(e)?Ue(t,e,1):Ue(t,1)}function dr(t){return pe((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Pn(t){return t<=0?()=>bt:pe((e,n)=>{let r=0;e.subscribe(ue(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Mf(t){return ie(()=>t)}function Ru(t=RP){return pe((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function RP(){return new Nn}function Yo(t){return pe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function on(t,e){let n=arguments.length>=2;return r=>r.pipe(t?kt((i,s)=>t(i,s,r)):Tt,Pn(1),n?dr(e):Ru(()=>new Nn))}function ms(t){return t<=0?()=>bt:pe((e,n)=>{let r=[];e.subscribe(ue(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Of(t,e){let n=arguments.length>=2;return r=>r.pipe(t?kt((i,s)=>t(i,s,r)):Tt,ms(1),n?dr(e):Ru(()=>new Nn))}function Nu(t,e){return pe(cE(t,e,arguments.length>=2,!0))}function Pu(...t){let e=ar(t);return pe((n,r)=>{(e?fs(t,n,e):fs(t,n)).subscribe(r)})}function Yt(t,e){return pe((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(ue(r,u=>{i?.unsubscribe();let l=0,h=s++;ke(t(u,h)).subscribe(i=ue(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function xf(t){return pe((e,n)=>{ke(t).subscribe(ue(n,()=>n.complete(),Ko)),!n.closed&&e.subscribe(n)})}function je(t,e,n){let r=Z(t)||e||n?{next:t,error:e,complete:n}:t;return r?pe((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ue(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Tt}var GE="https://g.co/ng/security#xss",B=class extends Error{constructor(e,n){super(Mp(e,n)),this.code=e}};function Mp(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function ua(t){return{toString:t}.toString()}var Mu="__parameters__";function NP(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function PP(t,e,n){return ua(()=>{let r=NP(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,l,h){let p=u.hasOwnProperty(Mu)?u[Mu]:Object.defineProperty(u,Mu,{value:[]})[Mu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var ei=globalThis;function Ce(t){for(let e in t)if(t[e]===Ce)return e;throw Error("Could not find renamed property on target object.")}function MP(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function vt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(vt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function uE(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var OP=Ce({__forward_ref__:Ce});function Ns(t){return t.__forward_ref__=Ns,t.toString=function(){return vt(this())},t}function mt(t){return WE(t)?t():t}function WE(t){return typeof t=="function"&&t.hasOwnProperty(OP)&&t.__forward_ref__===Ns}function $(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function li(t){return{providers:t.providers||[],imports:t.imports||[]}}function sl(t){return lE(t,QE)||lE(t,YE)}function KE(t){return sl(t)!==null}function lE(t,e){return t.hasOwnProperty(e)?t[e]:null}function xP(t){let e=t&&(t[QE]||t[YE]);return e||null}function dE(t){return t&&(t.hasOwnProperty(hE)||t.hasOwnProperty(kP))?t[hE]:null}var QE=Ce({\u0275prov:Ce}),hE=Ce({\u0275inj:Ce}),YE=Ce({ngInjectableDef:Ce}),kP=Ce({ngInjectorDef:Ce}),K=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=$({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function JE(t){return t&&!!t.\u0275providers}var LP=Ce({\u0275cmp:Ce}),FP=Ce({\u0275dir:Ce}),VP=Ce({\u0275pipe:Ce}),UP=Ce({\u0275mod:Ce}),Bu=Ce({\u0275fac:Ce}),Jo=Ce({__NG_ELEMENT_ID__:Ce}),fE=Ce({__NG_ENV_ID__:Ce});function Op(t){return typeof t=="string"?t:t==null?"":String(t)}function jP(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Op(t)}function BP(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new B(-200,t)}function xp(t,e){throw new B(-201,!1)}var se=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(se||{}),Yf;function ZE(){return Yf}function Lt(t){let e=Yf;return Yf=t,e}function XE(t,e,n){let r=sl(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&se.Optional)return null;if(e!==void 0)return e;xp(t,"Injector")}var $P={},Zo=$P,Jf="__NG_DI_FLAG__",$u="ngTempTokenPath",HP="ngTokenPath",qP=/\n/gm,zP="\u0275",pE="__source",_s;function GP(){return _s}function hr(t){let e=_s;return _s=t,e}function WP(t,e=se.Default){if(_s===void 0)throw new B(-203,!1);return _s===null?XE(t,void 0,e):_s.get(t,e&se.Optional?null:void 0,e)}function re(t,e=se.Default){return(ZE()||WP)(mt(t),e)}function F(t,e=se.Default){return re(t,ol(e))}function ol(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Zf(t){let e=[];for(let n=0;n<t.length;n++){let r=mt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new B(900,!1);let i,s=se.Default;for(let o=0;o<r.length;o++){let a=r[o],u=QP(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push(re(i,s))}else e.push(re(r))}return e}function KP(t,e){return t[Jf]=e,t.prototype[Jf]=e,t}function QP(t){return t[Jf]}function YP(t,e,n,r){let i=t[$u];throw e[pE]&&i.unshift(e[pE]),t.message=JP(`
`+t.message,i,n,r),t[HP]=i,t[$u]=null,t}function JP(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==zP?t.slice(2):t;let i=vt(e);if(Array.isArray(e))i=e.map(vt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):vt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(qP,`
  `)}`}var _t=KP(PP("Optional"),8);function ws(t,e){let n=t.hasOwnProperty(Bu);return n?t[Bu]:null}function kp(t,e){t.forEach(n=>Array.isArray(n)?kp(n,e):e(n))}function eT(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Hu(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ZP(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function XP(t,e,n){let r=la(t,e);return r>=0?t[r|1]=n:(r=~r,ZP(t,r,e,n)),r}function kf(t,e){let n=la(t,e);if(n>=0)return t[n|1]}function la(t,e){return eM(t,e,1)}function eM(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Es={},Ft=[],Ts=new K(""),tT=new K("",-1),nT=new K(""),qu=class{get(e,n=Zo){if(n===Zo){let r=new Error(`NullInjectorError: No provider for ${vt(e)}!`);throw r.name="NullInjectorError",r}return n}},rT=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(rT||{}),un=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(un||{}),rt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(rt||{});function tM(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Xf(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];nM(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function iT(t){return t===3||t===4||t===6}function nM(t){return t.charCodeAt(0)===64}function Xo(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?mE(t,n,i,null,e[++r]):mE(t,n,i,null,null))}}return t}function mE(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var sT="ng-template";function rM(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&tM(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Lp(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Lp(t){return t.type===4&&t.value!==sT}function iM(t,e,n){let r=t.type===4&&!n?sT:t.value;return e===r}function sM(t,e,n){let r=4,i=t.attrs,s=i!==null?cM(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!Jt(r)&&!Jt(u))return!1;if(o&&Jt(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!iM(t,u,n)||u===""&&e.length===1){if(Jt(r))return!1;o=!0}}else if(r&8){if(i===null||!rM(t,i,u,n)){if(Jt(r))return!1;o=!0}}else{let l=e[++a],h=oM(u,i,Lp(t),n);if(h===-1){if(Jt(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Jt(r))return!1;o=!0}}}}return Jt(r)||o}function Jt(t){return(t&1)===0}function oM(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return uM(e,t)}function aM(t,e,n=!1){for(let r=0;r<e.length;r++)if(sM(t,e[r],n))return!0;return!1}function cM(t){for(let e=0;e<t.length;e++){let n=t[e];if(iT(n))return e}return t.length}function uM(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function gE(t,e){return t?":not("+e.trim()+")":e}function lM(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Jt(o)&&(e+=gE(s,i),i=""),r=o,s=s||!Jt(r);n++}return i!==""&&(e+=gE(s,i)),e}function dM(t){return t.map(lM).join(",")}function hM(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Jt(i))break;i=s}r++}return{attrs:e,classes:n}}function ot(t){return ua(()=>{let e=lT(t),n=fe(O({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===rT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||un.Emulated,styles:t.styles||Ft,_:null,schemas:t.schemas||null,tView:null,id:""});dT(n);let r=t.dependencies;return n.directiveDefs=vE(r,!1),n.pipeDefs=vE(r,!0),n.id=mM(n),n})}function fM(t){return ri(t)||oT(t)}function pM(t){return t!==null}function di(t){return ua(()=>({type:t.type,bootstrap:t.bootstrap||Ft,declarations:t.declarations||Ft,imports:t.imports||Ft,exports:t.exports||Ft,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function yE(t,e){if(t==null)return Es;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=rt.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==rt.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Ct(t){return ua(()=>{let e=lT(t);return dT(e),e})}function ri(t){return t[LP]||null}function oT(t){return t[FP]||null}function aT(t){return t[VP]||null}function cT(t){let e=ri(t)||oT(t)||aT(t);return e!==null?e.standalone:!1}function uT(t,e){let n=t[UP]||null;if(!n&&e===!0)throw new Error(`Type ${vt(t)} does not have '\u0275mod' property.`);return n}function lT(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Es,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Ft,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:yE(t.inputs,e),outputs:yE(t.outputs),debugInfo:null}}function dT(t){t.features?.forEach(e=>e(t))}function vE(t,e){if(!t)return null;let n=e?aT:fM;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(pM)}function mM(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function hn(t){return{\u0275providers:t}}function gM(...t){return{\u0275providers:hT(!0,t),\u0275fromNgModule:!0}}function hT(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return kp(e,o=>{let a=o;ep(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&fT(i,s),n}function fT(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Fp(i,s=>{e(s,r)})}}function ep(t,e,n,r){if(t=mt(t),!t)return!1;let i=null,s=dE(t),o=!s&&ri(t);if(!s&&!o){let u=t.ngModule;if(s=dE(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)ep(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{kp(s.imports,h=>{ep(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&fT(l,e)}if(!a){let l=ws(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ft},i),e({provide:nT,useValue:i,multi:!0},i),e({provide:Ts,useValue:()=>re(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let l=t;Fp(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Fp(t,e){for(let n of t)JE(n)&&(n=n.\u0275providers),Array.isArray(n)?Fp(n,e):e(n)}var yM=Ce({provide:String,useValue:Ce});function pT(t){return t!==null&&typeof t=="object"&&yM in t}function vM(t){return!!(t&&t.useExisting)}function _M(t){return!!(t&&t.useFactory)}function bs(t){return typeof t=="function"}function IM(t){return!!t.useClass}var al=new K(""),Lu={},wM={},Lf;function Vp(){return Lf===void 0&&(Lf=new qu),Lf}var Ut=class{},ea=class extends Ut{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,np(e,o=>this.processProvider(o)),this.records.set(tT,gs(void 0,this)),i.has("environment")&&this.records.set(Ut,gs(void 0,this));let s=this.records.get(al);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(nT,Ft,se.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=we(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),we(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=hr(this),r=Lt(void 0),i;try{return e()}finally{hr(n),Lt(r)}}get(e,n=Zo,r=se.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(fE))return e[fE](this);r=ol(r);let i,s=hr(this),o=Lt(void 0);try{if(!(r&se.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=DM(e)&&sl(e);l&&this.injectableDefInScope(l)?u=gs(tp(e),Lu):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&se.Self?Vp():this.parent;return n=r&se.Optional&&n===Zo?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[$u]=a[$u]||[]).unshift(vt(e)),s)throw a;return YP(a,e,"R3InjectorError",this.source)}else throw a}finally{Lt(o),hr(s)}}resolveInjectorInitializers(){let e=we(null),n=hr(this),r=Lt(void 0),i;try{let s=this.get(Ts,Ft,se.Self);for(let o of s)o()}finally{hr(n),Lt(r),we(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(vt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new B(205,!1)}processProvider(e){e=mt(e);let n=bs(e)?e:mt(e&&e.provide),r=TM(e);if(!bs(e)&&e.multi===!0){let i=this.records.get(n);i||(i=gs(void 0,Lu,!0),i.factory=()=>Zf(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=we(null);try{return n.value===Lu&&(n.value=wM,n.value=n.factory()),typeof n.value=="object"&&n.value&&CM(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{we(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=mt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function tp(t){let e=sl(t),n=e!==null?e.factory:ws(t);if(n!==null)return n;if(t instanceof K)throw new B(204,!1);if(t instanceof Function)return EM(t);throw new B(204,!1)}function EM(t){if(t.length>0)throw new B(204,!1);let n=xP(t);return n!==null?()=>n.factory(t):()=>new t}function TM(t){if(pT(t))return gs(void 0,t.useValue);{let e=mT(t);return gs(e,Lu)}}function mT(t,e,n){let r;if(bs(t)){let i=mt(t);return ws(i)||tp(i)}else if(pT(t))r=()=>mt(t.useValue);else if(_M(t))r=()=>t.useFactory(...Zf(t.deps||[]));else if(vM(t))r=()=>re(mt(t.useExisting));else{let i=mt(t&&(t.useClass||t.provide));if(bM(t))r=()=>new i(...Zf(t.deps));else return ws(i)||tp(i)}return r}function gs(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function bM(t){return!!t.deps}function CM(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function DM(t){return typeof t=="function"||typeof t=="object"&&t instanceof K}function np(t,e){for(let n of t)Array.isArray(n)?np(n,e):n&&JE(n)?np(n.\u0275providers,e):e(n)}function hi(t,e){t instanceof ea&&t.assertNotDestroyed();let n,r=hr(t),i=Lt(void 0);try{return e()}finally{hr(r),Lt(i)}}function SM(){return ZE()!==void 0||GP()!=null}function AM(t){return typeof t=="function"}var Ln=0,he=1,Q=2,it=3,Zt=4,en=5,zu=6,ta=7,Mn=8,Cs=9,Xt=10,st=11,na=12,_E=13,da=14,ln=15,Up=16,ys=17,cl=18,ul=19,gT=20,fr=21,Ff=22,ii=23,si=25,yT=1;var oi=7,Gu=8,Wu=9,Vt=10,jp=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(jp||{});function ti(t){return Array.isArray(t)&&typeof t[yT]=="object"}function Fn(t){return Array.isArray(t)&&t[yT]===!0}function vT(t){return(t.flags&4)!==0}function ll(t){return t.componentOffset>-1}function _T(t){return(t.flags&1)===1}function pr(t){return!!t.template}function RM(t){return(t[Q]&512)!==0}var rp=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function IT(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function fi(){return wT}function wT(t){return t.type.prototype.ngOnChanges&&(t.setInput=PM),NM}fi.ngInherit=!0;function NM(){let t=TT(this),e=t?.current;if(e){let n=t.previous;if(n===Es)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function PM(t,e,n,r,i){let s=this.declaredInputs[r],o=TT(t)||MM(t,{previous:Es,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new rp(l&&l.currentValue,n,u===Es),IT(t,e,i,n)}var ET="__ngSimpleChanges__";function TT(t){return t[ET]||null}function MM(t,e){return t[ET]=e}var IE=null;var an=function(t,e,n){IE?.(t,e,n)},OM="svg",xM="math",kM=!1;function LM(){return kM}function dn(t){for(;Array.isArray(t);)t=t[Ln];return t}function FM(t,e){return dn(e[t])}function jt(t,e){return dn(e[t.index])}function bT(t,e){return t.data[e]}function gr(t,e){let n=e[t];return ti(n)?n:n[Ln]}function Bp(t){return(t[Q]&128)===128}function VM(t){return Fn(t[it])}function wE(t,e){return e==null?null:t[e]}function CT(t){t[ys]=0}function UM(t){t[Q]&1024||(t[Q]|=1024,Bp(t)&&ra(t))}function $p(t){return!!(t[Q]&9216||t[ii]?.dirty)}function ip(t){t[Xt].changeDetectionScheduler?.notify(1),$p(t)?ra(t):t[Q]&64&&(LM()?(t[Q]|=1024,ra(t)):t[Xt].changeDetectionScheduler?.notify())}function ra(t){t[Xt].changeDetectionScheduler?.notify();let e=ia(t);for(;e!==null&&!(e[Q]&8192||(e[Q]|=8192,!Bp(e)));)e=ia(e)}function DT(t,e){if((t[Q]&256)===256)throw new B(911,!1);t[fr]===null&&(t[fr]=[]),t[fr].push(e)}function jM(t,e){if(t[fr]===null)return;let n=t[fr].indexOf(e);n!==-1&&t[fr].splice(n,1)}function ia(t){let e=t[it];return Fn(e)?e[it]:e}var ve={lFrame:xT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function BM(){return ve.lFrame.elementDepthCount}function $M(){ve.lFrame.elementDepthCount++}function HM(){ve.lFrame.elementDepthCount--}function ST(){return ve.bindingsEnabled}function qM(){return ve.skipHydrationRootTNode!==null}function zM(t){return ve.skipHydrationRootTNode===t}function GM(){ve.skipHydrationRootTNode=null}function Le(){return ve.lFrame.lView}function tn(){return ve.lFrame.tView}function Dt(){let t=AT();for(;t!==null&&t.type===64;)t=t.parent;return t}function AT(){return ve.lFrame.currentTNode}function WM(){let t=ve.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function dl(t,e){let n=ve.lFrame;n.currentTNode=t,n.isParent=e}function RT(){return ve.lFrame.isParent}function KM(){ve.lFrame.isParent=!1}function QM(t){return ve.lFrame.bindingIndex=t}function NT(){return ve.lFrame.bindingIndex++}function YM(t){let e=ve.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function JM(){return ve.lFrame.inI18n}function ZM(t,e){let n=ve.lFrame;n.bindingIndex=n.bindingRootIndex=t,sp(e)}function XM(){return ve.lFrame.currentDirectiveIndex}function sp(t){ve.lFrame.currentDirectiveIndex=t}function eO(t){let e=ve.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function PT(t){ve.lFrame.currentQueryIndex=t}function tO(t){let e=t[he];return e.type===2?e.declTNode:e.type===1?t[en]:null}function MT(t,e,n){if(n&se.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&se.Host);)if(i=tO(s),i===null||(s=s[da],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=ve.lFrame=OT();return r.currentTNode=e,r.lView=t,!0}function Hp(t){let e=OT(),n=t[he];ve.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function OT(){let t=ve.lFrame,e=t===null?null:t.child;return e===null?xT(t):e}function xT(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function kT(){let t=ve.lFrame;return ve.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var LT=kT;function qp(){let t=kT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ha(){return ve.lFrame.selectedIndex}function ai(t){ve.lFrame.selectedIndex=t}function FT(){let t=ve.lFrame;return bT(t.tView,t.selectedIndex)}function nO(){return ve.lFrame.currentNamespace}var VT=!0;function UT(){return VT}function jT(t){VT=t}function rO(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=wT(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function BT(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Fu(t,e,n){$T(t,e,3,n)}function Vu(t,e,n,r){(t[Q]&3)===n&&$T(t,e,n,r)}function Vf(t,e){let n=t[Q];(n&3)===e&&(n&=16383,n+=1,t[Q]=n)}function $T(t,e,n,r){let i=r!==void 0?t[ys]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[ys]+=65536),(a<s||s==-1)&&(iO(t,n,e,u),t[ys]=(t[ys]&4294901760)+u+2),u++}function EE(t,e){an(4,t,e);let n=we(null);try{e.call(t)}finally{we(n),an(5,t,e)}}function iO(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[Q]>>14<t[ys]>>16&&(t[Q]&3)===e&&(t[Q]+=16384,EE(a,s)):EE(a,s)}var Is=-1,ci=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function sO(t){return t instanceof ci}function oO(t){return(t.flags&8)!==0}function aO(t){return(t.flags&16)!==0}function HT(t){return t!==Is}function Ku(t){return t&32767}function cO(t){return t>>16}function Qu(t,e){let n=cO(t),r=e;for(;n>0;)r=r[da],n--;return r}var op=!0;function TE(t){let e=op;return op=t,e}var uO=256,qT=uO-1,zT=5,lO=0,cn={};function dO(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Jo)&&(r=n[Jo]),r==null&&(r=n[Jo]=lO++);let i=r&qT,s=1<<i;e.data[t+(i>>zT)]|=s}function Yu(t,e){let n=GT(t,e);if(n!==-1)return n;let r=e[he];r.firstCreatePass&&(t.injectorIndex=e.length,Uf(r.data,t),Uf(e,null),Uf(r.blueprint,null));let i=zp(t,e),s=t.injectorIndex;if(HT(i)){let o=Ku(i),a=Qu(i,e),u=a[he].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function Uf(t,e){t.push(0,0,0,0,0,0,0,0,e)}function GT(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function zp(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=JT(i),r===null)return Is;if(n++,i=i[da],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Is}function ap(t,e,n){dO(t,e,n)}function hO(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(iT(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function WT(t,e,n){if(n&se.Optional||t!==void 0)return t;xp(e,"NodeInjector")}function KT(t,e,n,r){if(n&se.Optional&&r===void 0&&(r=null),!(n&(se.Self|se.Host))){let i=t[Cs],s=Lt(void 0);try{return i?i.get(e,r,n&se.Optional):XE(e,r,n&se.Optional)}finally{Lt(s)}}return WT(r,e,n)}function QT(t,e,n,r=se.Default,i){if(t!==null){if(e[Q]&2048&&!(r&se.Self)){let o=yO(t,e,n,r,cn);if(o!==cn)return o}let s=YT(t,e,n,r,cn);if(s!==cn)return s}return KT(e,n,r,i)}function YT(t,e,n,r,i){let s=mO(n);if(typeof s=="function"){if(!MT(e,t,r))return r&se.Host?WT(i,n,r):KT(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&se.Optional))xp(n);else return o}finally{LT()}}else if(typeof s=="number"){let o=null,a=GT(t,e),u=Is,l=r&se.Host?e[ln][en]:null;for((a===-1||r&se.SkipSelf)&&(u=a===-1?zp(t,e):e[a+8],u===Is||!CE(r,!1)?a=-1:(o=e[he],a=Ku(u),e=Qu(u,e)));a!==-1;){let h=e[he];if(bE(s,a,h.data)){let p=fO(a,e,n,o,r,l);if(p!==cn)return p}u=e[a+8],u!==Is&&CE(r,e[he].data[a+8]===l)&&bE(s,a,e)?(o=h,a=Ku(u),e=Qu(u,e)):a=-1}}return i}function fO(t,e,n,r,i,s){let o=e[he],a=o.data[t+8],u=r==null?ll(a)&&op:r!=o&&(a.type&3)!==0,l=i&se.Host&&s===a,h=pO(a,o,n,u,l);return h!==null?Ds(e,o,h,a):cn}function pO(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,u=t.directiveStart,l=t.directiveEnd,h=s>>20,p=r?a:a+h,y=i?a+h:l;for(let w=p;w<y;w++){let S=o[w];if(w<u&&n===S||w>=u&&S.type===n)return w}if(i){let w=o[u];if(w&&pr(w)&&w.type===n)return u}return null}function Ds(t,e,n,r){let i=t[n],s=e.data;if(sO(i)){let o=i;o.resolving&&BP(jP(s[n]));let a=TE(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?Lt(o.injectImpl):null,h=MT(t,r,se.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&rO(n,s[n],e)}finally{l!==null&&Lt(l),TE(a),o.resolving=!1,LT()}}return i}function mO(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Jo)?t[Jo]:void 0;return typeof e=="number"?e>=0?e&qT:gO:e}function bE(t,e,n){let r=1<<t;return!!(n[e+(t>>zT)]&r)}function CE(t,e){return!(t&se.Self)&&!(t&se.Host&&e)}var ni=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return QT(this._tNode,this._lView,e,ol(r),n)}};function gO(){return new ni(Dt(),Le())}function fa(t){return ua(()=>{let e=t.prototype.constructor,n=e[Bu]||cp(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Bu]||cp(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function cp(t){return WE(t)?()=>{let e=cp(mt(t));return e&&e()}:ws(t)}function yO(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[Q]&2048&&!(o[Q]&512);){let a=YT(s,o,n,r|se.Self,cn);if(a!==cn)return a;let u=s.parent;if(!u){let l=o[gT];if(l){let h=l.get(n,cn,r);if(h!==cn)return h}u=JT(o),o=o[da]}s=u}return i}function JT(t){let e=t[he],n=e.type;return n===2?e.declTNode:n===1?t[en]:null}function Gp(t){return hO(Dt(),t)}function DE(t,e=null,n=null,r){let i=ZT(t,e,n,r);return i.resolveInjectorInitializers(),i}function ZT(t,e=null,n=null,r,i=new Set){let s=[n||Ft,gM(t)];return r=r||(typeof t=="object"?void 0:vt(t)),new ea(s,e||Vp(),r||null,i)}var Bt=(()=>{class t{static{this.THROW_IF_NOT_FOUND=Zo}static{this.NULL=new qu}static create(n,r){if(Array.isArray(n))return DE({name:""},r,n,"");{let i=n.name??"";return DE({name:i},n.parent,n.providers,i)}}static{this.\u0275prov=$({token:t,providedIn:"any",factory:()=>re(tT)})}static{this.__NG_ELEMENT_ID__=-1}}return t})();var vO="ngOriginalError";function jf(t){return t[vO]}var On=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&jf(e);for(;n&&jf(n);)n=jf(n);return n||null}},XT=new K("",{providedIn:"root",factory:()=>F(On).handleError.bind(void 0)}),eb=(()=>{class t{static{this.__NG_ELEMENT_ID__=_O}static{this.__NG_ENV_ID__=n=>n}}return t})(),up=class extends eb{constructor(e){super(),this._lView=e}onDestroy(e){return DT(this._lView,e),()=>jM(this._lView,e)}};function _O(){return new up(Le())}function IO(){return Wp(Dt(),Le())}function Wp(t,e){return new yr(jt(t,e))}var yr=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=IO}}return t})();var lp=class extends tt{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,SM()&&(this.destroyRef=F(eb,{optional:!0})??void 0)}emit(e){let n=we(null);try{super.next(e)}finally{we(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=Bf(s),i&&(i=Bf(i)),o&&(o=Bf(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof xe&&e.add(a),a}};function Bf(t){return e=>{setTimeout(t,void 0,e)}}var nt=lp;function tb(t){return(t.flags&128)===128}var nb=new Map,wO=0;function EO(){return wO++}function TO(t){nb.set(t[ul],t)}function bO(t){nb.delete(t[ul])}var SE="__ngContext__";function Ss(t,e){ti(e)?(t[SE]=e[ul],TO(e)):t[SE]=e}function rb(t){return sb(t[na])}function ib(t){return sb(t[Zt])}function sb(t){for(;t!==null&&!Fn(t);)t=t[Zt];return t}var dp;function ob(t){dp=t}function CO(){if(dp!==void 0)return dp;if(typeof document<"u")return document;throw new B(210,!1)}var Kp=new K("",{providedIn:"root",factory:()=>DO}),DO="ng",Qp=new K(""),vr=new K("",{providedIn:"platform",factory:()=>"unknown"});var Yp=new K("",{providedIn:"root",factory:()=>CO().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var SO="h",AO="b";var RO=()=>null;function Jp(t,e,n=!1){return RO(t,e,n)}var ab=!1,NO=new K("",{providedIn:"root",factory:()=>ab});var Ou;function PO(){if(Ou===void 0&&(Ou=null,ei.trustedTypes))try{Ou=ei.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Ou}function AE(t){return PO()?.createScriptURL(t)||t}var Ju=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${GE})`}};function pa(t){return t instanceof Ju?t.changingThisBreaksApplicationSecurity:t}function Zp(t,e){let n=MO(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${GE})`)}return n===e}function MO(t){return t instanceof Ju&&t.getTypeName()||null}var OO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function cb(t){return t=String(t),t.match(OO)?t:"unsafe:"+t}var hl=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(hl||{});function xO(t){let e=lb();return e?e.sanitize(hl.URL,t)||"":Zp(t,"URL")?pa(t):cb(Op(t))}function kO(t){let e=lb();if(e)return AE(e.sanitize(hl.RESOURCE_URL,t)||"");if(Zp(t,"ResourceURL"))return AE(pa(t));throw new B(904,!1)}function LO(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?kO:xO}function ub(t,e,n){return LO(e,n)(t)}function lb(){let t=Le();return t&&t[Xt].sanitizer}function db(t){return t instanceof Function?t():t}var xn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(xn||{}),FO;function Xp(t,e){return FO(t,e)}function vs(t,e,n,r,i){if(r!=null){let s,o=!1;Fn(r)?s=r:ti(r)&&(o=!0,r=r[Ln]);let a=dn(r);t===0&&n!==null?i==null?gb(e,n,a):Zu(e,n,a,i||null,!0):t===1&&n!==null?Zu(e,n,a,i||null,!0):t===2?XO(e,a,o):t===3&&e.destroyNode(a),s!=null&&tx(e,t,s,n,i)}}function VO(t,e){return t.createText(e)}function hb(t,e,n){return t.createElement(e,n)}function UO(t,e){fb(t,e),e[Ln]=null,e[en]=null}function jO(t,e,n,r,i,s){r[Ln]=i,r[en]=e,fl(t,r,n,1,i,s)}function fb(t,e){e[Xt].changeDetectionScheduler?.notify(1),fl(t,e,e[st],2,null,null)}function BO(t){let e=t[na];if(!e)return $f(t[he],t);for(;e;){let n=null;if(ti(e))n=e[na];else{let r=e[Vt];r&&(n=r)}if(!n){for(;e&&!e[Zt]&&e!==t;)ti(e)&&$f(e[he],e),e=e[it];e===null&&(e=t),ti(e)&&$f(e[he],e),n=e&&e[Zt]}e=n}}function $O(t,e,n,r){let i=Vt+r,s=n.length;r>0&&(n[i-1][Zt]=e),r<s-Vt?(e[Zt]=n[i],eT(n,Vt+r,e)):(n.push(e),e[Zt]=null),e[it]=n;let o=e[Up];o!==null&&n!==o&&HO(o,e);let a=e[cl];a!==null&&a.insertView(t),ip(e),e[Q]|=128}function HO(t,e){let n=t[Wu],i=e[it][it][ln];e[ln]!==i&&(t[Q]|=jp.HasTransplantedViews),n===null?t[Wu]=[e]:n.push(e)}function pb(t,e){let n=t[Wu],r=n.indexOf(e);n.splice(r,1)}function hp(t,e){if(t.length<=Vt)return;let n=Vt+e,r=t[n];if(r){let i=r[Up];i!==null&&i!==t&&pb(i,r),e>0&&(t[n-1][Zt]=r[Zt]);let s=Hu(t,Vt+e);UO(r[he],r);let o=s[cl];o!==null&&o.detachView(s[he]),r[it]=null,r[Zt]=null,r[Q]&=-129}return r}function mb(t,e){if(!(e[Q]&256)){let n=e[st];n.destroyNode&&fl(t,e,n,3,null,null),BO(e)}}function $f(t,e){if(e[Q]&256)return;let n=we(null);try{e[Q]&=-129,e[Q]|=256,e[ii]&&Fw(e[ii]),zO(t,e),qO(t,e),e[he].type===1&&e[st].destroy();let r=e[Up];if(r!==null&&Fn(e[it])){r!==e[it]&&pb(r,e);let i=e[cl];i!==null&&i.detachView(t)}bO(e)}finally{we(n)}}function qO(t,e){let n=t.cleanup,r=e[ta];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[ta]=null);let i=e[fr];if(i!==null){e[fr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function zO(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof ci)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];an(4,a,u);try{u.call(a)}finally{an(5,a,u)}}else{an(4,i,s);try{s.call(i)}finally{an(5,i,s)}}}}}function GO(t,e,n){return WO(t,e.parent,n)}function WO(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Ln];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===un.None||s===un.Emulated)return null}return jt(r,n)}}function Zu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function gb(t,e,n){t.appendChild(e,n)}function RE(t,e,n,r,i){r!==null?Zu(t,e,n,r,i):gb(t,e,n)}function KO(t,e,n,r){t.removeChild(e,n,r)}function em(t,e){return t.parentNode(e)}function QO(t,e){return t.nextSibling(e)}function YO(t,e,n){return ZO(t,e,n)}function JO(t,e,n){return t.type&40?jt(t,n):null}var ZO=JO,NE;function yb(t,e,n,r){let i=GO(t,r,e),s=e[st],o=r.parent||e[en],a=YO(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)RE(s,i,n[u],a,!1);else RE(s,i,n,a,!1);NE!==void 0&&NE(s,r,e,n,i)}function Uu(t,e){if(e!==null){let n=e.type;if(n&3)return jt(e,t);if(n&4)return fp(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Uu(t,r);{let i=t[e.index];return Fn(i)?fp(-1,i):dn(i)}}else{if(n&32)return Xp(e,t)()||dn(t[e.index]);{let r=vb(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ia(t[ln]);return Uu(i,r)}else return Uu(t,e.next)}}}return null}function vb(t,e){if(e!==null){let r=t[ln][en],i=e.projection;return r.projection[i]}return null}function fp(t,e){let n=Vt+t+1;if(n<e.length){let r=e[n],i=r[he].firstChild;if(i!==null)return Uu(r,i)}return e[oi]}function XO(t,e,n){let r=em(t,e);r&&KO(t,r,e,n)}function tm(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],u=n.type;if(o&&e===0&&(a&&Ss(dn(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)tm(t,e,n.child,r,i,s,!1),vs(e,t,i,a,s);else if(u&32){let l=Xp(n,r),h;for(;h=l();)vs(e,t,i,h,s);vs(e,t,i,a,s)}else u&16?ex(t,e,r,n,i,s):vs(e,t,i,a,s);n=o?n.projectionNext:n.next}}function fl(t,e,n,r,i,s){tm(n,r,t.firstChild,e,i,s,!1)}function ex(t,e,n,r,i,s){let o=n[ln],u=o[en].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];vs(e,t,i,h,s)}else{let l=u,h=o[it];tb(r)&&(l.flags|=128),tm(t,e,l,h,i,s,!0)}}function tx(t,e,n,r,i){let s=n[oi],o=dn(n);s!==o&&vs(e,t,r,s,i);for(let a=Vt;a<n.length;a++){let u=n[a];fl(u[he],u,t,e,r,s)}}function nx(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:xn.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=xn.Important),t.setStyle(n,r,i,s))}}function rx(t,e,n){t.setAttribute(e,"style",n)}function _b(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Ib(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Xf(t,e,r),i!==null&&_b(t,e,i),s!==null&&rx(t,e,s)}var pl={};function St(t=1){wb(tn(),Le(),ha()+t,!1)}function wb(t,e,n,r){if(!r)if((e[Q]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Fu(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Vu(e,s,0,n)}ai(n)}function oe(t,e=se.Default){let n=Le();if(n===null)return re(t,e);let r=Dt();return QT(r,n,mt(t),e)}function Eb(t,e,n,r,i,s){let o=we(null);try{let a=null;i&rt.SignalBased&&(a=e[r][ff]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&rt.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):IT(e,a,r,s)}finally{we(o)}}function ix(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ai(~i);else{let s=i,o=n[++r],a=n[++r];ZM(o,s);let u=e[s];a(2,u)}}}finally{ai(-1)}}function nm(t,e,n,r,i,s,o,a,u,l,h){let p=e.blueprint.slice();return p[Ln]=i,p[Q]=r|4|128|8|64,(l!==null||t&&t[Q]&2048)&&(p[Q]|=2048),CT(p),p[it]=p[da]=t,p[Mn]=n,p[Xt]=o||t&&t[Xt],p[st]=a||t&&t[st],p[Cs]=u||t&&t[Cs]||null,p[en]=s,p[ul]=EO(),p[zu]=h,p[gT]=l,p[ln]=e.type==2?t[ln]:p,p}function rm(t,e,n,r,i){let s=t.data[e];if(s===null)s=sx(t,e,n,r,i),JM()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=WM();s.injectorIndex=o===null?-1:o.injectorIndex}return dl(s,!0),s}function sx(t,e,n,r,i){let s=AT(),o=RT(),a=o?s:s&&s.parent,u=t.data[e]=hx(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function Tb(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function bb(t,e,n,r,i){let s=ha(),o=r&2;try{ai(-1),o&&e.length>si&&wb(t,e,si,!1),an(o?2:0,i),n(r,i)}finally{ai(s),an(o?3:1,i)}}function Cb(t,e,n){if(vT(e)){let r=we(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let u=n[o];a.contentQueries(1,u,o)}}}finally{we(r)}}}function ox(t,e,n){ST()&&(Ix(t,e,n,jt(n,e)),(n.flags&64)===64&&Rb(t,e,n))}function ax(t,e,n=jt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function Db(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Sb(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Sb(t,e,n,r,i,s,o,a,u,l,h){let p=si+r,y=p+i,w=cx(p,y),S=typeof l=="function"?l():l;return w[he]={type:t,blueprint:w,template:n,queries:null,viewQuery:a,declTNode:e,data:w.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function cx(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:pl);return n}function ux(t,e,n,r){let s=r.get(NO,ab)||n===un.ShadowDom,o=t.selectRootElement(e,s);return lx(o),o}function lx(t){dx(t)}var dx=()=>null;function hx(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return qM()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function PE(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,u=rt.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?ME(r,n,l,a,u):ME(r,n,l,a)}return r}function ME(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function fx(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=s[h],y=n?n.get(p):null,w=y?y.inputs:null,S=y?y.outputs:null;u=PE(0,p.inputs,h,u,w),l=PE(1,p.outputs,h,l,S);let R=u!==null&&o!==null&&!Lp(e)?Px(u,h,o):null;a.push(R)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function px(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function mx(t,e,n,r,i,s,o,a){let u=jt(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(sm(t,n,h,r,i),ll(e)&&gx(n,e.index)):e.type&3?(r=px(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function gx(t,e){let n=gr(e,t);n[Q]&16||(n[Q]|=64)}function yx(t,e,n,r){if(ST()){let i=r===null?null:{"":-1},s=Ex(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&Ab(t,e,n,o,i,a),i&&Tx(n,r,i)}n.mergedAttrs=Xo(n.mergedAttrs,n.attrs)}function Ab(t,e,n,r,i,s){for(let l=0;l<r.length;l++)ap(Yu(n,e),t,r[l].type);Cx(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=Tb(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=Xo(n.mergedAttrs,h.hostAttrs),Dx(t,n,e,u,h),bx(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}fx(t,n,s)}function vx(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;_x(o)!=a&&o.push(a),o.push(n,r,s)}}function _x(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function Ix(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;ll(n)&&Sx(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Yu(n,e),Ss(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let u=t.data[a],l=Ds(e,t,a,n);if(Ss(l,e),o!==null&&Nx(e,a-i,l,u,n,o),pr(u)){let h=gr(n.index,e);h[Mn]=Ds(e,t,a,n)}}}function Rb(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=XM();try{ai(s);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];sp(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&wx(u,l)}}finally{ai(-1),sp(o)}}function wx(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Ex(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(aM(e,o.selectors,!1))if(r||(r=[]),pr(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let u=a.length;pp(t,e,u)}else r.unshift(o),pp(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function pp(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Tx(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new B(-301,!1);r.push(e[i],s)}}}function bx(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;pr(e)&&(n[""]=t)}}function Cx(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Dx(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=ws(i.type,!0)),o=new ci(s,pr(i),oe);t.blueprint[r]=o,n[r]=o,vx(t,e,r,Tb(t,n,i.hostVars,pl),i)}function Sx(t,e,n){let r=jt(e,t),i=Db(n),s=t[Xt].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=im(t,nm(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function Ax(t,e,n,r,i,s){let o=jt(t,e);Rx(e[st],o,s,t.value,n,r,i)}function Rx(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?Op(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function Nx(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let u=o[a++],l=o[a++],h=o[a++],p=o[a++];Eb(r,n,u,l,h,p)}}function Px(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function Mx(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Nb(t,e){let n=t.contentQueries;if(n!==null){let r=we(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];PT(s),a.contentQueries(2,e[o],o)}}}finally{we(r)}}}function im(t,e){return t[na]?t[_E][Zt]=e:t[na]=e,t[_E]=e,e}function mp(t,e,n){PT(0);let r=we(null);try{e(t,n)}finally{we(r)}}function Ox(t){return t[ta]||(t[ta]=[])}function xx(t){return t.cleanup||(t.cleanup=[])}function Pb(t,e){let n=t[Cs],r=n?n.get(On,null):null;r&&r.handleError(e)}function sm(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],u=n[s++],l=e[o],h=t.data[o];Eb(h,l,r,a,u,i)}}function kx(t,e){let n=gr(e,t),r=n[he];Lx(r,n);let i=n[Ln];i!==null&&n[zu]===null&&(n[zu]=Jp(i,n[Cs])),Mb(r,n,n[Mn])}function Lx(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Mb(t,e,n){Hp(e);try{let r=t.viewQuery;r!==null&&mp(1,r,n);let i=t.template;i!==null&&bb(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[cl]?.finishViewCreation(t),t.staticContentQueries&&Nb(t,e),t.staticViewQueries&&mp(2,t.viewQuery,n);let s=t.components;s!==null&&Fx(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Q]&=-5,qp()}}function Fx(t,e){for(let n=0;n<e.length;n++)kx(t,e[n])}function OE(t,e){return!e||e.firstChild===null||tb(t)}function Vx(t,e,n,r=!0){let i=e[he];if($O(i,e,t,n),r){let o=fp(n,t),a=e[st],u=em(a,t[oi]);u!==null&&jO(i,t[en],a,e,u,o)}let s=e[zu];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Xu(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(dn(s)),Fn(s)&&Ux(s,r);let o=n.type;if(o&8)Xu(t,e,n.child,r);else if(o&32){let a=Xp(n,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=vb(e,n);if(Array.isArray(a))r.push(...a);else{let u=ia(e[ln]);Xu(u[he],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Ux(t,e){for(let n=Vt;n<t.length;n++){let r=t[n],i=r[he].firstChild;i!==null&&Xu(r[he],r,i,e)}t[oi]!==t[Ln]&&e.push(t[oi])}var Ob=[];function jx(t){return t[ii]??Bx(t)}function Bx(t){let e=Ob.pop()??Object.create(Hx);return e.lView=t,e}function $x(t){t.lView[ii]!==t&&(t.lView=null,Ob.push(t))}var Hx=fe(O({},xw),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ra(t.lView)},consumerOnSignalRead(){this.lView[ii]=this}}),xb=100;function kb(t,e=!0,n=0){let r=t[Xt],i=r.rendererFactory,s=!1;s||i.begin?.();try{qx(t,n)}catch(o){throw e&&Pb(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function qx(t,e){gp(t,e);let n=0;for(;$p(t);){if(n===xb)throw new B(103,!1);n++,gp(t,1)}}function zx(t,e,n,r){let i=e[Q];if((i&256)===256)return;let s=!1;!s&&e[Xt].inlineEffectRunner?.flush(),Hp(e);let o=null,a=null;!s&&Gx(t)&&(a=jx(e),o=kw(a));try{CT(e),QM(t.bindingStartIndex),n!==null&&bb(t,e,n,2,r);let u=(i&3)===3;if(!s)if(u){let p=t.preOrderCheckHooks;p!==null&&Fu(e,p,null)}else{let p=t.preOrderHooks;p!==null&&Vu(e,p,0,null),Vf(e,0)}if(Wx(e),Lb(e,0),t.contentQueries!==null&&Nb(t,e),!s)if(u){let p=t.contentCheckHooks;p!==null&&Fu(e,p)}else{let p=t.contentHooks;p!==null&&Vu(e,p,1),Vf(e,1)}ix(t,e);let l=t.components;l!==null&&Vb(e,l,0);let h=t.viewQuery;if(h!==null&&mp(2,h,r),!s)if(u){let p=t.viewCheckHooks;p!==null&&Fu(e,p)}else{let p=t.viewHooks;p!==null&&Vu(e,p,2),Vf(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Ff]){for(let p of e[Ff])p();e[Ff]=null}s||(e[Q]&=-73)}catch(u){throw ra(e),u}finally{a!==null&&(Lw(a,o),$x(a)),qp()}}function Gx(t){return t.type!==2}function Lb(t,e){for(let n=rb(t);n!==null;n=ib(n))for(let r=Vt;r<n.length;r++){let i=n[r];Fb(i,e)}}function Wx(t){for(let e=rb(t);e!==null;e=ib(e)){if(!(e[Q]&jp.HasTransplantedViews))continue;let n=e[Wu];for(let r=0;r<n.length;r++){let i=n[r],s=i[it];UM(i)}}}function Kx(t,e,n){let r=gr(e,t);Fb(r,n)}function Fb(t,e){Bp(t)&&gp(t,e)}function gp(t,e){let r=t[he],i=t[Q],s=t[ii],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&pf(s)),s&&(s.dirty=!1),t[Q]&=-9217,o)zx(r,t,r.template,t[Mn]);else if(i&8192){Lb(t,1);let a=r.components;a!==null&&Vb(t,a,1)}}function Vb(t,e,n){for(let r=0;r<e.length;r++)Kx(t,e[r],n)}function om(t){for(t[Xt].changeDetectionScheduler?.notify();t;){t[Q]|=64;let e=ia(t);if(RM(t)&&!e)return t;t=e}return null}var As=class{get rootNodes(){let e=this._lView,n=e[he];return Xu(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Mn]}set context(e){this._lView[Mn]=e}get destroyed(){return(this._lView[Q]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[it];if(Fn(e)){let n=e[Gu],r=n?n.indexOf(this):-1;r>-1&&(hp(e,r),Hu(n,r))}this._attachedToViewContainer=!1}mb(this._lView[he],this._lView)}onDestroy(e){DT(this._lView,e)}markForCheck(){om(this._cdRefInjectingView||this._lView)}detach(){this._lView[Q]&=-129}reattach(){ip(this._lView),this._lView[Q]|=128}detectChanges(){this._lView[Q]|=1024,kb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new B(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,fb(this._lView[he],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new B(902,!1);this._appRef=e,ip(this._lView)}};var C5=new RegExp(`^(\\d+)*(${AO}|${SO})*(.*)`);var Qx=()=>null;function xE(t,e){return Qx(t,e)}var yp=class{},vp=class{},el=class{};function Yx(t){let e=Error(`No component factory found for ${vt(t)}.`);return e[Jx]=t,e}var Jx="ngComponent";var _p=class{resolveComponentFactory(e){throw Yx(e)}},ml=(()=>{class t{static{this.NULL=new _p}}return t})(),sa=class{},pi=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>Zx()}}return t})();function Zx(){let t=Le(),e=Dt(),n=gr(e.index,t);return(ti(n)?n:t)[st]}var Xx=(()=>{class t{static{this.\u0275prov=$({token:t,providedIn:"root",factory:()=>null})}}return t})(),Hf={};var kE=new Set;function Ub(t){kE.has(t)||(kE.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function LE(...t){}function ek(){let t=typeof ei.requestAnimationFrame=="function",e=ei[t?"requestAnimationFrame":"setTimeout"],n=ei[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var Te=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new nt(!1),this.onMicrotaskEmpty=new nt(!1),this.onStable=new nt(!1),this.onError=new nt(!1),typeof Zone>"u")throw new B(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=ek().nativeRequestAnimationFrame,rk(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new B(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new B(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,tk,LE,LE);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},tk={};function am(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function nk(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(ei,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Ip(t),t.isCheckStableRunning=!0,am(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Ip(t))}function rk(t){let e=()=>{nk(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(ik(a))return n.invokeTask(i,s,o,a);try{return FE(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),VE(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return FE(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),VE(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Ip(t),am(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Ip(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function FE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function VE(t){t._nesting--,am(t)}function ik(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var jb=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let n=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of n)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}}return t})();function wp(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=uE(i,a);else if(s==2){let u=a,l=e[++o];r=uE(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var tl=class extends ml{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=ri(e);return new oa(n,this.ngModule)}};function UE(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function sk(t){let e=t.toLowerCase();return e==="svg"?OM:e==="math"?xM:null}var Ep=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=ol(r);let i=this.injector.get(e,Hf,r);return i!==Hf||n===Hf?i:this.parentInjector.get(e,n,r)}},oa=class extends el{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=UE(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return UE(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=dM(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=we(null);try{i=i||this.ngModule;let o=i instanceof Ut?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Ep(e,o):e,u=a.get(sa,null);if(u===null)throw new B(407,!1);let l=a.get(Xx,null),h=a.get(jb,null),p=a.get(yp,null),y={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:h,changeDetectionScheduler:p},w=u.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",R=r?ux(w,r,this.componentDef.encapsulation,a):hb(w,S,sk(S)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let k=null;R!==null&&(k=Jp(R,a,!0));let j=Sb(0,null,null,1,0,null,null,null,null,null,null),U=nm(null,j,null,N,null,null,y,w,a,null,k);Hp(U);let ae,Re;try{let te=this.componentDef,T,v=null;te.findHostDirectiveDefs?(T=[],v=new Map,te.findHostDirectiveDefs(te,T,v),T.push(te)):T=[te];let _=ok(U,R),E=ak(_,R,te,T,U,y,w);Re=bT(j,si),R&&lk(w,te,R,r),n!==void 0&&dk(Re,this.ngContentSelectors,n),ae=uk(E,te,T,v,U,[hk]),Mb(j,U,null)}finally{qp()}return new Tp(this.componentType,ae,Wp(Re,U),U,Re)}finally{we(s)}}},Tp=class extends vp{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new As(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;sm(s[he],s,i,e,n),this.previousInputValues.set(e,n);let o=gr(this._tNode.index,s);om(o)}}get injector(){return new ni(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function ok(t,e){let n=t[he],r=si;return t[r]=e,rm(n,r,2,"#host",null)}function ak(t,e,n,r,i,s,o){let a=i[he];ck(r,t,e,o);let u=null;e!==null&&(u=Jp(e,i[Cs]));let l=s.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=nm(i,Db(n),null,h,i[t.index],t,s,l,null,null,u);return a.firstCreatePass&&pp(a,t,r.length-1),im(i,p),i[t.index]=p}function ck(t,e,n,r){for(let i of t)e.mergedAttrs=Xo(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(wp(e,e.mergedAttrs,!0),n!==null&&Ib(r,n,e))}function uk(t,e,n,r,i,s){let o=Dt(),a=i[he],u=jt(o,i);Ab(a,i,o,n,null,r);for(let h=0;h<n.length;h++){let p=o.directiveStart+h,y=Ds(i,a,p,o);Ss(y,i)}Rb(a,i,o),u&&Ss(u,i);let l=Ds(i,a,o.directiveStart+o.componentOffset,o);if(t[Mn]=i[Mn]=l,s!==null)for(let h of s)h(l,e);return Cb(a,o,i),l}function lk(t,e,n,r){if(r)Xf(t,n,["ng-version","17.3.12"]);else{let{attrs:i,classes:s}=hM(e.selectors[0]);i&&Xf(t,n,i),s&&s.length>0&&_b(t,n,s.join(" "))}}function dk(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function hk(){let t=Dt();BT(Le()[he],t)}var gl=(()=>{class t{static{this.__NG_ELEMENT_ID__=fk}}return t})();function fk(){let t=Dt();return mk(t,Le())}var pk=gl,Bb=class extends pk{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Wp(this._hostTNode,this._hostLView)}get injector(){return new ni(this._hostTNode,this._hostLView)}get parentInjector(){let e=zp(this._hostTNode,this._hostLView);if(HT(e)){let n=Qu(e,this._hostLView),r=Ku(e),i=n[he].data[r+8];return new ni(i,n)}else return new ni(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=jE(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Vt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=xE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,OE(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!AM(e),a;if(o)a=n;else{let S=n||{};a=S.index,r=S.injector,i=S.projectableNodes,s=S.environmentInjector||S.ngModuleRef}let u=o?e:new oa(ri(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let R=(o?l:this.parentInjector).get(Ut,null);R&&(s=R)}let h=ri(u.componentType??{}),p=xE(this._lContainer,h?.id??null),y=p?.firstChild??null,w=u.create(l,i,y,s);return this.insertImpl(w.hostView,a,OE(this._hostTNode,p)),w}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(VM(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[it],l=new Bb(u,u[en],u[it]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return Vx(o,i,s,r),e.attachToViewContainerRef(),eT(qf(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=jE(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=hp(this._lContainer,n);r&&(Hu(qf(this._lContainer),n),mb(r[he],r))}detach(e){let n=this._adjustIndex(e,-1),r=hp(this._lContainer,n);return r&&Hu(qf(this._lContainer),n)!=null?new As(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function jE(t){return t[Gu]}function qf(t){return t[Gu]||(t[Gu]=[])}function mk(t,e){let n,r=e[t.index];return Fn(r)?n=r:(n=Mx(r,e,null,t),e[t.index]=n,im(e,n)),yk(n,e,t,r),new Bb(n,t,e)}function gk(t,e){let n=t[st],r=n.createComment(""),i=jt(e,t),s=em(n,i);return Zu(n,s,r,QO(n,i),!1),r}var yk=vk;function vk(t,e,n,r){if(t[oi])return;let i;n.type&8?i=dn(r):i=gk(e,n),t[oi]=i}function _k(t){return typeof t=="function"&&t[ff]!==void 0}function $b(t){return _k(t)&&typeof t.set=="function"}function Ik(t){return Object.getPrototypeOf(t.prototype).constructor}function _r(t){let e=Ik(t.type),n=!0,r=[t];for(;e;){let i;if(pr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new B(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=xu(t.inputs),o.inputTransforms=xu(t.inputTransforms),o.declaredInputs=xu(t.declaredInputs),o.outputs=xu(t.outputs);let a=i.hostBindings;a&&Ck(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&Tk(t,u),l&&bk(t,l),wk(t,i),MP(t.outputs,i.outputs),pr(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===_r&&(n=!1)}}e=Object.getPrototypeOf(e)}Ek(r)}function wk(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function Ek(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Xo(i.hostAttrs,n=Xo(n,i.hostAttrs))}}function xu(t){return t===Es?{}:t===Ft?[]:t}function Tk(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function bk(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function Ck(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function cm(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var mr=class{},aa=class{};var bp=class extends mr{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new tl(this);let i=uT(e);this._bootstrapComponents=db(i.bootstrap),this._r3Injector=ZT(e,n,[{provide:mr,useValue:this},{provide:ml,useValue:this.componentFactoryResolver},...r],vt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Cp=class extends aa{constructor(e){super(),this.moduleType=e}create(e){return new bp(this.moduleType,e,[])}};var nl=class extends mr{constructor(e){super(),this.componentFactoryResolver=new tl(this),this.instance=null;let n=new ea([...e.providers,{provide:mr,useValue:this},{provide:ml,useValue:this.componentFactoryResolver}],e.parent||Vp(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function um(t,e,n=null){return new nl({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var yl=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new We(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function lm(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Dk(t){return(t.flags&32)===32}function vl(t,e,n,r){let i=Le(),s=NT();if(lm(i,s,e)){let o=tn(),a=FT();Ax(a,i,t,e,n,r)}return vl}function ku(t,e){return t<<17|e<<2}function ui(t){return t>>17&32767}function Sk(t){return(t&2)==2}function Ak(t,e){return t&131071|e<<17}function Dp(t){return t|2}function Rs(t){return(t&131068)>>2}function zf(t,e){return t&-131069|e<<2}function Rk(t){return(t&1)===1}function Sp(t){return t|1}function Nk(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ui(o),u=Rs(o);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||la(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let y=ui(t[a+1]);t[r+1]=ku(y,a),y!==0&&(t[y+1]=zf(t[y+1],r)),t[a+1]=Ak(t[a+1],r)}else t[r+1]=ku(a,0),a!==0&&(t[a+1]=zf(t[a+1],r)),a=r;else t[r+1]=ku(u,0),a===0?a=r:t[u+1]=zf(t[u+1],r),u=r;l&&(t[r+1]=Dp(t[r+1])),BE(t,h,r,!0),BE(t,h,r,!1),Pk(e,h,t,r,s),o=ku(a,u),s?e.classBindings=o:e.styleBindings=o}function Pk(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&la(s,e)>=0&&(n[r+1]=Sp(n[r+1]))}function BE(t,e,n,r){let i=t[n+1],s=e===null,o=r?ui(i):Rs(i),a=!1;for(;o!==0&&(a===!1||s);){let u=t[o],l=t[o+1];Mk(u,e)&&(a=!0,t[o+1]=r?Sp(l):Dp(l)),o=r?ui(l):Rs(l)}a&&(t[n+1]=r?Dp(i):Sp(i))}function Mk(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?la(t,e)>=0:!1}function $E(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";sm(t,n,s[o],o,r)}function _l(t,e){return Ok(t,e,null,!0),_l}function Ok(t,e,n,r){let i=Le(),s=tn(),o=YM(2);if(s.firstUpdatePass&&kk(s,t,o,r),e!==pl&&lm(i,o,e)){let a=s.data[ha()];jk(s,a,i,i[st],t,i[o+1]=Bk(e,n),r,o)}}function xk(t,e){return e>=t.expandoStartIndex}function kk(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[ha()],o=xk(t,n);$k(s,r)&&e===null&&!o&&(e=!1),e=Lk(i,s,e,r),Nk(i,s,e,n,o,r)}}function Lk(t,e,n,r){let i=eO(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Gf(null,t,e,n,r),n=ca(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Gf(i,t,e,n,r),s===null){let u=Fk(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Gf(null,t,e,u[1],r),u=ca(u,e.attrs,r),Vk(t,e,r,u))}else s=Uk(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function Fk(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Rs(r)!==0)return t[ui(r)]}function Vk(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[ui(i)]=r}function Uk(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=ca(r,o,n)}return ca(r,e.attrs,n)}function Gf(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=ca(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function ca(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),XP(t,o,n?!0:e[++s]))}return t===void 0?null:t}function jk(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=Rk(l)?HE(u,e,n,i,Rs(l),o):void 0;if(!rl(h)){rl(s)||Sk(l)&&(s=HE(u,null,n,i,a,o));let p=FM(ha(),n);nx(r,o,p,i,s)}}function HE(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,y=n[i+1];y===pl&&(y=p?Ft:void 0);let w=p?kf(y,r):h===r?y:void 0;if(l&&!rl(w)&&(w=kf(u,r)),rl(w)&&(a=w,o))return a;let S=t[i+1];i=o?ui(S):Rs(S)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=kf(u,r))}return a}function rl(t){return t!==void 0}function Bk(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=vt(pa(t)))),t}function $k(t,e){return(t.flags&(e?8:16))!==0}function Hk(t,e,n,r,i,s){let o=e.consts,a=wE(o,i),u=rm(e,t,2,r,a);return yx(e,n,u,wE(o,s)),u.attrs!==null&&wp(u,u.attrs,!1),u.mergedAttrs!==null&&wp(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function q(t,e,n,r){let i=Le(),s=tn(),o=si+t,a=i[st],u=s.firstCreatePass?Hk(o,s,i,e,n,r):s.data[o],l=qk(s,i,u,a,e,t);i[o]=l;let h=_T(u);return dl(u,!0),Ib(a,l,u),!Dk(u)&&UT()&&yb(s,i,l,u),BM()===0&&Ss(l,i),$M(),h&&(ox(s,i,u),Cb(s,u,i)),r!==null&&ax(i,u),q}function z(){let t=Dt();RT()?KM():(t=t.parent,dl(t,!1));let e=t;zM(e)&&GM(),HM();let n=tn();return n.firstCreatePass&&(BT(n,t),vT(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&oO(e)&&$E(n,e,Le(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&aO(e)&&$E(n,e,Le(),e.stylesWithoutHost,!1),z}function mi(t,e,n,r){return q(t,e,n,r),z(),mi}var qk=(t,e,n,r,i,s)=>(jT(!0),hb(r,i,nO()));var il="en-US";var zk=il;function Gk(t){typeof t=="string"&&(zk=t.toLowerCase().replace(/_/g,"-"))}function Be(t,e,n,r){let i=Le(),s=tn(),o=Dt();return Hb(s,i,i[st],o,t,e,r),Be}function Wk(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[ta],u=i[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function Hb(t,e,n,r,i,s,o){let a=_T(r),l=t.firstCreatePass&&xx(t),h=e[Mn],p=Ox(e),y=!0;if(r.type&3||o){let R=jt(r,e),N=o?o(R):R,k=p.length,j=o?ae=>o(dn(ae[r.index])):r.index,U=null;if(!o&&a&&(U=Wk(t,e,i,r.index)),U!==null){let ae=U.__ngLastListenerFn__||U;ae.__ngNextListenerFn__=s,U.__ngLastListenerFn__=s,y=!1}else{s=zE(r,e,h,s,!1);let ae=n.listen(N,i,s);p.push(s,ae),l&&l.push(i,j,k,k+1)}}else s=zE(r,e,h,s,!1);let w=r.outputs,S;if(y&&w!==null&&(S=w[i])){let R=S.length;if(R)for(let N=0;N<R;N+=2){let k=S[N],j=S[N+1],Re=e[k][j].subscribe(s),te=p.length;p.push(s,Re),l&&l.push(i,r.index,te,-(te+1))}}}function qE(t,e,n,r){let i=we(null);try{return an(6,e,n),n(r)!==!1}catch(s){return Pb(t,s),!1}finally{an(7,e,n),we(i)}}function zE(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?gr(t.index,e):e;om(a);let u=qE(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)u=qE(e,n,l,o)&&u,l=l.__ngNextListenerFn__;return i&&u===!1&&o.preventDefault(),u}}function me(t,e=""){let n=Le(),r=tn(),i=t+si,s=r.firstCreatePass?rm(r,i,1,e,null):r.data[i],o=Kk(r,n,s,e,t);n[i]=o,UT()&&yb(r,n,o,s),dl(s,!1)}var Kk=(t,e,n,r,i)=>(jT(!0),VO(e[st],r));function It(t,e,n){$b(e)&&(e=e());let r=Le(),i=NT();if(lm(r,i,e)){let s=tn(),o=FT();mx(s,o,r,t,e,r[st],n,!1)}return It}function At(t,e){let n=$b(t);return n&&t.set(e),n}function wt(t,e){let n=Le(),r=tn(),i=Dt();return Hb(r,n,n[st],i,t,e),wt}function Qk(t,e,n){let r=tn();if(r.firstCreatePass){let i=pr(t);Ap(n,r.data,r.blueprint,i,!0),Ap(e,r.data,r.blueprint,i,!1)}}function Ap(t,e,n,r,i){if(t=mt(t),Array.isArray(t))for(let s=0;s<t.length;s++)Ap(t[s],e,n,r,i);else{let s=tn(),o=Le(),a=Dt(),u=bs(t)?t:mt(t.provide),l=mT(t),h=a.providerIndexes&1048575,p=a.directiveStart,y=a.providerIndexes>>20;if(bs(t)||!t.multi){let w=new ci(l,i,oe),S=Kf(u,e,i?h:h+y,p);S===-1?(ap(Yu(a,o),s,u),Wf(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(w),o.push(w)):(n[S]=w,o[S]=w)}else{let w=Kf(u,e,h+y,p),S=Kf(u,e,h,h+y),R=w>=0&&n[w],N=S>=0&&n[S];if(i&&!N||!i&&!R){ap(Yu(a,o),s,u);let k=Zk(i?Jk:Yk,n.length,i,r,l);!i&&N&&(n[S].providerFactory=k),Wf(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(k),o.push(k)}else{let k=qb(n[i?S:w],l,!i&&r);Wf(s,t,w>-1?w:S,k)}!i&&r&&N&&n[S].componentProviders++}}}function Wf(t,e,n,r){let i=bs(e),s=IM(e);if(i||s){let u=(s?mt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function qb(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Kf(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Yk(t,e,n,r){return Rp(this.multi,[])}function Jk(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Ds(n,n[he],this.providerFactory.index,r);s=a.slice(0,o),Rp(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],Rp(i,s);return s}function Rp(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function Zk(t,e,n,r,i){let s=new ci(t,n,oe);return s.multi=[],s.index=e,s.componentProviders=0,qb(s,i,r&&!n),s}function Il(t,e=[]){return n=>{n.providersResolver=(r,i)=>Qk(r,i?i(t):t,e)}}var Xk=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=hT(!1,n.type),i=r.length>0?um([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=$({token:t,providedIn:"environment",factory:()=>new t(re(Ut))})}}return t})();function at(t){Ub("NgStandalone"),t.getStandaloneInjector=e=>e.get(Xk).getOrCreateStandaloneInjector(t)}var kn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},zb=new kn("17.3.12"),wl=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var Gb=new K("");function gi(t){return!!t&&typeof t.then=="function"}function Wb(t){return!!t&&typeof t.subscribe=="function"}var Kb=new K(""),Qb=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=F(Kb,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=i();if(gi(s))n.push(s);else if(Wb(s)){let o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),dm=new K("");function e1(){Vw(()=>{throw new B(600,!1)})}function t1(t){return t.isBoundToModule}function n1(t,e,n){try{let r=n();return gi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var ma=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=F(XT),this.afterRenderEffectManager=F(jb),this.externalTestViews=new Set,this.beforeRender=new tt,this.afterTick=new tt,this.componentTypes=[],this.components=[],this.isStable=F(yl).hasPendingTasks.pipe(ie(n=>!n)),this._injector=F(Ut)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof el;if(!this._injector.get(Qb).done){let y=!i&&cT(n),w=!1;throw new B(405,w)}let o;i?o=n:o=this._injector.get(ml).resolveComponentFactory(n),this.componentTypes.push(o.componentType);let a=t1(o)?void 0:this._injector.get(mr),u=r||o.selector,l=o.create(Bt.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(Gb,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Qf(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(n){if(this._runningTick)throw new B(101,!1);let r=we(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(n)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,we(r)}}detectChangesInAttachedViews(n){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===xb)throw new B(103,!1);if(n){let s=r===0;this.beforeRender.next(s);for(let{_lView:o,notifyErrorHandler:a}of this._views)r1(o,s,a)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>Np(s))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>Np(s))))break}}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Qf(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(dm,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Qf(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new B(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Qf(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function r1(t,e,n){!e&&!Np(t)||i1(t,n,e)}function Np(t){return $p(t)}function i1(t,e,n){let r;n?(r=0,t[Q]|=1024):t[Q]&64?r=0:r=1,kb(t,e,r)}var Pp=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},hm=(()=>{class t{compileModuleSync(n){return new Cp(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=uT(n),s=db(i.declarations).reduce((o,a)=>{let u=ri(a);return u&&o.push(new oa(u)),o},[]);return new Pp(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var s1=(()=>{class t{constructor(){this.zone=F(Te),this.applicationRef=F(ma)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function o1(t){return[{provide:Te,useFactory:t},{provide:Ts,multi:!0,useFactory:()=>{let e=F(s1,{optional:!0});return()=>e.initialize()}},{provide:Ts,multi:!0,useFactory:()=>{let e=F(l1);return()=>{e.initialize()}}},{provide:XT,useFactory:a1}]}function a1(){let t=F(Te),e=F(On);return n=>t.runOutsideAngular(()=>e.handleError(n))}function c1(t){let e=o1(()=>new Te(u1(t)));return hn([[],e])}function u1(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var l1=(()=>{class t{constructor(){this.subscription=new xe,this.initialized=!1,this.zone=F(Te),this.pendingTasks=F(yl)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Te.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Te.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function d1(){return typeof $localize<"u"&&$localize.locale||il}var fm=new K("",{providedIn:"root",factory:()=>F(fm,se.Optional|se.SkipSelf)||d1()});var Yb=new K("");var ju=null;function h1(t=[],e){return Bt.create({name:e,providers:[{provide:al,useValue:"platform"},{provide:Yb,useValue:new Set([()=>ju=null])},...t]})}function f1(t=[]){if(ju)return ju;let e=h1(t);return ju=e,e1(),p1(e),e}function p1(t){t.get(Qp,null)?.forEach(n=>n())}var yi=(()=>{class t{static{this.__NG_ELEMENT_ID__=m1}}return t})();function m1(t){return g1(Dt(),Le(),(t&16)===16)}function g1(t,e,n){if(ll(t)&&!n){let r=gr(t.index,e);return new As(r,r)}else if(t.type&47){let r=e[ln];return new As(r,e)}return null}function Jb(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=f1(r),s=[c1(),...n||[]],a=new nl({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=a.get(Te);return u.run(()=>{a.resolveInjectorInitializers();let l=a.get(On,null),h;u.runOutsideAngular(()=>{h=u.onError.subscribe({next:w=>{l.handleError(w)}})});let p=()=>a.destroy(),y=i.get(Yb);return y.add(p),a.onDestroy(()=>{h.unsubscribe(),y.delete(p)}),n1(l,u,()=>{let w=a.get(Qb);return w.runInitializers(),w.donePromise.then(()=>{let S=a.get(fm,il);Gk(S||il);let R=a.get(ma);return e!==void 0&&R.bootstrap(e),R})})})}catch(e){return Promise.reject(e)}}function vi(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var eC=null;function Vn(){return eC}function tC(t){eC??=t}var El=class{};var $t=new K(""),nC=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:()=>F(y1),providedIn:"platform"})}}return t})();var y1=(()=>{class t extends nC{constructor(){super(),this._doc=F($t),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Vn().getBaseHref(this._doc)}onPopState(n){let r=Vn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Vn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function rC(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function Zb(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function _i(t){return t&&t[0]!=="?"?"?"+t:t}var Ps=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:()=>F(iC),providedIn:"root"})}}return t})(),v1=new K(""),iC=(()=>{class t extends Ps{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??F($t).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return rC(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+_i(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+_i(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+_i(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(re(nC),re(v1,8))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var ga=(()=>{class t{constructor(n){this._subject=new nt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=w1(Zb(Xb(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+_i(r))}normalize(n){return t.stripTrailingSlash(I1(this._basePath,Xb(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+_i(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+_i(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=_i}static{this.joinWithSlash=rC}static{this.stripTrailingSlash=Zb}static{this.\u0275fac=function(r){return new(r||t)(re(Ps))}}static{this.\u0275prov=$({token:t,factory:()=>_1(),providedIn:"root"})}}return t})();function _1(){return new ga(re(Ps))}function I1(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function Xb(t){return t.replace(/\/index.html$/,"")}function w1(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function sC(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var pm=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=di({type:t})}static{this.\u0275inj=li({})}}return t})(),oC="browser",E1="server";function mm(t){return t===E1}var Tl=class{};var vm=class extends El{constructor(){super(...arguments),this.supportsDOMEvents=!0}},_m=class t extends vm{static makeCurrent(){tC(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=b1();return n==null?null:C1(n)}resetBaseElement(){ya=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return sC(document.cookie,e)}},ya=null;function b1(){return ya=ya||document.querySelector("base"),ya?ya.getAttribute("href"):null}function C1(t){return new URL(t,document.baseURI).pathname}var D1=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac})}}return t})(),Im=new K(""),lC=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new B(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(re(Im),re(Te))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac})}}return t})(),bl=class{constructor(e){this._doc=e}},gm="ng-app-id",dC=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=mm(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${gm}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(gm),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(gm,this.appId),n.appendChild(o),o}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(re($t),re(Kp),re(Yp,8),re(vr))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac})}}return t})(),ym={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Em=/%COMP%/g,hC="%COMP%",S1=`_nghost-${hC}`,A1=`_ngcontent-${hC}`,R1=!0,N1=new K("",{providedIn:"root",factory:()=>R1});function P1(t){return A1.replace(Em,t)}function M1(t){return S1.replace(Em,t)}function fC(t,e){return e.map(n=>n.replace(Em,t))}var aC=(()=>{class t{constructor(n,r,i,s,o,a,u,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=mm(a),this.defaultRenderer=new va(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===un.ShadowDom&&(r=fe(O({},r),{encapsulation:un.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof Cl?i.applyToHost(n):i instanceof _a&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case un.Emulated:s=new Cl(u,l,r,this.appId,h,o,a,p);break;case un.ShadowDom:return new wm(u,l,n,r,o,a,this.nonce,p);default:s=new _a(u,l,r,h,o,a,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(re(lC),re(dC),re(Kp),re(N1),re($t),re(vr),re(Te),re(Yp))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac})}}return t})(),va=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(ym[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(cC(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(cC(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new B(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=ym[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=ym[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(xn.DashCase|xn.Important)?e.style.setProperty(n,r,i&xn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&xn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Vn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function cC(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var wm=class extends va{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=fC(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},_a=class extends va{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?fC(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Cl=class extends _a{constructor(e,n,r,i,s,o,a,u){let l=i+"-"+r.id;super(e,n,r,s,o,a,u,l),this.contentAttr=P1(l),this.hostAttr=M1(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},O1=(()=>{class t extends bl{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(re($t))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac})}}return t})(),uC=["alt","control","meta","shift"],x1={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},k1={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},L1=(()=>{class t extends bl{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i){let s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Vn().onAndCancel(n,s.domEventName,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=t._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),uC.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=x1[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),uC.forEach(o=>{if(o!==i){let a=k1[o];a(n)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(re($t))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac})}}return t})();function pC(t,e){return Jb(O({rootComponent:t},F1(e)))}function F1(t){return{appProviders:[...$1,...t?.providers??[]],platformProviders:B1}}function V1(){_m.makeCurrent()}function U1(){return new On}function j1(){return ob(document),document}var B1=[{provide:vr,useValue:oC},{provide:Qp,useValue:V1,multi:!0},{provide:$t,useFactory:j1,deps:[]}];var $1=[{provide:al,useValue:"root"},{provide:On,useFactory:U1,deps:[]},{provide:Im,useClass:O1,multi:!0,deps:[$t,Te,vr]},{provide:Im,useClass:L1,multi:!0,deps:[$t]},aC,dC,lC,{provide:sa,useExisting:aC},{provide:Tl,useClass:D1,deps:[]},[]];var mC=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(re($t))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var ne="primary",xa=Symbol("RouteTitle"),Sm=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Ls(t){return new Sm(t)}function q1(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function z1(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!fn(t[n],e[n]))return!1;return!0}function fn(t,e){let n=t?Am(t):void 0,r=e?Am(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!wC(t[i],e[i]))return!1;return!0}function Am(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function wC(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function EC(t){return t.length>0?t[t.length-1]:null}function Tr(t){return Rf(t)?t:gi(t)?Pe(Promise.resolve(t)):X(t)}var G1={exact:bC,subset:CC},TC={exact:W1,subset:K1,ignored:()=>!0};function gC(t,e,n){return G1[n.paths](t.root,e.root,n.matrixParams)&&TC[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function W1(t,e){return fn(t,e)}function bC(t,e,n){if(!wi(t.segments,e.segments)||!Al(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!bC(t.children[r],e.children[r],n))return!1;return!0}function K1(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>wC(t[n],e[n]))}function CC(t,e,n){return DC(t,e,e.segments,n)}function DC(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!wi(i,n)||e.hasChildren()||!Al(i,n,r))}else if(t.segments.length===n.length){if(!wi(t.segments,n)||!Al(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!CC(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!wi(t.segments,i)||!Al(t.segments,i,r)||!t.children[ne]?!1:DC(t.children[ne],e,s,r)}}function Al(t,e,n){return e.every((r,i)=>TC[n](t[i].parameters,r.parameters))}var Ir=class{constructor(e=new Ie([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ls(this.queryParams),this._queryParamMap}toString(){return J1.serialize(this)}},Ie=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Rl(this)}},Ii=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Ls(this.parameters),this._parameterMap}toString(){return AC(this)}};function Q1(t,e){return wi(t,e)&&t.every((n,r)=>fn(n.parameters,e[r].parameters))}function wi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function Y1(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ne&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ne&&(n=n.concat(e(i,r)))}),n}var eg=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:()=>new Pl,providedIn:"root"})}}return t})(),Pl=class{parse(e){let n=new Nm(e);return new Ir(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Ia(e.root,!0)}`,r=eL(e.queryParams),i=typeof e.fragment=="string"?`#${Z1(e.fragment)}`:"";return`${n}${r}${i}`}},J1=new Pl;function Rl(t){return t.segments.map(e=>AC(e)).join("/")}function Ia(t,e){if(!t.hasChildren())return Rl(t);if(e){let n=t.children[ne]?Ia(t.children[ne],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==ne&&r.push(`${i}:${Ia(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=Y1(t,(r,i)=>i===ne?[Ia(t.children[ne],!1)]:[`${i}:${Ia(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ne]!=null?`${Rl(t)}/${n[0]}`:`${Rl(t)}/(${n.join("//")})`}}function SC(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Dl(t){return SC(t).replace(/%3B/gi,";")}function Z1(t){return encodeURI(t)}function Rm(t){return SC(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Nl(t){return decodeURIComponent(t)}function yC(t){return Nl(t.replace(/\+/g,"%20"))}function AC(t){return`${Rm(t.path)}${X1(t.parameters)}`}function X1(t){return Object.entries(t).map(([e,n])=>`;${Rm(e)}=${Rm(n)}`).join("")}function eL(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Dl(n)}=${Dl(i)}`).join("&"):`${Dl(n)}=${Dl(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var tL=/^[^\/()?;#]+/;function Tm(t){let e=t.match(tL);return e?e[0]:""}var nL=/^[^\/()?;=#]+/;function rL(t){let e=t.match(nL);return e?e[0]:""}var iL=/^[^=?&#]+/;function sL(t){let e=t.match(iL);return e?e[0]:""}var oL=/^[^&#]+/;function aL(t){let e=t.match(oL);return e?e[0]:""}var Nm=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ie([],{}):new Ie([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ne]=new Ie(e,n)),r}parseSegment(){let e=Tm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new B(4009,!1);return this.capture(e),new Ii(Nl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=rL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Tm(this.remaining);i&&(r=i,this.capture(r))}e[Nl(n)]=Nl(r)}parseQueryParam(e){let n=sL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=aL(this.remaining);o&&(r=o,this.capture(r))}let i=yC(n),s=yC(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Tm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new B(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ne);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[ne]:new Ie([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new B(4011,!1)}};function RC(t){return t.segments.length>0?new Ie([],{[ne]:t}):t}function NC(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=NC(i);if(r===ne&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new Ie(t.segments,e);return cL(n)}function cL(t){if(t.numberOfChildren===1&&t.children[ne]){let e=t.children[ne];return new Ie(t.segments.concat(e.segments),e.children)}return t}function Fs(t){return t instanceof Ir}function uL(t,e,n=null,r=null){let i=PC(t);return MC(i,e,n,r)}function PC(t){let e;function n(s){let o={};for(let u of s.children){let l=n(u);o[u.outlet]=l}let a=new Ie(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=RC(r);return e??i}function MC(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return bm(i,i,i,n,r);let s=lL(e);if(s.toRoot())return bm(i,i,new Ie([],{}),n,r);let o=dL(s,i,t),a=o.processChildren?Ta(o.segmentGroup,o.index,s.commands):xC(o.segmentGroup,o.index,s.commands);return bm(i,o.segmentGroup,a,n,r)}function Ml(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Da(t){return typeof t=="object"&&t!=null&&t.outlets}function bm(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;t===e?o=n:o=OC(t,e,n);let a=RC(NC(o));return new Ir(a,s,i)}function OC(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=OC(s,e,n)}),new Ie(t.segments,r)}var Ol=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Ml(r[0]))throw new B(4003,!1);let i=r.find(Da);if(i&&i!==EC(r))throw new B(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function lL(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Ol(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Ol(n,e,r)}var xs=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function dL(t,e,n){if(t.isAbsolute)return new xs(e,!0,0);if(!n)return new xs(e,!1,NaN);if(n.parent===null)return new xs(n,!0,0);let r=Ml(t.commands[0])?0:1,i=n.segments.length-1+r;return hL(n,i,t.numberOfDoubleDots)}function hL(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new B(4005,!1);i=r.segments.length}return new xs(r,!1,i-s)}function fL(t){return Da(t[0])?t[0].outlets:{[ne]:t}}function xC(t,e,n){if(t??=new Ie([],{}),t.segments.length===0&&t.hasChildren())return Ta(t,e,n);let r=pL(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new Ie(t.segments.slice(0,r.pathIndex),{});return s.children[ne]=new Ie(t.segments.slice(r.pathIndex),t.children),Ta(s,0,i)}else return r.match&&i.length===0?new Ie(t.segments,{}):r.match&&!t.hasChildren()?Pm(t,e,n):r.match?Ta(t,0,i):Pm(t,e,n)}function Ta(t,e,n){if(n.length===0)return new Ie(t.segments,{});{let r=fL(n),i={};if(Object.keys(r).some(s=>s!==ne)&&t.children[ne]&&t.numberOfChildren===1&&t.children[ne].segments.length===0){let s=Ta(t.children[ne],e,n);return new Ie(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=xC(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Ie(t.segments,i)}}function pL(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Da(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!_C(u,l,o))return s;r+=2}else{if(!_C(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Pm(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Da(s)){let u=mL(s.outlets);return new Ie(r,u)}if(i===0&&Ml(n[0])){let u=t.segments[e];r.push(new Ii(u.path,vC(n[0]))),i++;continue}let o=Da(s)?s.outlets[ne]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Ml(a)?(r.push(new Ii(o,vC(a))),i+=2):(r.push(new Ii(o,{})),i++)}return new Ie(r,{})}function mL(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Pm(new Ie([],{}),0,r))}),e}function vC(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function _C(t,e,n){return t==n.path&&fn(e,n.parameters)}var ba="imperative",Ke=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Ke||{}),Ht=class{constructor(e,n){this.id=e,this.url=n}},Sa=class extends Ht{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Ke.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},wr=class extends Ht{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Ke.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Nt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Nt||{}),Mm=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Mm||{}),Er=class extends Ht{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Ke.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ei=class extends Ht{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Ke.NavigationSkipped}},Aa=class extends Ht{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Ke.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},xl=class extends Ht{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ke.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Om=class extends Ht{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ke.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xm=class extends Ht{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Ke.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},km=class extends Ht{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ke.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lm=class extends Ht{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ke.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fm=class{constructor(e){this.route=e,this.type=Ke.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Vm=class{constructor(e){this.route=e,this.type=Ke.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Um=class{constructor(e){this.snapshot=e,this.type=Ke.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jm=class{constructor(e){this.snapshot=e,this.type=Ke.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bm=class{constructor(e){this.snapshot=e,this.type=Ke.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$m=class{constructor(e){this.snapshot=e,this.type=Ke.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ra=class{},Na=class{constructor(e){this.url=e}};var Hm=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new jl,this.attachRef=null}},jl=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Hm,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),kl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=qm(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=qm(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=zm(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return zm(e,this._root).map(n=>n.value)}};function qm(t,e){if(t===e.value)return e;for(let n of e.children){let r=qm(t,n);if(r)return r}return null}function zm(t,e){if(t===e.value)return[e];for(let n of e.children){let r=zm(t,n);if(r.length)return r.unshift(e),r}return[]}var Rt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Os(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Ll=class extends kl{constructor(e,n){super(e),this.snapshot=n,ng(this,e)}toString(){return this.snapshot.toString()}};function kC(t){let e=gL(t),n=new We([new Ii("",{})]),r=new We({}),i=new We({}),s=new We({}),o=new We(""),a=new Ti(n,r,s,o,i,ne,t,e.root);return a.snapshot=e.root,new Ll(new Rt(a,[]),e)}function gL(t){let e={},n={},r={},i="",s=new Pa([],e,r,i,n,ne,t,null,{});return new Fl("",new Rt(s,[]))}var Ti=class{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ie(l=>l[xa]))??X(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ie(e=>Ls(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ie(e=>Ls(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function tg(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:O(O({},e.params),t.params),data:O(O({},e.data),t.data),resolve:O(O(O(O({},t.data),e.data),i?.data),t._resolvedData)}:r={params:O({},t.params),data:O({},t.data),resolve:O(O({},t.data),t._resolvedData??{})},i&&FC(i)&&(r.resolve[xa]=i.title),r}var Pa=class{get title(){return this.data?.[xa]}constructor(e,n,r,i,s,o,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ls(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ls(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Fl=class extends kl{constructor(e,n){super(n),this.url=e,ng(this,n)}toString(){return LC(this._root)}};function ng(t,e){e.value._routerState=t,e.children.forEach(n=>ng(t,n))}function LC(t){let e=t.children.length>0?` { ${t.children.map(LC).join(", ")} } `:"";return`${t.value}${e}`}function Cm(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,fn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),fn(e.params,n.params)||t.paramsSubject.next(n.params),z1(e.url,n.url)||t.urlSubject.next(n.url),fn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Gm(t,e){let n=fn(t.params,e.params)&&Q1(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Gm(t.parent,e.parent))}function FC(t){return typeof t.title=="string"||t.title===null}var ka=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=ne,this.activateEvents=new nt,this.deactivateEvents=new nt,this.attachEvents=new nt,this.detachEvents=new nt,this.parentContexts=F(jl),this.location=F(gl),this.changeDetector=F(yi),this.environmentInjector=F(Ut),this.inputBinder=F(rg,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new B(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new B(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new B(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new B(4013,!1);this._activatedRoute=n;let i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Wm(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=Ct({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[fi]})}}return t})(),Wm=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Ti?this.route:e===jl?this.childContexts:this.parent.get(e,n)}},rg=new K("");function yL(t,e,n){let r=Ma(t,e._root,n?n._root:void 0);return new Ll(r,e)}function Ma(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=vL(t,e,n);return new Rt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ma(t,a)),o}}let r=_L(e.value),i=e.children.map(s=>Ma(t,s));return new Rt(r,i)}}function vL(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Ma(t,r,i);return Ma(t,r)})}function _L(t){return new Ti(new We(t.url),new We(t.params),new We(t.queryParams),new We(t.fragment),new We(t.data),t.outlet,t.component,t)}var VC="ngNavigationCancelingError";function UC(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Fs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=jC(!1,Nt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function jC(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[VC]=!0,n.cancellationCode=e,n}function IL(t){return BC(t)&&Fs(t.url)}function BC(t){return!!t&&t[VC]}var wL=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=ot({type:t,selectors:[["ng-component"]],standalone:!0,features:[at],decls:1,vars:0,template:function(r,i){r&1&&mi(0,"router-outlet")},dependencies:[ka],encapsulation:2})}}return t})();function EL(t,e){return t.providers&&!t._injector&&(t._injector=um(t.providers,e,`Route: ${t.path}`)),t._injector??e}function ig(t){let e=t.children&&t.children.map(ig),n=e?fe(O({},t),{children:e}):O({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ne&&(n.component=wL),n}function pn(t){return t.outlet||ne}function TL(t,e){let n=t.filter(r=>pn(r)===e);return n.push(...t.filter(r=>pn(r)!==e)),n}function La(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var bL=(t,e,n,r)=>ie(i=>(new Km(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Km=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Cm(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Os(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Os(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Os(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Os(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new $m(s.value.snapshot))}),e.children.length&&this.forwardEvent(new jm(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Cm(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Cm(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=La(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},Vl=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ks=class{constructor(e,n){this.component=e,this.route=n}};function CL(t,e,n){let r=t._root,i=e?e._root:null;return wa(r,i,n,[r.value])}function DL(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Us(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!KE(t)?t:e.get(t):r}function wa(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Os(e);return t.children.forEach(o=>{SL(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Ca(a,n.getContext(o),i)),i}function SL(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=AL(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Vl(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?wa(t,e,a?a.children:null,r,i):wa(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ks(a.outlet.component,o))}else o&&Ca(e,a,i),i.canActivateChecks.push(new Vl(r)),s.component?wa(t,null,a?a.children:null,r,i):wa(t,null,n,r,i);return i}function AL(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!wi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!wi(t.url,e.url)||!fn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gm(t,e)||!fn(t.queryParams,e.queryParams);case"paramsChange":default:return!Gm(t,e)}}function Ca(t,e,n){let r=Os(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Ca(o,e.children.getContext(s),n):Ca(o,null,n):Ca(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ks(e.outlet.component,i)):n.canDeactivateChecks.push(new ks(null,i)):n.canDeactivateChecks.push(new ks(null,i))}function Fa(t){return typeof t=="function"}function RL(t){return typeof t=="boolean"}function NL(t){return t&&Fa(t.canLoad)}function PL(t){return t&&Fa(t.canActivate)}function ML(t){return t&&Fa(t.canActivateChild)}function OL(t){return t&&Fa(t.canDeactivate)}function xL(t){return t&&Fa(t.canMatch)}function $C(t){return t instanceof Nn||t?.name==="EmptyError"}var Sl=Symbol("INITIAL_VALUE");function Vs(){return Yt(t=>Su(t.map(e=>e.pipe(Pn(1),Pu(Sl)))).pipe(ie(e=>{for(let n of e)if(n!==!0){if(n===Sl)return Sl;if(n===!1||n instanceof Ir)return n}return!0}),kt(e=>e!==Sl),Pn(1)))}function kL(t,e){return Ue(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?X(fe(O({},n),{guardsResult:!0})):LL(o,r,i,t).pipe(Ue(a=>a&&RL(a)?FL(r,s,t,e):X(a)),ie(a=>fe(O({},n),{guardsResult:a})))})}function LL(t,e,n,r){return Pe(t).pipe(Ue(i=>$L(i.component,i.route,n,e,r)),on(i=>i!==!0,!0))}function FL(t,e,n,r){return Pe(e).pipe(ps(i=>fs(UL(i.route.parent,r),VL(i.route,r),BL(t,i.path,n),jL(t,i.route,n))),on(i=>i!==!0,!0))}function VL(t,e){return t!==null&&e&&e(new Bm(t)),X(!0)}function UL(t,e){return t!==null&&e&&e(new Um(t)),X(!0)}function jL(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return X(!0);let i=r.map(s=>Au(()=>{let o=La(e)??n,a=Us(s,o),u=PL(a)?a.canActivate(e,t):hi(o,()=>a(e,t));return Tr(u).pipe(on())}));return X(i).pipe(Vs())}function BL(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>DL(o)).filter(o=>o!==null).map(o=>Au(()=>{let a=o.guards.map(u=>{let l=La(o.node)??n,h=Us(u,l),p=ML(h)?h.canActivateChild(r,t):hi(l,()=>h(r,t));return Tr(p).pipe(on())});return X(a).pipe(Vs())}));return X(s).pipe(Vs())}function $L(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return X(!0);let o=s.map(a=>{let u=La(e)??i,l=Us(a,u),h=OL(l)?l.canDeactivate(t,e,n,r):hi(u,()=>l(t,e,n,r));return Tr(h).pipe(on())});return X(o).pipe(Vs())}function HL(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return X(!0);let s=i.map(o=>{let a=Us(o,t),u=NL(a)?a.canLoad(e,n):hi(t,()=>a(e,n));return Tr(u)});return X(s).pipe(Vs(),HC(r))}function HC(t){return cu(je(e=>{if(Fs(e))throw UC(t,e)}),ie(e=>e===!0))}function qL(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return X(!0);let s=i.map(o=>{let a=Us(o,t),u=xL(a)?a.canMatch(e,n):hi(t,()=>a(e,n));return Tr(u)});return X(s).pipe(Vs(),HC(r))}var Oa=class{constructor(e){this.segmentGroup=e||null}},Ul=class extends Error{constructor(e){super(),this.urlTree=e}};function Ms(t){return hs(new Oa(t))}function zL(t){return hs(new B(4e3,!1))}function GL(t){return hs(jC(!1,Nt.GuardRejected))}var Qm=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return X(r);if(i.numberOfChildren>1||!i.children[ne])return zL(e.redirectTo);i=i.children[ne]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Ul(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Ir(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new Ie(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new B(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Ym={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function WL(t,e,n,r,i){let s=sg(t,e,n);return s.matched?(r=EL(e,r),qL(r,e,n,i).pipe(ie(o=>o===!0?s:O({},Ym)))):X(s)}function sg(t,e,n){if(e.path==="**")return KL(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?O({},Ym):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||q1)(n,t,e);if(!i)return O({},Ym);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?O(O({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function KL(t){return{matched:!0,parameters:t.length>0?EC(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function IC(t,e,n,r){return n.length>0&&JL(t,n,r)?{segmentGroup:new Ie(e,YL(r,new Ie(n,t.children))),slicedSegments:[]}:n.length===0&&ZL(t,n,r)?{segmentGroup:new Ie(t.segments,QL(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ie(t.segments,t.children),slicedSegments:n}}function QL(t,e,n,r){let i={};for(let s of n)if(Bl(t,e,s)&&!r[pn(s)]){let o=new Ie([],{});i[pn(s)]=o}return O(O({},r),i)}function YL(t,e){let n={};n[ne]=e;for(let r of t)if(r.path===""&&pn(r)!==ne){let i=new Ie([],{});n[pn(r)]=i}return n}function JL(t,e,n){return n.some(r=>Bl(t,e,r)&&pn(r)!==ne)}function ZL(t,e,n){return n.some(r=>Bl(t,e,r))}function Bl(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function XL(t,e,n,r){return pn(t)!==r&&(r===ne||!Bl(e,n,t))?!1:sg(e,t,n).matched}function eF(t,e,n){return e.length===0&&!t.children[n]}var Jm=class{};function tF(t,e,n,r,i,s,o="emptyOnly"){return new Zm(t,e,n,r,i,o,s).recognize()}var nF=31,Zm=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Qm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new B(4002,`'${e.segmentGroup}'`)}recognize(){let e=IC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ie(n=>{let r=new Pa([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,{},ne,this.rootComponentType,null,{}),i=new Rt(r,n),s=new Fl("",i),o=uL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,ne).pipe(lr(r=>{if(r instanceof Ul)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Oa?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=tg(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(ie(s=>s instanceof Rt?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Pe(i).pipe(ps(s=>{let o=r.children[s],a=TL(n,s);return this.processSegmentGroup(e,a,o,s)}),Nu((s,o)=>(s.push(...o),s)),dr(null),Of(),Ue(s=>{if(s===null)return Ms(r);let o=qC(s);return rF(o),X(o)}))}processSegment(e,n,r,i,s,o){return Pe(n).pipe(ps(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(lr(u=>{if(u instanceof Oa)return X(null);throw u}))),on(a=>!!a),lr(a=>{if($C(a))return eF(r,i,s)?X(new Jm):Ms(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return XL(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Ms(i):Ms(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:u,positionalParamSegments:l,remainingSegments:h}=sg(n,i,s);if(!a)return Ms(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>nF&&(this.allowRedirects=!1));let p=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,p).pipe(Ue(y=>this.processSegment(e,r,n,y.concat(h),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=WL(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(Yt(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Yt(({routes:u})=>{let l=r._loadedInjector??e,{consumedSegments:h,remainingSegments:p,parameters:y}=a,w=new Pa(h,y,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,sF(r),pn(r),r.component??r._loadedComponent??null,r,oF(r)),{segmentGroup:S,slicedSegments:R}=IC(n,h,p,u);if(R.length===0&&S.hasChildren())return this.processChildren(l,u,S).pipe(ie(k=>k===null?null:new Rt(w,k)));if(u.length===0&&R.length===0)return X(new Rt(w,[]));let N=pn(r)===s;return this.processSegment(l,u,S,R,N?ne:s,!0).pipe(ie(k=>new Rt(w,k instanceof Rt?[k]:[])))}))):Ms(n)))}getChildConfig(e,n,r){return n.children?X({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?X({routes:n._loadedRoutes,injector:n._loadedInjector}):HL(e,n,r,this.urlSerializer).pipe(Ue(i=>i?this.configLoader.loadChildren(e,n).pipe(je(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):GL(n))):X({routes:[],injector:e})}};function rF(t){t.sort((e,n)=>e.value.outlet===ne?-1:n.value.outlet===ne?1:e.value.outlet.localeCompare(n.value.outlet))}function iF(t){let e=t.value.routeConfig;return e&&e.path===""}function qC(t){let e=[],n=new Set;for(let r of t){if(!iF(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=qC(r.children);e.push(new Rt(r.value,i))}return e.filter(r=>!n.has(r))}function sF(t){return t.data||{}}function oF(t){return t.resolve||{}}function aF(t,e,n,r,i,s){return Ue(o=>tF(t,e,n,r,o.extractedUrl,i,s).pipe(ie(({state:a,tree:u})=>fe(O({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function cF(t,e){return Ue(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return X(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let l of zC(u))o.add(l);let a=0;return Pe(o).pipe(ps(u=>s.has(u)?uF(u,r,t,e):(u.data=tg(u,u.parent,t).resolve,X(void 0))),je(()=>a++),ms(1),Ue(u=>a===o.size?X(n):bt))})}function zC(t){let e=t.children.map(n=>zC(n)).flat();return[t,...e]}function uF(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!FC(i)&&(s[xa]=i.title),lF(s,t,e,r).pipe(ie(o=>(t._resolvedData=o,t.data=tg(t,t.parent,n).resolve,null)))}function lF(t,e,n,r){let i=Am(t);if(i.length===0)return X({});let s={};return Pe(i).pipe(Ue(o=>dF(t[o],e,n,r).pipe(on(),je(a=>{s[o]=a}))),ms(1),Mf(s),lr(o=>$C(o)?bt:hs(o)))}function dF(t,e,n,r){let i=La(e)??r,s=Us(t,i),o=s.resolve?s.resolve(e,n):hi(i,()=>s(e,n));return Tr(o)}function Dm(t){return Yt(e=>{let n=t(e);return n?Pe(n).pipe(ie(()=>e)):X(e)})}var GC=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===ne);return r}getResolvedTitleForRoute(n){return n.data[xa]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:()=>F(hF),providedIn:"root"})}}return t})(),hF=(()=>{class t extends GC{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(re(mC))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),og=new K("",{providedIn:"root",factory:()=>({})}),ag=new K(""),fF=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=F(hm)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return X(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=Tr(n.loadComponent()).pipe(ie(WC),je(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),Yo(()=>{this.componentLoaders.delete(n)})),i=new cs(r,()=>new tt).pipe(as());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return X({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=pF(r,this.compiler,n,this.onLoadEndListener).pipe(Yo(()=>{this.childrenLoaders.delete(r)})),o=new cs(s,()=>new tt).pipe(as());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function pF(t,e,n,r){return Tr(t.loadChildren()).pipe(ie(WC),Ue(i=>i instanceof aa||Array.isArray(i)?X(i):Pe(e.compileModuleAsync(i))),ie(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(ag,[],{optional:!0,self:!0}).flat()),{routes:o.map(ig),injector:s}}))}function mF(t){return t&&typeof t=="object"&&"default"in t}function WC(t){return mF(t)?t.default:t}var cg=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:()=>F(gF),providedIn:"root"})}}return t})(),gF=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),yF=new K("");var vF=(()=>{class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new tt,this.transitionAbortSubject=new tt,this.configLoader=F(fF),this.environmentInjector=F(Ut),this.urlSerializer=F(eg),this.rootContexts=F(jl),this.location=F(ga),this.inputBindingEnabled=F(rg,{optional:!0})!==null,this.titleStrategy=F(GC),this.options=F(og,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=F(cg),this.createViewTransition=F(yF,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>X(void 0),this.rootComponentType=null;let n=i=>this.events.next(new Fm(i)),r=i=>this.events.next(new Vm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(fe(O(O({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new We({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ba,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(kt(s=>s.id!==0),ie(s=>fe(O({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Yt(s=>{let o=!1,a=!1;return X(s).pipe(Yt(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Nt.SupersededByNewNavigation),bt;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?fe(O({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new Ei(u.id,this.urlSerializer.serialize(u.rawUrl),p,Mm.IgnoredSameUrlNavigation)),u.resolve(null),bt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return X(u).pipe(Yt(p=>{let y=this.transitions?.getValue();return this.events.next(new Sa(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),y!==this.transitions?.getValue()?bt:Promise.resolve(p)}),aF(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),je(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=fe(O({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let y=new xl(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(y)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:y,source:w,restoredState:S,extras:R}=u,N=new Sa(p,this.urlSerializer.serialize(y),w,S);this.events.next(N);let k=kC(this.rootComponentType).snapshot;return this.currentTransition=s=fe(O({},u),{targetSnapshot:k,urlAfterRedirects:y,extras:fe(O({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,X(s)}else{let p="";return this.events.next(new Ei(u.id,this.urlSerializer.serialize(u.extractedUrl),p,Mm.IgnoredByUrlHandlingStrategy)),u.resolve(null),bt}}),je(u=>{let l=new Om(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),ie(u=>(this.currentTransition=s=fe(O({},u),{guards:CL(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),kL(this.environmentInjector,u=>this.events.next(u)),je(u=>{if(s.guardsResult=u.guardsResult,Fs(u.guardsResult))throw UC(this.urlSerializer,u.guardsResult);let l=new xm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),kt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Nt.GuardRejected),!1)),Dm(u=>{if(u.guards.canActivateChecks.length)return X(u).pipe(je(l=>{let h=new km(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Yt(l=>{let h=!1;return X(l).pipe(cF(this.paramsInheritanceStrategy,this.environmentInjector),je({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Nt.NoDataFromResolver)}}))}),je(l=>{let h=new Lm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Dm(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(je(y=>{h.component=y}),ie(()=>{})));for(let y of h.children)p.push(...l(y));return p};return Su(l(u.targetSnapshot.root)).pipe(dr(null),Pn(1))}),Dm(()=>this.afterPreactivation()),Yt(()=>{let{currentSnapshot:u,targetSnapshot:l}=s,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?Pe(h).pipe(ie(()=>s)):X(s)}),ie(u=>{let l=yL(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=fe(O({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),je(()=>{this.events.next(new Ra)}),bL(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Pn(1),je({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new wr(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),xf(this.transitionAbortSubject.pipe(je(u=>{throw u}))),Yo(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Nt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),lr(u=>{if(a=!0,BC(u))this.events.next(new Er(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),IL(u)?this.events.next(new Na(u.url)):s.resolve(!1);else{this.events.next(new Aa(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(n.errorHandler(u))}catch(l){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(l)}}return bt}))}))}cancelNavigationTransition(n,r,i){let s=new Er(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function _F(t){return t!==ba}var IF=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:()=>F(wF),providedIn:"root"})}}return t})(),Xm=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},wF=(()=>{class t extends Xm{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=fa(t)))(i||t)}})()}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),KC=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:()=>F(EF),providedIn:"root"})}}return t})(),EF=(()=>{class t extends KC{constructor(){super(...arguments),this.location=F(ga),this.urlSerializer=F(eg),this.options=F(og,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=F(cg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ir,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=kC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof Sa)this.stateMemento=this.createStateMemento();else if(n instanceof Ei)this.rawUrlTree=r.initialUrl;else if(n instanceof xl){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(i,r)}}else n instanceof Ra?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):n instanceof Er&&(n.code===Nt.GuardRejected||n.code===Nt.NoDataFromResolver)?this.restoreHistory(r):n instanceof Aa?this.restoreHistory(r,!0):n instanceof wr&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=O(O({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=O(O({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=fa(t)))(i||t)}})()}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Ea=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Ea||{});function TF(t,e){t.events.pipe(kt(n=>n instanceof wr||n instanceof Er||n instanceof Aa||n instanceof Ei),ie(n=>n instanceof wr||n instanceof Ei?Ea.COMPLETE:(n instanceof Er?n.code===Nt.Redirect||n.code===Nt.SupersededByNewNavigation:!1)?Ea.REDIRECTING:Ea.FAILED),kt(n=>n!==Ea.REDIRECTING),Pn(1)).subscribe(()=>{e()})}function bF(t){throw t}var CF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},DF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},nn=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=F(wl),this.stateManager=F(KC),this.options=F(og,{optional:!0})||{},this.pendingTasks=F(yl),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=F(vF),this.urlSerializer=F(eg),this.location=F(ga),this.urlHandlingStrategy=F(cg),this._events=new tt,this.errorHandler=this.options.errorHandler||bF,this.navigated=!1,this.routeReuseStrategy=F(IF),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=F(ag,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!F(rg,{optional:!0}),this.eventsSubscription=new xe,this.isNgZoneEnabled=F(Te)instanceof Te&&Te.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Er&&r.code!==Nt.Redirect&&r.code!==Nt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof wr)this.navigated=!0;else if(r instanceof Na){let o=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),a={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||_F(i.source)};this.scheduleNavigation(o,ba,null,a,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}AF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ba,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let u=O({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(ig),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:o,h=null;switch(a){case"merge":h=O(O({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let y=i?i.snapshot:this.routerState.snapshot.root;p=PC(y)}catch{(typeof n[0]!="string"||!n[0].startsWith("/"))&&(n=[]),p=this.currentUrlTree.root}return MC(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Fs(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,ba,null,r)}navigate(n,r={skipLocationChange:!1}){return SF(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=O({},CF):r===!1?i=O({},DF):i=r,Fs(n))return gC(this.currentUrlTree,n,i);let s=this.parseUrl(n);return gC(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,l;o?(a=o.resolve,u=o.reject,l=o.promise):l=new Promise((p,y)=>{a=p,u=y});let h=this.pendingTasks.add();return TF(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function SF(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new B(4008,!1)}function AF(t){return!(t instanceof Ra)&&!(t instanceof Na)}var QC=(()=>{class t{constructor(n,r,i,s,o,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new tt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=n.events.subscribe(l=>{l instanceof wr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){n!=null?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.href=n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n)):null;let r=this.href===null?null:ub(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(n,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,n,r):i.removeAttribute(s,n)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||t)(oe(nn),oe(Ti),Gp("tabindex"),oe(pi),oe(yr),oe(Ps))}}static{this.\u0275dir=Ct({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&Be("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&vl("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[rt.HasDecoratorInputTransform,"preserveFragment","preserveFragment",vi],skipLocationChange:[rt.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",vi],replaceUrl:[rt.HasDecoratorInputTransform,"replaceUrl","replaceUrl",vi],routerLink:"routerLink"},standalone:!0,features:[cm,fi]})}}return t})();var RF=new K("");function YC(t,...e){return hn([{provide:ag,multi:!0,useValue:t},[],{provide:Ti,useFactory:NF,deps:[nn]},{provide:dm,multi:!0,useFactory:PF},e.map(n=>n.\u0275providers)])}function NF(t){return t.routerState.root}function PF(){let t=F(Bt);return e=>{let n=t.get(ma);if(e!==n.components[0])return;let r=t.get(nn),i=t.get(MF);t.get(OF)===1&&r.initialNavigation(),t.get(xF,null,se.Optional)?.setUpPreloading(),t.get(RF,null,se.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var MF=new K("",{factory:()=>new tt}),OF=new K("",{providedIn:"root",factory:()=>1});var xF=new K("");var iD=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(r){return new(r||t)(oe(pi),oe(yr))}}static{this.\u0275dir=Ct({type:t})}}return t})(),kF=(()=>{class t extends iD{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=fa(t)))(i||t)}})()}static{this.\u0275dir=Ct({type:t,features:[_r]})}}return t})(),sD=new K("");var LF={provide:sD,useExisting:Ns(()=>br),multi:!0};function FF(){let t=Vn()?Vn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var VF=new K(""),br=(()=>{class t extends iD{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!FF())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(r){return new(r||t)(oe(pi),oe(yr),oe(VF,8))}}static{this.\u0275dir=Ct({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Be("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Il([LF]),_r]})}}return t})();var oD=new K(""),aD=new K("");function cD(t){return t!=null}function uD(t){return gi(t)?Pe(t):t}function lD(t){let e={};return t.forEach(n=>{e=n!=null?O(O({},e),n):e}),Object.keys(e).length===0?null:e}function dD(t,e){return e.map(n=>n(t))}function UF(t){return!t.validate}function hD(t){return t.map(e=>UF(e)?e:n=>e.validate(n))}function jF(t){if(!t)return null;let e=t.filter(cD);return e.length==0?null:function(n){return lD(dD(n,e))}}function lg(t){return t!=null?jF(hD(t)):null}function BF(t){if(!t)return null;let e=t.filter(cD);return e.length==0?null:function(n){let r=dD(n,e).map(uD);return Pf(r).pipe(ie(lD))}}function dg(t){return t!=null?BF(hD(t)):null}function JC(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function $F(t){return t._rawValidators}function HF(t){return t._rawAsyncValidators}function ug(t){return t?Array.isArray(t)?t:[t]:[]}function ql(t,e){return Array.isArray(t)?t.includes(e):t===e}function ZC(t,e){let n=ug(e);return ug(t).forEach(i=>{ql(n,i)||n.push(i)}),n}function XC(t,e){return ug(e).filter(n=>!ql(t,n))}var zl=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=lg(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=dg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Bs=class extends zl{get formDirective(){return null}get path(){return null}},Ba=class extends zl{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Gl=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},qF={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},fK=fe(O({},qF),{"[class.ng-submitted]":"isSubmitted"}),$s=(()=>{class t extends Gl{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||t)(oe(Ba,2))}}static{this.\u0275dir=Ct({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&_l("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[_r]})}}return t})(),Hs=(()=>{class t extends Gl{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||t)(oe(Bs,10))}}static{this.\u0275dir=Ct({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&_l("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[_r]})}}return t})();var Va="VALID",Hl="INVALID",js="PENDING",Ua="DISABLED";function fD(t){return(Ql(t)?t.validators:t)||null}function zF(t){return Array.isArray(t)?lg(t):t||null}function pD(t,e){return(Ql(e)?e.asyncValidators:t)||null}function GF(t){return Array.isArray(t)?dg(t):t||null}function Ql(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function WF(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new B(1e3,"");if(!r[n])throw new B(1001,"")}function KF(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new B(1002,"")})}var Wl=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Va}get invalid(){return this.status===Hl}get pending(){return this.status==js}get disabled(){return this.status===Ua}get enabled(){return this.status!==Ua}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(ZC(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ZC(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(XC(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(XC(e,this._rawAsyncValidators))}hasValidator(e){return ql(this._rawValidators,e)}hasAsyncValidator(e){return ql(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=js,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ua,this.errors=null,this._forEachChild(r=>{r.disable(fe(O({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(fe(O({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Va,this._forEachChild(r=>{r.enable(fe(O({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(fe(O({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Va||this.status===js)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ua:Va}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=js,this._hasOwnPendingAsyncValidator=!0;let n=uD(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new nt,this.statusChanges=new nt}_calculateStatus(){return this._allControlsDisabled()?Ua:this.errors?Hl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(js)?js:this._anyControlsHaveStatus(Hl)?Hl:Va}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ql(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=zF(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=GF(this._rawAsyncValidators)}},Kl=class extends Wl{constructor(e,n,r){super(fD(n),pD(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){KF(this,!0,e),Object.keys(e).forEach(r=>{WF(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var hg=new K("CallSetDisabledState",{providedIn:"root",factory:()=>fg}),fg="always";function QF(t,e){return[...e.path,t]}function mD(t,e,n=fg){gD(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),JF(t,e),XF(t,e),ZF(t,e),YF(t,e)}function eD(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function YF(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function gD(t,e){let n=$F(t);e.validator!==null?t.setValidators(JC(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=HF(t);e.asyncValidator!==null?t.setAsyncValidators(JC(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();eD(e._rawValidators,i),eD(e._rawAsyncValidators,i)}function JF(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&yD(t,e)})}function ZF(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&yD(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function yD(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function XF(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function eV(t,e){t==null,gD(t,e)}function tV(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function nV(t){return Object.getPrototypeOf(t.constructor)===kF}function rV(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function iV(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===br?n=s:nV(s)?r=s:i=s}),i||r||n||null}var sV={provide:Bs,useExisting:Ns(()=>bi)},ja=Promise.resolve(),bi=(()=>{class t extends Bs{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new nt,this.form=new Kl({},lg(n),dg(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){ja.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),mD(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){ja.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){ja.then(()=>{let r=this._findContainer(n.path),i=new Kl({});eV(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){ja.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){ja.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,rV(this.form,this._directives),this.ngSubmit.emit(n),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static{this.\u0275fac=function(r){return new(r||t)(oe(oD,10),oe(aD,10),oe(hg,8))}}static{this.\u0275dir=Ct({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Be("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[rt.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Il([sV]),_r]})}}return t})();function tD(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function nD(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var oV=class extends Wl{constructor(e=null,n,r){super(fD(n),pD(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ql(n)&&(n.nonNullable||n.initialValueIsDefault)&&(nD(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){tD(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){tD(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){nD(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var aV={provide:Ba,useExisting:Ns(()=>Ci)},rD=Promise.resolve(),Ci=(()=>{class t extends Ba{constructor(n,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new oV,this._registered=!1,this.name="",this.update=new nt,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=iV(this,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),tV(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){mD(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){rD.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&vi(r);rD.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?QF(n,this._parent):[n]}static{this.\u0275fac=function(r){return new(r||t)(oe(Bs,9),oe(oD,10),oe(aD,10),oe(sD,10),oe(yi,8),oe(hg,8))}}static{this.\u0275dir=Ct({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[rt.None,"disabled","isDisabled"],model:[rt.None,"ngModel","model"],options:[rt.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Il([aV]),_r,fi]})}}return t})(),qs=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=Ct({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return t})();var cV=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=di({type:t})}static{this.\u0275inj=li({})}}return t})();var zs=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:hg,useValue:n.callSetDisabledState??fg}]}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=di({type:t})}static{this.\u0275inj=li({imports:[cV]})}}return t})();var Yl=(()=>{class t{Login(n,r,i){}Logout(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var _D=(()=>{class t{constructor(n,r){this.router=n,this.authService=r,this.email="",this.password=""}Login(){this.authService.Login(this.email,this.password,"dashboard"),this.router.navigateByUrl("home")}static{this.\u0275fac=function(r){return new(r||t)(oe(nn),oe(Yl))}}static{this.\u0275cmp=ot({type:t,selectors:[["app-login"]],standalone:!0,features:[at],decls:13,vars:2,consts:[[1,"text-center","m-5"],[1,"mb-3"],["for","exampleInputEmail1",1,"form-label"],["type","email","id","exampleInputEmail1","name","email","aria-describedby","emailHelp",1,"form-control",3,"ngModelChange","ngModel"],["for","exampleInputPassword1",1,"form-label"],["type","password","id","exampleInputPassword1","name","password",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"click"]],template:function(r,i){r&1&&(q(0,"h3",0),me(1,"Login"),z(),q(2,"form")(3,"div",1)(4,"label",2),me(5,"Email address"),z(),q(6,"input",3),wt("ngModelChange",function(o){return At(i.email,o)||(i.email=o),o}),z()(),q(7,"div",1)(8,"label",4),me(9,"Password"),z(),q(10,"input",5),wt("ngModelChange",function(o){return At(i.password,o)||(i.password=o),o}),z()(),q(11,"button",6),Be("click",function(){return i.Login()}),me(12,"Login"),z()()),r&2&&(St(6),It("ngModel",i.email),St(4),It("ngModel",i.password))},dependencies:[zs,qs,br,$s,Hs,Ci,bi]})}}return t})();var ID=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=ot({type:t,selectors:[["app-home"]],standalone:!0,features:[at],decls:4,vars:0,consts:[[1,"text-center","m-5"]],template:function(r,i){r&1&&(q(0,"h2",0),me(1,"Welcome Home"),z(),q(2,"h1",0),me(3,"Firebase Workshop \u{1F525}"),z())}})}}return t})();var wD=()=>{};var bD=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},uV=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},CD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,y=(a&15)<<2|l>>6,w=l&63;u||(w=64,o||(y=64)),r.push(n[h],n[p],n[y],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(bD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):uV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new gg;let y=s<<2|a>>4;if(r.push(y),l!==64){let w=a<<4&240|l>>2;if(r.push(w),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},gg=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},lV=function(t){let e=bD(t);return CD.encodeByteArray(e,!0)},vg=function(t){return lV(t).replace(/\./g,"")},Zl=function(t){try{return CD.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function dV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var hV=()=>dV().__FIREBASE_DEFAULTS__,fV=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},pV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Zl(t[1]);return e&&JSON.parse(e)},_g=()=>{try{return wD()||hV()||fV()||pV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},DD=t=>_g()?.emulatorHosts?.[t];var Ig=()=>_g()?.config,wg=t=>_g()?.[`_${t}`];var Jl=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Ha(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function SD(t){return m(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}var $a={};function mV(){let t={prod:[],emulator:[]};for(let e of Object.keys($a))$a[e]?t.emulator.push(e):t.prod.push(e);return t}function gV(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var ED=!1;function AD(t,e){if(typeof window>"u"||typeof document>"u"||!Ha(window.location.host)||$a[t]===e||$a[t]||ED)return;$a[t]=e;function n(y){return`__firebase__banner__${y}`}let r="__firebase__banner",s=mV().prod.length>0;function o(){let y=document.getElementById(r);y&&y.remove()}function a(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function u(y,w){y.setAttribute("width","24"),y.setAttribute("id",w),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function l(){let y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{ED=!0,o()},y}function h(y,w){y.setAttribute("id",w),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function p(){let y=gV(r),w=n("text"),S=document.getElementById(w)||document.createElement("span"),R=n("learnmore"),N=document.getElementById(R)||document.createElement("a"),k=n("preprendIcon"),j=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){let U=y.element;a(U),h(N,R);let ae=l();u(j,k),U.append(j,S,N,ae),document.body.appendChild(U)}s?(S.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function ct(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ct())}function ND(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PD(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function MD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OD(){let t=ct();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function xD(){try{return typeof indexedDB=="object"}catch{return!1}}function kD(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}var yV="FirebaseError",rn=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=yV,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Un.prototype.create)}},Un=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?vV(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new rn(i,a,r)}};function vV(t,e){return t.replace(_V,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var _V=/\{\$([^}]+)}/g;function LD(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Cr(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(TD(s)&&TD(o)){if(!Cr(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function TD(t){return t!==null&&typeof t=="object"}function qa(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Gs(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ws(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function FD(t,e){let n=new yg(t,e);return n.subscribe.bind(n)}var yg=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");IV(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=mg),i.error===void 0&&(i.error=mg),i.complete===void 0&&(i.complete=mg);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function IV(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function mg(){}var wK=4*60*60*1e3;function jn(t){return t&&t._delegate?t._delegate:t}var mn=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Di="[DEFAULT]";var Eg=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Jl;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){let n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(EV(e))try{this.getOrInitializeService({instanceIdentifier:Di})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Di){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return m(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Di){return this.instances.has(e)}getOptions(e=Di){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){let r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:wV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Di){return this.component?this.component.multipleInstances?e:Di:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function wV(t){return t===Di?void 0:t}function EV(t){return t.instantiationMode==="EAGER"}var Xl=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Eg(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var TV=[],De=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(De||{}),bV={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},CV=De.INFO,DV={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},SV=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=DV[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ks=class{constructor(e){this.name=e,this._logLevel=CV,this._logHandler=SV,this._userLogHandler=null,TV.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}};var AV=(t,e)=>e.some(n=>t instanceof n),VD,UD;function RV(){return VD||(VD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NV(){return UD||(UD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var jD=new WeakMap,bg=new WeakMap,BD=new WeakMap,Tg=new WeakMap,Dg=new WeakMap;function PV(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(gn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&jD.set(n,t)}).catch(()=>{}),Dg.set(e,t),e}function MV(t){if(bg.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});bg.set(t,e)}var Cg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return bg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||BD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $D(t){Cg=t(Cg)}function OV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(ed(this),e,...n);return BD.set(r,e.sort?e.sort():[e]),gn(r)}:NV().includes(t)?function(...e){return t.apply(ed(this),e),gn(jD.get(this))}:function(...e){return gn(t.apply(ed(this),e))}}function xV(t){return typeof t=="function"?OV(t):(t instanceof IDBTransaction&&MV(t),AV(t,RV())?new Proxy(t,Cg):t)}function gn(t){if(t instanceof IDBRequest)return PV(t);if(Tg.has(t))return Tg.get(t);let e=xV(t);return e!==t&&(Tg.set(t,e),Dg.set(e,t)),e}var ed=t=>Dg.get(t);function td(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=gn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(gn(o.result),u.oldVersion,u.newVersion,gn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var kV=["get","getKey","getAll","getAllKeys","count"],LV=["put","add","delete","clear"],Sg=new Map;function HD(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Sg.get(e))return Sg.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=LV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||kV.includes(n)))return;let s=function(o,...a){return m(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return Sg.set(e,s),s}$D(t=>fe(O({},t),{get:(e,n,r)=>HD(e,n)||t.get(e,n,r),has:(e,n)=>!!HD(e,n)||t.has(e,n)}));var Rg=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(FV(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function FV(t){return t.getComponent()?.type==="VERSION"}var Ng="@firebase/app",qD="0.14.2";var Bn=new Ks("@firebase/app"),VV="@firebase/app-compat",UV="@firebase/analytics-compat",jV="@firebase/analytics",BV="@firebase/app-check-compat",$V="@firebase/app-check",HV="@firebase/auth",qV="@firebase/auth-compat",zV="@firebase/database",GV="@firebase/data-connect",WV="@firebase/database-compat",KV="@firebase/functions",QV="@firebase/functions-compat",YV="@firebase/installations",JV="@firebase/installations-compat",ZV="@firebase/messaging",XV="@firebase/messaging-compat",eU="@firebase/performance",tU="@firebase/performance-compat",nU="@firebase/remote-config",rU="@firebase/remote-config-compat",iU="@firebase/storage",sU="@firebase/storage-compat",oU="@firebase/firestore",aU="@firebase/ai",cU="@firebase/firestore-compat",uU="firebase",lU="12.2.0";var Pg="[DEFAULT]",dU={[Ng]:"fire-core",[VV]:"fire-core-compat",[jV]:"fire-analytics",[UV]:"fire-analytics-compat",[$V]:"fire-app-check",[BV]:"fire-app-check-compat",[HV]:"fire-auth",[qV]:"fire-auth-compat",[zV]:"fire-rtdb",[GV]:"fire-data-connect",[WV]:"fire-rtdb-compat",[KV]:"fire-fn",[QV]:"fire-fn-compat",[YV]:"fire-iid",[JV]:"fire-iid-compat",[ZV]:"fire-fcm",[XV]:"fire-fcm-compat",[eU]:"fire-perf",[tU]:"fire-perf-compat",[nU]:"fire-rc",[rU]:"fire-rc-compat",[iU]:"fire-gcs",[sU]:"fire-gcs-compat",[oU]:"fire-fst",[cU]:"fire-fst-compat",[aU]:"fire-vertex","fire-js":"fire-js",[uU]:"fire-js-all"};var nd=new Map,hU=new Map,Mg=new Map;function zD(t,e){try{t.container.addComponent(e)}catch(n){Bn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ys(t){let e=t.name;if(Mg.has(e))return Bn.debug(`There were multiple attempts to register component ${e}.`),!1;Mg.set(e,t);for(let n of nd.values())zD(n,t);for(let n of hU.values())zD(n,t);return!0}function Lg(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function qt(t){return t==null?!1:t.settings!==void 0}var fU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Dr=new Un("app","Firebase",fU);var Og=class{constructor(e,n,r){this._isDeleted=!1,this._options=O({},e),this._config=O({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new mn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Dr.create("app-deleted",{appName:this._name})}};var Js=lU;function pU(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=O({name:Pg,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Dr.create("bad-app-name",{appName:String(i)});if(n||(n=Ig()),!n)throw Dr.create("no-options");let s=nd.get(i);if(s){if(Cr(n,s.options)&&Cr(r,s.config))return s;throw Dr.create("duplicate-app",{appName:i})}let o=new Xl(i);for(let u of Mg.values())o.addComponent(u);let a=new Og(n,r,o);return nd.set(i,a),a}function QD(t=Pg){let e=nd.get(t);if(!e&&t===Pg&&Ig())return pU();if(!e)throw Dr.create("no-app",{appName:t});return e}function Qs(t,e,n){let r=dU[t]??t;n&&(r+=`-${n}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bn.warn(o.join(" "));return}Ys(new mn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var mU="firebase-heartbeat-database",gU=1,za="firebase-heartbeat-store",Ag=null;function YD(){return Ag||(Ag=td(mU,gU,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(za)}catch(n){console.warn(n)}}}}).catch(t=>{throw Dr.create("idb-open",{originalErrorMessage:t.message})})),Ag}function yU(t){return m(this,null,function*(){try{let n=(yield YD()).transaction(za),r=yield n.objectStore(za).get(JD(t));return yield n.done,r}catch(e){if(e instanceof rn)Bn.warn(e.message);else{let n=Dr.create("idb-get",{originalErrorMessage:e?.message});Bn.warn(n.message)}}})}function GD(t,e){return m(this,null,function*(){try{let r=(yield YD()).transaction(za,"readwrite");yield r.objectStore(za).put(e,JD(t)),yield r.done}catch(n){if(n instanceof rn)Bn.warn(n.message);else{let r=Dr.create("idb-set",{originalErrorMessage:n?.message});Bn.warn(r.message)}}})}function JD(t){return`${t.name}!${t.options.appId}`}var vU=1024,_U=30,xg=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new kg(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return m(this,null,function*(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=WD();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>_U){let i=wU(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Bn.warn(e)}})}getHeartbeatsHeader(){return m(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=WD(),{heartbeatsToSend:n,unsentEntries:r}=IU(this._heartbeatsCache.heartbeats),i=vg(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Bn.warn(e),""}})}};function WD(){return new Date().toISOString().substring(0,10)}function IU(t,e=vU){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),KD(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),KD(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var kg=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(this,null,function*(){return xD()?kD().then(()=>!0).catch(()=>!1):!1})}read(){return m(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield yU(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return m(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return GD(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return m(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return GD(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function KD(t){return vg(JSON.stringify({version:2,heartbeats:t})).length}function wU(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function EU(t){Ys(new mn("platform-logger",e=>new Rg(e),"PRIVATE")),Ys(new mn("heartbeat",e=>new xg(e),"PRIVATE")),Qs(Ng,qD,t),Qs(Ng,qD,"esm2020"),Qs("fire-js","")}EU("");function fS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var pS=fS,mS=new Un("auth","Firebase",fS());var cd=new Ks("@firebase/auth");function TU(t,...e){cd.logLevel<=De.WARN&&cd.warn(`Auth (${Js}): ${t}`,...e)}function id(t,...e){cd.logLevel<=De.ERROR&&cd.error(`Auth (${Js}): ${t}`,...e)}function vn(t,...e){throw ay(t,...e)}function Si(t,...e){return ay(t,...e)}function gS(t,e,n){let r=fe(O({},pS()),{[e]:n});return new Un("auth","Firebase",r).create(e,{appName:t.name})}function qn(t){return gS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ay(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return mS.create(t,...e)}function G(t,e,...n){if(!t)throw ay(e,...n)}function $n(t){let e="INTERNAL ASSERTION FAILED: "+t;throw id(e),new Error(e)}function Rr(t,e){t||$n(e)}function jg(){return typeof self<"u"&&self.location?.href||""}function bU(){return ZD()==="http:"||ZD()==="https:"}function ZD(){return typeof self<"u"&&self.location?.protocol||null}function CU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bU()||PD()||"connection"in navigator)?navigator.onLine:!0}function DU(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Ai=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Rr(n>e,"Short delay should be less than long delay!"),this.isMobile=RD()||MD()}get(){return CU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function cy(t,e){Rr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var ud=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$n("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$n("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$n("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var SU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var AU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],RU=new Ai(3e4,6e4);function Nr(t,e){return t.tenantId&&!e.tenantId?fe(O({},e),{tenantId:t.tenantId}):e}function Pr(s,o,a,u){return m(this,arguments,function*(t,e,n,r,i={}){return yS(t,i,()=>m(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=qa(O({key:t.config.apiKey},h)).slice(1),y=yield t._getAdditionalHeaders();y["Content-Type"]="application/json",t.languageCode&&(y["X-Firebase-Locale"]=t.languageCode);let w=O({method:e,headers:y},l);return ND()||(w.referrerPolicy="no-referrer"),t.emulatorConfig&&Ha(t.emulatorConfig.host)&&(w.credentials="include"),ud.fetch()(yield vS(t,t.config.apiHost,n,p),w)}))})}function yS(t,e,n){return m(this,null,function*(){t._canInitEmulator=!1;let r=O(O({},SU),e);try{let i=new Bg(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw rd(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw rd(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw rd(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw rd(t,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw gS(t,h,l);vn(t,h)}}catch(i){if(i instanceof rn)throw i;vn(t,"network-request-failed",{message:String(i)})}})}function ec(s,o,a,u){return m(this,arguments,function*(t,e,n,r,i={}){let l=yield Pr(t,e,n,r,i);return"mfaPendingCredential"in l&&vn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function vS(t,e,n,r){return m(this,null,function*(){let i=`${e}${n}?${r}`,s=t,o=s.config.emulator?cy(t.config,i):`${t.config.apiScheme}://${i}`;return AU.includes(n)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}function NU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Bg=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Si(this.auth,"network-request-failed")),RU.get())})}};function rd(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Si(t,e,r);return i.customData._tokenResponse=n,i}function XD(t){return t!==void 0&&t.enterprise!==void 0}var $g=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return NU(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function PU(t,e){return m(this,null,function*(){return Pr(t,"GET","/v2/recaptchaConfig",Nr(t,e))})}function MU(t,e){return m(this,null,function*(){return Pr(t,"POST","/v1/accounts:delete",e)})}function ld(t,e){return m(this,null,function*(){return Pr(t,"POST","/v1/accounts:lookup",e)})}function Wa(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function _S(t,e=!1){return m(this,null,function*(){let n=jn(t),r=yield n.getIdToken(e),i=uy(r);G(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Wa(Fg(i.auth_time)),issuedAtTime:Wa(Fg(i.iat)),expirationTime:Wa(Fg(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Fg(t){return Number(t)*1e3}function uy(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return id("JWT malformed, contained fewer than 3 sections"),null;try{let i=Zl(n);return i?JSON.parse(i):(id("Failed to decode base64 JWT payload"),null)}catch(i){return id("Caught error parsing JWT payload as JSON",i?.toString()),null}}function eS(t){let e=uy(t);return G(e,"internal-error"),G(typeof e.exp<"u","internal-error"),G(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Qa(t,e,n=!1){return m(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof rn&&OU(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function OU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Hg=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>m(this,null,function*(){yield this.iteration()}),n)}iteration(){return m(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ya=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wa(this.lastLoginAt),this.creationTime=Wa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function dd(t){return m(this,null,function*(){let e=t.auth,n=yield t.getIdToken(),r=yield Qa(t,ld(e,{idToken:n}));G(r?.users.length,e,"internal-error");let i=r.users[0];t._notifyReloadListener(i);let s=i.providerUserInfo?.length?wS(i.providerUserInfo):[],o=xU(t.providerData,s),a=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!o?.length,l=a?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ya(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(t,h)})}function IS(t){return m(this,null,function*(){let e=jn(t);yield dd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function xU(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function wS(t){return t.map(r=>{var i=r,{providerId:e}=i,n=df(i,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function kU(t,e){return m(this,null,function*(){let n=yield yS(t,{},()=>m(this,null,function*(){let r=qa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=yield vS(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&Ha(t.emulatorConfig.host)&&(u.credentials="include"),ud.fetch()(o,u)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function LU(t,e){return m(this,null,function*(){return Pr(t,"POST","/v2/accounts:revokeToken",Nr(t,e))})}var Ka=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){G(e.idToken,"internal-error"),G(typeof e.idToken<"u","internal-error"),G(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){G(e.length!==0,"internal-error");let n=eS(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return m(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(G(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return m(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield kU(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(G(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(G(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(G(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return $n("not implemented")}};function Sr(t,e){G(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Ar=class t{constructor(s){var o=s,{uid:e,auth:n,stsTokenManager:r}=o,i=df(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Hg(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ya(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){return m(this,null,function*(){let n=yield Qa(this,this.stsTokenManager.getToken(this.auth,e));return G(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return _S(this,e)}reload(){return IS(this)}_assign(e){this!==e&&(G(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>O({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(fe(O({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return m(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield dd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return m(this,null,function*(){if(qt(this.auth.app))return Promise.reject(qn(this.auth));let e=yield this.getIdToken();return yield Qa(this,MU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return fe(O({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>O({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){let r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,u=n._redirectEventId??void 0,l=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:p,emailVerified:y,isAnonymous:w,providerData:S,stsTokenManager:R}=n;G(p&&R,e,"internal-error");let N=Ka.fromJSON(this.name,R);G(typeof p=="string",e,"internal-error"),Sr(r,e.name),Sr(i,e.name),G(typeof y=="boolean",e,"internal-error"),G(typeof w=="boolean",e,"internal-error"),Sr(s,e.name),Sr(o,e.name),Sr(a,e.name),Sr(u,e.name),Sr(l,e.name),Sr(h,e.name);let k=new t({uid:p,auth:e,email:i,emailVerified:y,displayName:r,isAnonymous:w,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:N,createdAt:l,lastLoginAt:h});return S&&Array.isArray(S)&&(k.providerData=S.map(j=>O({},j))),u&&(k._redirectEventId=u),k}static _fromIdTokenResponse(e,n,r=!1){return m(this,null,function*(){let i=new Ka;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield dd(s),s})}static _fromGetAccountInfoResponse(e,n,r){return m(this,null,function*(){let i=n.users[0];G(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?wS(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Ka;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ya(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var tS=new Map;function Hn(t){Rr(t instanceof Function,"Expected a class definition");let e=tS.get(t);return e?(Rr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,tS.set(t,e),e)}var FU=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(this,null,function*(){return!0})}_set(n,r){return m(this,null,function*(){this.storage[n]=r})}_get(n){return m(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return m(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),qg=FU;function sd(t,e,n){return`firebase:${t}:${e}:${n}`}var hd=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=sd(this.userKey,i.apiKey,s),this.fullPersistenceKey=sd("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return m(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield ld(this.auth,{idToken:e}).catch(()=>{});return n?Ar._fromGetAccountInfoResponse(this.auth,n,e):null}return Ar._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return m(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return m(this,null,function*(){if(!n.length)return new t(Hn(qg),e,r);let i=(yield Promise.all(n.map(l=>m(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Hn(qg),o=sd(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(o);if(h){let p;if(typeof h=="string"){let y=yield ld(e,{idToken:h}).catch(()=>{});if(!y)break;p=yield Ar._fromGetAccountInfoResponse(e,y,h)}else p=Ar._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>m(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function nS(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(CS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ES(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(SS(e))return"Blackberry";if(AS(e))return"Webos";if(TS(e))return"Safari";if((e.includes("chrome/")||bS(e))&&!e.includes("edge/"))return"Chrome";if(DS(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function ES(t=ct()){return/firefox\//i.test(t)}function TS(t=ct()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bS(t=ct()){return/crios\//i.test(t)}function CS(t=ct()){return/iemobile/i.test(t)}function DS(t=ct()){return/android/i.test(t)}function SS(t=ct()){return/blackberry/i.test(t)}function AS(t=ct()){return/webos/i.test(t)}function ly(t=ct()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function VU(t=ct()){return ly(t)&&!!window.navigator?.standalone}function UU(){return OD()&&document.documentMode===10}function RS(t=ct()){return ly(t)||DS(t)||AS(t)||SS(t)||/windows phone/i.test(t)||CS(t)}function NS(t,e=[]){let n;switch(t){case"Browser":n=nS(ct());break;case"Worker":n=`${nS(ct())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Js}/${r}`}var zg=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return m(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function jU(n){return m(this,arguments,function*(t,e={}){return Pr(t,"GET","/v2/passwordPolicy",Nr(t,e))})}var BU=6,Gg=class{constructor(e){let n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??BU,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Wg=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fd(this),this.idTokenSubscription=new fd(this),this.beforeStateQueue=new zg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Hn(n)),this._initializationPromise=this.queue(()=>m(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield hd.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return m(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return m(this,null,function*(){try{let n=yield ld(this,{idToken:e}),r=yield Ar._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return m(this,null,function*(){if(qt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let n=yield this.assertedPersistence.getCurrentUser(),r=n,i=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=yield this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return G(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return m(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return m(this,null,function*(){try{yield dd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=DU()}_delete(){return m(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return m(this,null,function*(){if(qt(this.app))return Promise.reject(qn(this));let n=e?jn(e):null;return n&&G(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return m(this,null,function*(){if(!this._deleted)return e&&G(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>m(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return m(this,null,function*(){return qt(this.app)?Promise.reject(qn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return qt(this.app)?Promise.reject(qn(this)):this.queue(()=>m(this,null,function*(){yield this.assertedPersistence.setPersistence(Hn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return m(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return m(this,null,function*(){let e=yield jU(this),n=new Gg(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Un("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return m(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield LU(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(e,n){return m(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return m(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Hn(e)||this._popupRedirectResolver;G(n,this,"argument-error"),this.redirectPersistenceManager=yield hd.create(this,[Hn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return m(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>m(this,null,function*(){}))),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null})}_persistUserIfCurrent(e){return m(this,null,function*(){if(e===this.currentUser)return this.queue(()=>m(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(G(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return m(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=NS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return m(this,null,function*(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let n=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return m(this,null,function*(){if(qt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&TU(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function Ni(t){return jn(t)}var fd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=FD(n=>this.observer=n)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Id={loadJS(){return m(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $U(t){Id=t}function PS(t){return Id.loadJS(t)}function HU(){return Id.recaptchaEnterpriseScript}function qU(){return Id.gapiScript}function MS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var Kg=class{constructor(){this.enterprise=new Qg}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},Qg=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var zU="recaptcha-enterprise",OS="NO_RECAPTCHA",Yg=class{constructor(e){this.type=zU,this.auth=Ni(e)}verify(e="verify",n=!1){return m(this,null,function*(){function r(s){return m(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>m(this,null,function*(){PU(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new $g(u);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(s,o,a){let u=window.grecaptcha;XD(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(OS)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Kg().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&XD(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=HU();u.length!==0&&(u+=a),PS(u).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function Ga(t,e,n,r=!1,i=!1){return m(this,null,function*(){let s=new Yg(t),o;if(i)o=OS;else try{o=yield s.verify(n)}catch{o=yield s.verify(n,!0)}let a=O({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function Jg(t,e,n,r,i){return m(this,null,function*(){if(i==="EMAIL_PASSWORD_PROVIDER")if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield Ga(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>m(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield Ga(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}));else if(i==="PHONE_PROVIDER")if(t._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){let s=yield Ga(t,e,n);return r(t,s).catch(o=>m(this,null,function*(){if(t._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(o.code==="auth/missing-recaptcha-token"||o.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let a=yield Ga(t,e,n,!1,!0);return r(t,a)}return Promise.reject(o)}))}else{let s=yield Ga(t,e,n,!1,!0);return r(t,s)}else return Promise.reject(i+" provider is not supported.")})}function xS(t,e){let n=Lg(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Cr(s,e??{}))return i;vn(i,"already-initialized")}return n.initialize({options:e})}function GU(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Hn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function kS(t,e,n){let r=Ni(t);G(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=LS(e),{host:o,port:a}=WU(e),u=a===null?"":`:${a}`,l={url:`${s}//${o}${u}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){G(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),G(Cr(l,r.config.emulator)&&Cr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Ha(o)?(SD(`${s}//${o}${u}`),AD("Auth",!0)):i||KU()}function LS(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function WU(t){let e=LS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:rS(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:rS(o)}}}function rS(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function KU(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Ja=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return $n("not implemented")}_getIdTokenResponse(e){return $n("not implemented")}_linkToIdToken(e,n){return $n("not implemented")}_getReauthenticationResolver(e){return $n("not implemented")}};function QU(t,e){return m(this,null,function*(){return Pr(t,"POST","/v1/accounts:signUp",e)})}function YU(t,e){return m(this,null,function*(){return ec(t,"POST","/v1/accounts:signInWithPassword",Nr(t,e))})}function JU(t,e){return m(this,null,function*(){return ec(t,"POST","/v1/accounts:signInWithEmailLink",Nr(t,e))})}function ZU(t,e){return m(this,null,function*(){return ec(t,"POST","/v1/accounts:signInWithEmailLink",Nr(t,e))})}var Za=class t extends Ja{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return m(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jg(e,n,"signInWithPassword",YU,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return JU(e,{email:this._email,oobCode:this._password});default:vn(e,"internal-error")}})}_linkToIdToken(e,n){return m(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jg(e,r,"signUpPassword",QU,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return ZU(e,{idToken:n,email:this._email,oobCode:this._password});default:vn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Vg(t,e){return m(this,null,function*(){return ec(t,"POST","/v1/accounts:signInWithIdp",Nr(t,e))})}function XU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ej(t){let e=Gs(Ws(t)).link,n=e?Gs(Ws(e)).deep_link_id:null,r=Gs(Ws(t)).deep_link_id;return(r?Gs(Ws(r)).link:null)||r||n||e||t}var pd=class t{constructor(e){let n=Gs(Ws(e)),r=n.apiKey??null,i=n.oobCode??null,s=XU(n.mode??null);G(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){let n=ej(e);try{return new t(n)}catch{return null}}};var FS=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Za._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=pd.parseLink(r);return G(i,"argument-error"),Za._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),md=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Zg=class extends md{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function tj(t,e){return m(this,null,function*(){return ec(t,"POST","/v1/accounts:signUp",Nr(t,e))})}var Zs=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return m(this,null,function*(){let s=yield Ar._fromIdTokenResponse(e,r,i),o=iS(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return m(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=iS(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function iS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Xg=class t extends rn{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function VS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Xg._fromErrorAndOperation(t,s,e,r):s})}function nj(t,e,n=!1){return m(this,null,function*(){let r=yield Qa(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Zs._forOperation(t,"link",r)})}function rj(t,e,n=!1){return m(this,null,function*(){let{auth:r}=t;if(qt(r.app))return Promise.reject(qn(r));let i="reauthenticate";try{let s=yield Qa(t,VS(r,i,e,t),n);G(s.idToken,r,"internal-error");let o=uy(s.idToken);G(o,r,"internal-error");let{sub:a}=o;return G(t.uid===a,r,"user-mismatch"),Zs._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&vn(r,"user-mismatch"),s}})}function US(t,e,n=!1){return m(this,null,function*(){if(qt(t.app))return Promise.reject(qn(t));let r="signIn",i=yield VS(t,r,e),s=yield Zs._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function jS(t,e){return m(this,null,function*(){return US(Ni(t),e)})}function BS(t){return m(this,null,function*(){let e=Ni(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function dy(t,e,n){return m(this,null,function*(){if(qt(t.app))return Promise.reject(qn(t));let r=Ni(t),o=yield Jg(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tj,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&BS(t),u}),a=yield Zs._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function hy(t,e,n){return qt(t.app)?Promise.reject(qn(t)):jS(jn(t),FS.credential(e,n)).catch(r=>m(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&BS(t),r}))}function $S(t,e,n,r){return jn(t).onIdTokenChanged(e,n,r)}function HS(t,e,n){return jn(t).beforeAuthStateChanged(e,n)}function fy(t){return jn(t).signOut()}var gd="__sak";var yd=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(gd,"1"),this.storage.removeItem(gd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var ij=1e3,sj=10,oj=(()=>{class t extends yd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=RS(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);UU()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,sj):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},ij)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return m(this,null,function*(){yield pt(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return m(this,null,function*(){let r=yield pt(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return m(this,null,function*(){yield pt(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),qS=oj;var aj=(()=>{class t extends yd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),py=aj;function cj(t){return Promise.all(t.map(e=>m(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var uj=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return m(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(a).map(h=>m(this,null,function*(){return h(r.origin,o)})),l=yield cj(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function zS(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var ey=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return m(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{let l=zS("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let y=p;if(y.data.eventId===l)switch(y.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(y.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function yn(){return window}function lj(t){yn().location.href=t}function GS(){return typeof yn().WorkerGlobalScope<"u"&&typeof yn().importScripts=="function"}function dj(){return m(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function hj(){return navigator?.serviceWorker?.controller||null}function fj(){return GS()?self:null}var WS="firebaseLocalStorageDb",pj=1,vd="firebaseLocalStorage",KS="fbase_key",Ri=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function wd(t,e){return t.transaction([vd],e?"readwrite":"readonly").objectStore(vd)}function mj(){let t=indexedDB.deleteDatabase(WS);return new Ri(t).toPromise()}function ty(){let t=indexedDB.open(WS,pj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(vd,{keyPath:KS})}catch(i){n(i)}}),t.addEventListener("success",()=>m(this,null,function*(){let r=t.result;r.objectStoreNames.contains(vd)?e(r):(r.close(),yield mj(),e(yield ty()))}))})}function sS(t,e,n){return m(this,null,function*(){let r=wd(t,!0).put({[KS]:e,value:n});return new Ri(r).toPromise()})}function gj(t,e){return m(this,null,function*(){let n=wd(t,!1).get(e),r=yield new Ri(n).toPromise();return r===void 0?null:r.value})}function oS(t,e){let n=wd(t,!0).delete(e);return new Ri(n).toPromise()}var yj=800,vj=3,_j=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return m(this,null,function*(){return this.db?this.db:(this.db=yield ty(),this.db)})}_withRetries(n){return m(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>vj)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return m(this,null,function*(){return GS()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return m(this,null,function*(){this.receiver=uj._getInstance(fj()),this.receiver._subscribe("keyChanged",(n,r)=>m(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>m(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return m(this,null,function*(){if(this.activeServiceWorker=yield dj(),!this.activeServiceWorker)return;this.sender=new ey(this.activeServiceWorker);let n=yield this.sender._send("ping",{},800);n&&n[0]?.fulfilled&&n[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return m(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||hj()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return m(this,null,function*(){try{if(!indexedDB)return!1;let n=yield ty();return yield sS(n,gd,"1"),yield oS(n,gd),!0}catch{}return!1})}_withPendingWrite(n){return m(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return m(this,null,function*(){return this._withPendingWrite(()=>m(this,null,function*(){return yield this._withRetries(i=>sS(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return m(this,null,function*(){let r=yield this._withRetries(i=>gj(i,n));return this.localCache[n]=r,r})}_remove(n){return m(this,null,function*(){return this._withPendingWrite(()=>m(this,null,function*(){return yield this._withRetries(r=>oS(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return m(this,null,function*(){let n=yield this._withRetries(s=>{let o=wd(s,!1).getAll();return new Ri(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>m(this,null,function*(){return this._poll()}),yj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),QS=_j;var KK=MS("rcb"),QK=new Ai(3e4,6e4);function Ij(t,e){return e?Hn(e):(G(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Xa=class extends Ja{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vg(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Vg(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Vg(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function wj(t){return US(t.auth,new Xa(t),t.bypassAuthState)}function Ej(t){let{auth:e,user:n}=t;return G(n,e,"internal-error"),rj(n,new Xa(t),t.bypassAuthState)}function Tj(t){return m(this,null,function*(){let{auth:e,user:n}=t;return G(n,e,"internal-error"),nj(n,new Xa(t),t.bypassAuthState)})}var ny=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>m(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return m(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wj;case"linkViaPopup":case"linkViaRedirect":return Tj;case"reauthViaPopup":case"reauthViaRedirect":return Ej;default:vn(this.auth,"internal-error")}}resolve(e){Rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var YK=new Ai(2e3,1e4);var bj="pendingRedirect",od=new Map,ry=class t extends ny{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return m(this,null,function*(){let e=od.get(this.auth._key());if(!e){try{let r=(yield Cj(this.resolver,this.auth))?yield pt(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}od.set(this.auth._key(),e)}return this.bypassAuthState||od.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return m(this,null,function*(){if(e.type==="signInViaRedirect")return pt(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,pt(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return m(this,null,function*(){})}cleanUp(){}};function Cj(t,e){return m(this,null,function*(){let n=Aj(e),r=Sj(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function Dj(t,e){od.set(t._key(),e)}function Sj(t){return Hn(t._redirectPersistence)}function Aj(t){return sd(bj,t.config.apiKey,t.name)}function Rj(t,e,n=!1){return m(this,null,function*(){if(qt(t.app))return Promise.reject(qn(t));let r=Ni(t),i=Ij(r,e),o=yield new ry(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var Nj=10*60*1e3,iy=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Pj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!YS(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Si(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Nj&&this.cachedEventUids.clear(),this.cachedEventUids.has(aS(e))}saveEventToCache(e){this.cachedEventUids.add(aS(e)),this.lastProcessedEventTime=Date.now()}};function aS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function YS({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Pj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YS(t);default:return!1}}function Mj(n){return m(this,arguments,function*(t,e={}){return Pr(t,"GET","/v1/projects",e)})}var Oj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xj=/^https?/;function kj(t){return m(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield Mj(t);for(let n of e)try{if(Lj(n))return}catch{}vn(t,"unauthorized-domain")})}function Lj(t){let e=jg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!xj.test(n))return!1;if(Oj.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Fj=new Ai(3e4,6e4);function cS(){let t=yn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Vj(t){return new Promise((e,n)=>{function r(){cS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cS(),n(Si(t,"network-request-failed"))},timeout:Fj.get()})}if(yn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(yn().gapi?.load)r();else{let i=MS("iframefcb");return yn()[i]=()=>{gapi.load?r():n(Si(t,"network-request-failed"))},PS(`${qU()}?onload=${i}`).catch(s=>n(s))}}).catch(e=>{throw ad=null,e})}var ad=null;function Uj(t){return ad=ad||Vj(t),ad}var jj=new Ai(5e3,15e3),Bj="__/auth/iframe",$j="emulator/auth/iframe",Hj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zj(t){let e=t.config;G(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?cy(e,$j):`https://${t.config.authDomain}/${Bj}`,r={apiKey:e.apiKey,appName:t.name,v:Js},i=qj.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${qa(r).slice(1)}`}function Gj(t){return m(this,null,function*(){let e=yield Uj(t),n=yn().gapi;return G(n,t,"internal-error"),e.open({where:document.body,url:zj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Hj,dontclear:!0},r=>new Promise((i,s)=>m(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Si(t,"network-request-failed"),a=yn().setTimeout(()=>{s(o)},jj.get());function u(){yn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var Wj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Kj=500,Qj=600,Yj="_blank",Jj="http://localhost",_d=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Zj(t,e,n,r=Kj,i=Qj){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=fe(O({},Wj),{width:r.toString(),height:i.toString(),top:s,left:o}),l=ct().toLowerCase();n&&(a=bS(l)?Yj:n),ES(l)&&(e=e||Jj,u.scrollbars="yes");let h=Object.entries(u).reduce((y,[w,S])=>`${y}${w}=${S},`,"");if(VU(l)&&a!=="_self")return Xj(e||"",a),new _d(null);let p=window.open(e||"",a,h);G(p,t,"popup-blocked");try{p.focus()}catch{}return new _d(p)}function Xj(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var e2="__/auth/handler",t2="emulator/auth/handler",n2=encodeURIComponent("fac");function uS(t,e,n,r,i,s){return m(this,null,function*(){G(t.config.authDomain,t,"auth-domain-config-required"),G(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Js,eventId:i};if(e instanceof md){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",LD(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof Zg){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${n2}=${encodeURIComponent(u)}`:"";return`${r2(t)}?${qa(a).slice(1)}${l}`})}function r2({config:t}){return t.emulator?cy(t,t2):`https://${t.authDomain}/${e2}`}var Ug="webStorageSupport",sy=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=py,this._completeRedirectFn=Rj,this._overrideRedirectResult=Dj}_openPopup(e,n,r,i){return m(this,null,function*(){Rr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let s=yield uS(e,n,r,jg(),i);return Zj(e,s,zS())})}_openRedirect(e,n,r,i){return m(this,null,function*(){yield this._originValidation(e);let s=yield uS(e,n,r,jg(),i);return lj(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Rr(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return m(this,null,function*(){let n=yield Gj(e),r=new iy(e);return n.register("authEvent",i=>(G(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ug,{type:Ug},i=>{let s=i?.[0]?.[Ug];s!==void 0&&n(!!s),vn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=kj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return RS()||TS()||ly()}},JS=sy;var lS="@firebase/auth",dS="1.11.0";var oy=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(e){return m(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function i2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function s2(t){Ys(new mn("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;G(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:NS(t)},l=new Wg(r,i,s,u);return GU(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ys(new mn("auth-internal",e=>{let n=Ni(e.getProvider("auth").getImmediate());return(r=>new oy(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qs(lS,dS,i2(t)),Qs(lS,dS,"esm2020")}var o2=5*60,a2=wg("authIdTokenMaxAge")||o2,hS=null,c2=t=>e=>m(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>a2)return;let i=n?.token;hS!==i&&(hS=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function tc(t=QD()){let e=Lg(t,"auth");if(e.isInitialized())return e.getImmediate();let n=xS(t,{popupRedirectResolver:JS,persistence:[QS,qS,py]}),r=wg("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=c2(s.toString());HS(n,o,()=>o(n.currentUser)),$S(n,a=>o(a))}}let i=DD("auth");return i&&kS(n,`http://${i}`),n}function u2(){return document.getElementsByTagName("head")?.[0]??document}$U({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Si("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",u2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});s2("Browser");var ZS=(()=>{class t{constructor(n){this.router=n}Login(n,r,i){let s=tc();return hy(s,n,r).then(o=>{let a=o.user}).catch(o=>{let a=o.code,u=o.message})}Logout(n){let r=tc();return fy(r).then(()=>{this.router.navigateByUrl(n),console.log("User logged out:"),alert("User logged out")}).catch(i=>{console.error("Login error:",i.code,i.message),i.code==="auth/invalid-credential"&&alert("Invalid email or password.")})}Register(n,r,i){let s=tc();return dy(s,n,r).then(o=>{let a=o.user}).catch(o=>{let a=o.code,u=o.message})}static{this.\u0275fac=function(r){return new(r||t)(re(nn))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var XS=(()=>{class t{constructor(n,r){this.router=n,this.authService=r,this.emailR="",this.passwordR=""}Login(){this.authService.Register(this.emailR,this.passwordR,"dashboard"),this.router.navigateByUrl("login")}static{this.\u0275fac=function(r){return new(r||t)(oe(nn),oe(ZS))}}static{this.\u0275cmp=ot({type:t,selectors:[["app-register"]],standalone:!0,features:[at],decls:13,vars:2,consts:[[1,"text-center","m-5"],[1,"mb-3"],["for","exampleInputEmail1",1,"form-label"],["type","email","id","exampleInputEmail1","name","email","aria-describedby","emailHelp",1,"form-control",3,"ngModelChange","ngModel"],["for","exampleInputPassword1",1,"form-label"],["type","password","id","exampleInputPassword1","name","password",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"click"]],template:function(r,i){r&1&&(q(0,"h3",0),me(1,"Register"),z(),q(2,"form")(3,"div",1)(4,"label",2),me(5,"Email address"),z(),q(6,"input",3),wt("ngModelChange",function(o){return At(i.emailR,o)||(i.emailR=o),o}),z()(),q(7,"div",1)(8,"label",4),me(9,"Password"),z(),q(10,"input",5),wt("ngModelChange",function(o){return At(i.passwordR,o)||(i.passwordR=o),o}),z()(),q(11,"button",6),Be("click",function(){return i.Login()}),me(12,"Register"),z()()),r&2&&(St(6),It("ngModel",i.emailR),St(4),It("ngModel",i.passwordR))},dependencies:[zs,qs,br,$s,Hs,Ci,bi]})}}return t})();var Ed=class{constructor(e,n){this.name=e,this.content=n}},Td=class{constructor(e,n,r){this.name=e,this.content=n,this.id=r}};var tA=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},d2=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},nA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,y=(a&15)<<2|l>>6,w=l&63;u||(w=64,o||(y=64)),r.push(n[h],n[p],n[y],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(tA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):d2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new gy;let y=s<<2|a>>4;if(r.push(y),l!==64){let w=a<<4&240|l>>2;if(r.push(w),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},gy=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},h2=function(t){let e=tA(t);return nA.encodeByteArray(e,!0)},nc=function(t){return h2(t).replace(/\./g,"")},vy=function(t){try{return nA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function f2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var p2=()=>f2().__FIREBASE_DEFAULTS__,m2=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},g2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&vy(t[1]);return e&&JSON.parse(e)},Cd=()=>{try{return p2()||m2()||g2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_y=t=>{var e,n;return(n=(e=Cd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},rA=t=>{let e=_y(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Iy=()=>{var t;return(t=Cd())===null||t===void 0?void 0:t.config},wy=t=>{var e;return(e=Cd())===null||e===void 0?void 0:e[`_${t}`]};var bd=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function iA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[nc(JSON.stringify(n)),nc(JSON.stringify(o)),""].join(".")}function qe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function y2(){var t;let e=(t=Cd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aA(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uA(){let t=qe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lA(){return!y2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ey(){try{return typeof indexedDB=="object"}catch{return!1}}function dA(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var v2="FirebaseError",Pt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=v2,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zn.prototype.create)}},zn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?_2(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Pt(i,a,r)}};function _2(t,e){return t.replace(I2,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var I2=/\{\$([^}]+)}/g;function hA(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Pi(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(eA(s)&&eA(o)){if(!Pi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function eA(t){return t!==null&&typeof t=="object"}function rc(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function fA(t,e){let n=new yy(t,e);return n.subscribe.bind(n)}var yy=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");w2(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=my),i.error===void 0&&(i.error=my),i.complete===void 0&&(i.complete=my);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function w2(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function my(){}var wQ=4*60*60*1e3;function Qe(t){return t&&t._delegate?t._delegate:t}var zt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Mi="[DEFAULT]";var Ty=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new bd;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(T2(e))try{this.getOrInitializeService({instanceIdentifier:Mi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Mi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return m(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Mi){return this.instances.has(e)}getOptions(e=Mi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:E2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Mi){return this.component?this.component.multipleInstances?e:Mi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function E2(t){return t===Mi?void 0:t}function T2(t){return t.instantiationMode==="EAGER"}var Dd=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Ty(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var b2=[],le=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(le||{}),C2={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},D2=le.INFO,S2={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},A2=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=S2[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Mr=class{constructor(e){this.name=e,this._logLevel=D2,this._logHandler=A2,this._userLogHandler=null,b2.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?C2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}};var Cy=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(R2(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function R2(t){let e=t.getComponent();return e?.type==="VERSION"}var Dy="@firebase/app",pA="0.10.13";var Gn=new Mr("@firebase/app"),N2="@firebase/app-compat",P2="@firebase/analytics-compat",M2="@firebase/analytics",O2="@firebase/app-check-compat",x2="@firebase/app-check",k2="@firebase/auth",L2="@firebase/auth-compat",F2="@firebase/database",V2="@firebase/data-connect",U2="@firebase/database-compat",j2="@firebase/functions",B2="@firebase/functions-compat",$2="@firebase/installations",H2="@firebase/installations-compat",q2="@firebase/messaging",z2="@firebase/messaging-compat",G2="@firebase/performance",W2="@firebase/performance-compat",K2="@firebase/remote-config",Q2="@firebase/remote-config-compat",Y2="@firebase/storage",J2="@firebase/storage-compat",Z2="@firebase/firestore",X2="@firebase/vertexai-preview",eB="@firebase/firestore-compat",tB="firebase",nB="10.14.1";var Sy="[DEFAULT]",rB={[Dy]:"fire-core",[N2]:"fire-core-compat",[M2]:"fire-analytics",[P2]:"fire-analytics-compat",[x2]:"fire-app-check",[O2]:"fire-app-check-compat",[k2]:"fire-auth",[L2]:"fire-auth-compat",[F2]:"fire-rtdb",[V2]:"fire-data-connect",[U2]:"fire-rtdb-compat",[j2]:"fire-fn",[B2]:"fire-fn-compat",[$2]:"fire-iid",[H2]:"fire-iid-compat",[q2]:"fire-fcm",[z2]:"fire-fcm-compat",[G2]:"fire-perf",[W2]:"fire-perf-compat",[K2]:"fire-rc",[Q2]:"fire-rc-compat",[Y2]:"fire-gcs",[J2]:"fire-gcs-compat",[Z2]:"fire-fst",[eB]:"fire-fst-compat",[X2]:"fire-vertex","fire-js":"fire-js",[tB]:"fire-js-all"};var ic=new Map,iB=new Map,Ay=new Map;function mA(t,e){try{t.container.addComponent(e)}catch(n){Gn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xr(t){let e=t.name;if(Ay.has(e))return Gn.debug(`There were multiple attempts to register component ${e}.`),!1;Ay.set(e,t);for(let n of ic.values())mA(n,t);for(let n of iB.values())mA(n,t);return!0}function oc(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Wn(t){return t.settings!==void 0}var sB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Or=new zn("app","Firebase",sB);var Ry=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Or.create("app-deleted",{appName:this._name})}};var kr=nB;function My(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Sy,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Or.create("bad-app-name",{appName:String(i)});if(n||(n=Iy()),!n)throw Or.create("no-options");let s=ic.get(i);if(s){if(Pi(n,s.options)&&Pi(r,s.config))return s;throw Or.create("duplicate-app",{appName:i})}let o=new Dd(i);for(let u of Ay.values())o.addComponent(u);let a=new Ry(n,r,o);return ic.set(i,a),a}function Xs(t=Sy){let e=ic.get(t);if(!e&&t===Sy&&Iy())return My();if(!e)throw Or.create("no-app",{appName:t});return e}function Sd(){return Array.from(ic.values())}function $e(t,e,n){var r;let i=(r=rB[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gn.warn(a.join(" "));return}xr(new zt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var oB="firebase-heartbeat-database",aB=1,sc="firebase-heartbeat-store",by=null;function _A(){return by||(by=td(oB,aB,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(sc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Or.create("idb-open",{originalErrorMessage:t.message})})),by}function cB(t){return m(this,null,function*(){try{let n=(yield _A()).transaction(sc),r=yield n.objectStore(sc).get(IA(t));return yield n.done,r}catch(e){if(e instanceof Pt)Gn.warn(e.message);else{let n=Or.create("idb-get",{originalErrorMessage:e?.message});Gn.warn(n.message)}}})}function gA(t,e){return m(this,null,function*(){try{let r=(yield _A()).transaction(sc,"readwrite");yield r.objectStore(sc).put(e,IA(t)),yield r.done}catch(n){if(n instanceof Pt)Gn.warn(n.message);else{let r=Or.create("idb-set",{originalErrorMessage:n?.message});Gn.warn(r.message)}}})}function IA(t){return`${t.name}!${t.options.appId}`}var uB=1024,lB=30*24*60*60*1e3,Ny=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Py(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return m(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=yA();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=lB}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Gn.warn(r)}})}getHeartbeatsHeader(){return m(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=yA(),{heartbeatsToSend:r,unsentEntries:i}=dB(this._heartbeatsCache.heartbeats),s=nc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Gn.warn(n),""}})}};function yA(){return new Date().toISOString().substring(0,10)}function dB(t,e=uB){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),vA(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),vA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Py=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(this,null,function*(){return Ey()?dA().then(()=>!0).catch(()=>!1):!1})}read(){return m(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield cB(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return m(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return gA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return m(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return gA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function vA(t){return nc(JSON.stringify({version:2,heartbeats:t})).length}function hB(t){xr(new zt("platform-logger",e=>new Cy(e),"PRIVATE")),xr(new zt("heartbeat",e=>new Ny(e),"PRIVATE")),$e(Dy,pA,t),$e(Dy,pA,"esm2017"),$e("fire-js","")}hB("");var fB="firebase",pB="10.14.1";$e(fB,pB,"app");var xi=new kn("ANGULARFIRE2_VERSION");function Rd(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var ac=(t,e)=>{let n=e?[e]:Sd(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},to=class{constructor(){return ac(mB)}},mB="app-check";function eo(){}var Ad=class{zone;delegate;constructor(e,n=Sf){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Oy=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",eo,{},eo,eo)),n.pipe(je({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},no=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Ad(Zone.current)),this.insideAngular=n.run(()=>new Ad(Zone.current,Df)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(re(Te))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Nd(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function gB(t){return Nd().ngZone.runOutsideAngular(()=>t())}function Oi(t){return Nd().ngZone.run(()=>t())}function yB(t){return vB(Nd())(t)}function vB(t){return function(n){return n=n.lift(new Oy(t.ngZone)),n.pipe(ur(t.outsideAngular),cr(t.insideAngular))}}var _B=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Oi(()=>t.apply(void 0,r))},Gt=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Oi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",eo,{},eo,eo))),r[s]=_B(r[s],n));let i=gB(()=>t.apply(this,r));if(!e)if(i instanceof ce){let s=Nd();return i.pipe(ur(s.outsideAngular),cr(s.insideAngular))}else return Oi(()=>i);return i instanceof ce?i.pipe(yB):i instanceof Promise?Oi(()=>new Promise((s,o)=>i.then(a=>Oi(()=>s(a)),a=>Oi(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Oi(()=>i)};var Kn=class{constructor(e){return e}},ki=class{constructor(){return Sd()}};function IB(t){return t&&t.length===1?t[0]:new Kn(Xs())}var xy=new K("angularfire2._apps"),wB={provide:Kn,useFactory:IB,deps:[[new _t,xy]]},EB={provide:ki,deps:[[new _t,xy]]};function TB(t){return(e,n)=>{let r=n.get(vr);$e("angularfire",xi.full,"core"),$e("angularfire",xi.full,"app"),$e("angular",zb.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Kn(i)}}function wA(t,...e){return hn([wB,EB,{provide:xy,useFactory:TB(t),multi:!0,deps:[Te,Bt,no,...e]}])}var EA=Gt(My,!0);function FA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var VA=FA,UA=new zn("auth","Firebase",FA());var Ld=new Mr("@firebase/auth");function bB(t,...e){Ld.logLevel<=le.WARN&&Ld.warn(`Auth (${kr}): ${t}`,...e)}function Md(t,...e){Ld.logLevel<=le.ERROR&&Ld.error(`Auth (${kr}): ${t}`,...e)}function Fr(t,...e){throw ev(t,...e)}function Fi(t,...e){return ev(t,...e)}function jA(t,e,n){let r=Object.assign(Object.assign({},VA()),{[e]:n});return new zn("auth","Firebase",r).create(e,{appName:t.name})}function Li(t){return jA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ev(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return UA.create(t,...e)}function Y(t,e,...n){if(!t)throw ev(e,...n)}function Qn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Md(e),new Error(e)}function Vr(t,e){t||Qn(e)}function Vy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function CB(){return TA()==="http:"||TA()==="https:"}function TA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function DB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(CB()||aA()||"connection"in navigator)?navigator.onLine:!0}function SB(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Vi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Vr(n>e,"Short delay should be less than long delay!"),this.isMobile=sA()||cA()}get(){return DB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function tv(t,e){Vr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Fd=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var AB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var RB=new Vi(3e4,6e4);function nv(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function io(s,o,a,u){return m(this,arguments,function*(t,e,n,r,i={}){return BA(t,i,()=>m(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=rc(Object.assign({key:t.config.apiKey},h)).slice(1),y=yield t._getAdditionalHeaders();y["Content-Type"]="application/json",t.languageCode&&(y["X-Firebase-Locale"]=t.languageCode);let w=Object.assign({method:e,headers:y},l);return oA()||(w.referrerPolicy="no-referrer"),Fd.fetch()($A(t,t.config.apiHost,n,p),w)}))})}function BA(t,e,n){return m(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},AB),e);try{let i=new Uy(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Pd(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pd(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Pd(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Pd(t,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw jA(t,h,l);Fr(t,h)}}catch(i){if(i instanceof Pt)throw i;Fr(t,"network-request-failed",{message:String(i)})}})}function NB(s,o,a,u){return m(this,arguments,function*(t,e,n,r,i={}){let l=yield io(t,e,n,r,i);return"mfaPendingCredential"in l&&Fr(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function $A(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?tv(t.config,i):`${t.config.apiScheme}://${i}`}var Uy=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Fi(this.auth,"network-request-failed")),RB.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Pd(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Fi(t,e,r);return i.customData._tokenResponse=n,i}function PB(t,e){return m(this,null,function*(){return io(t,"POST","/v1/accounts:delete",e)})}function HA(t,e){return m(this,null,function*(){return io(t,"POST","/v1/accounts:lookup",e)})}function cc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function rv(t,e=!1){return m(this,null,function*(){let n=Qe(t),r=yield n.getIdToken(e),i=iv(r);Y(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:cc(ky(i.auth_time)),issuedAtTime:cc(ky(i.iat)),expirationTime:cc(ky(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function ky(t){return Number(t)*1e3}function iv(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Md("JWT malformed, contained fewer than 3 sections"),null;try{let i=vy(n);return i?JSON.parse(i):(Md("Failed to decode base64 JWT payload"),null)}catch(i){return Md("Caught error parsing JWT payload as JSON",i?.toString()),null}}function bA(t){let e=iv(t);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function lc(t,e,n=!1){return m(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Pt&&MB(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function MB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var jy=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>m(this,null,function*(){yield this.iteration()}),n)}iteration(){return m(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var dc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cc(this.lastLoginAt),this.creationTime=cc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Vd(t){return m(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield lc(t,HA(n,{idToken:r}));Y(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?qA(s.providerUserInfo):[],a=OB(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new dc(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function sv(t){return m(this,null,function*(){let e=Qe(t);yield Vd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function OB(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function qA(t){return t.map(e=>{var{providerId:n}=e,r=Af(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function xB(t,e){return m(this,null,function*(){let n=yield BA(t,{},()=>m(this,null,function*(){let r=rc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=$A(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Fd.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function kB(t,e){return m(this,null,function*(){return io(t,"POST","/v2/accounts:revokeToken",nv(t,e))})}var uc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):bA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Y(e.length!==0,"internal-error");let n=bA(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return m(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return m(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield xB(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(Y(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Y(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Y(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Qn("not implemented")}};function Lr(t,e){Y(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var ro=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Af(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jy(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new dc(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return m(this,null,function*(){let n=yield lc(this,this.stsTokenManager.getToken(this.auth,e));return Y(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return rv(this,e)}reload(){return sv(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return m(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Vd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return m(this,null,function*(){if(Wn(this.auth.app))return Promise.reject(Li(this.auth));let e=yield this.getIdToken();return yield lc(this,PB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(i=n.email)!==null&&i!==void 0?i:void 0,w=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,S=(o=n.photoURL)!==null&&o!==void 0?o:void 0,R=(a=n.tenantId)!==null&&a!==void 0?a:void 0,N=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,k=(l=n.createdAt)!==null&&l!==void 0?l:void 0,j=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:U,emailVerified:ae,isAnonymous:Re,providerData:te,stsTokenManager:T}=n;Y(U&&T,e,"internal-error");let v=uc.fromJSON(this.name,T);Y(typeof U=="string",e,"internal-error"),Lr(p,e.name),Lr(y,e.name),Y(typeof ae=="boolean",e,"internal-error"),Y(typeof Re=="boolean",e,"internal-error"),Lr(w,e.name),Lr(S,e.name),Lr(R,e.name),Lr(N,e.name),Lr(k,e.name),Lr(j,e.name);let _=new t({uid:U,auth:e,email:y,emailVerified:ae,displayName:p,isAnonymous:Re,photoURL:S,phoneNumber:w,tenantId:R,stsTokenManager:v,createdAt:k,lastLoginAt:j});return te&&Array.isArray(te)&&(_.providerData=te.map(E=>Object.assign({},E))),N&&(_._redirectEventId=N),_}static _fromIdTokenResponse(e,n,r=!1){return m(this,null,function*(){let i=new uc;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Vd(s),s})}static _fromGetAccountInfoResponse(e,n,r){return m(this,null,function*(){let i=n.users[0];Y(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?qA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new uc;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new dc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var CA=new Map;function Yn(t){Vr(t instanceof Function,"Expected a class definition");let e=CA.get(t);return e?(Vr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,CA.set(t,e),e)}var LB=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(this,null,function*(){return!0})}_set(n,r){return m(this,null,function*(){this.storage[n]=r})}_get(n){return m(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return m(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),By=LB;function Od(t,e,n){return`firebase:${t}:${e}:${n}`}var Ud=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Od(this.userKey,i.apiKey,s),this.fullPersistenceKey=Od("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return m(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?ro._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return m(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return m(this,null,function*(){if(!n.length)return new t(Yn(By),e,r);let i=(yield Promise.all(n.map(l=>m(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Yn(By),o=Od(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(o);if(h){let p=ro._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>m(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function DA(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(KA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(YA(e))return"Blackberry";if(JA(e))return"Webos";if(GA(e))return"Safari";if((e.includes("chrome/")||WA(e))&&!e.includes("edge/"))return"Chrome";if(QA(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function zA(t=qe()){return/firefox\//i.test(t)}function GA(t=qe()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function WA(t=qe()){return/crios\//i.test(t)}function KA(t=qe()){return/iemobile/i.test(t)}function QA(t=qe()){return/android/i.test(t)}function YA(t=qe()){return/blackberry/i.test(t)}function JA(t=qe()){return/webos/i.test(t)}function ov(t=qe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function FB(t=qe()){var e;return ov(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function VB(){return uA()&&document.documentMode===10}function ZA(t=qe()){return ov(t)||QA(t)||JA(t)||YA(t)||/windows phone/i.test(t)||KA(t)}function XA(t,e=[]){let n;switch(t){case"Browser":n=DA(qe());break;case"Worker":n=`${DA(qe())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${kr}/${r}`}var $y=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return m(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function UB(n){return m(this,arguments,function*(t,e={}){return io(t,"GET","/v2/passwordPolicy",nv(t,e))})}var jB=6,Hy=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:jB,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var qy=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jd(this),this.idTokenSubscription=new jd(this),this.beforeStateQueue=new $y(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=UA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Yn(n)),this._initializationPromise=this.queue(()=>m(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Ud.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return m(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return m(this,null,function*(){try{let n=yield HA(this,{idToken:e}),r=yield ro._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return m(this,null,function*(){var n;if(Wn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return m(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return m(this,null,function*(){try{yield Vd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=SB()}_delete(){return m(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return m(this,null,function*(){if(Wn(this.app))return Promise.reject(Li(this));let n=e?Qe(e):null;return n&&Y(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return m(this,null,function*(){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>m(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return m(this,null,function*(){return Wn(this.app)?Promise.reject(Li(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Wn(this.app)?Promise.reject(Li(this)):this.queue(()=>m(this,null,function*(){yield this.assertedPersistence.setPersistence(Yn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return m(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return m(this,null,function*(){let e=yield UB(this),n=new Hy(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new zn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return m(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield kB(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return m(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return m(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Yn(e)||this._popupRedirectResolver;Y(n,this,"argument-error"),this.redirectPersistenceManager=yield Ud.create(this,[Yn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return m(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>m(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return m(this,null,function*(){if(e===this.currentUser)return this.queue(()=>m(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return m(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=XA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return m(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return m(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&bB(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function av(t){return Qe(t)}var jd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=fA(n=>this.observer=n)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var cv={loadJS(){return m(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function BB(t){cv=t}function $B(t){return cv.loadJS(t)}function HB(){return cv.gapiScript}function e0(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function uv(t,e){let n=oc(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Pi(s,e??{}))return i;Fr(i,"already-initialized")}return n.initialize({options:e})}function qB(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Yn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function lv(t,e,n){let r=av(t);Y(r._canInitEmulator,r,"emulator-config-failed"),Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=t0(e),{host:o,port:a}=zB(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||GB()}function t0(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function zB(t){let e=t0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:SA(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:SA(o)}}}function SA(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function GB(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Bd=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qn("not implemented")}_getIdTokenResponse(e){return Qn("not implemented")}_linkToIdToken(e,n){return Qn("not implemented")}_getReauthenticationResolver(e){return Qn("not implemented")}};function Ly(t,e){return m(this,null,function*(){return NB(t,"POST","/v1/accounts:signInWithIdp",nv(t,e))})}var $d=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var zy=class extends $d{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var hc=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return m(this,null,function*(){let s=yield ro._fromIdTokenResponse(e,r,i),o=AA(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return m(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=AA(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function AA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Gy=class t extends Pt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function n0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Gy._fromErrorAndOperation(t,s,e,r):s})}function WB(t,e,n=!1){return m(this,null,function*(){let r=yield lc(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return hc._forOperation(t,"link",r)})}function KB(t,e,n=!1){return m(this,null,function*(){let{auth:r}=t;if(Wn(r.app))return Promise.reject(Li(r));let i="reauthenticate";try{let s=yield lc(t,n0(r,i,e,t),n);Y(s.idToken,r,"internal-error");let o=iv(s.idToken);Y(o,r,"internal-error");let{sub:a}=o;return Y(t.uid===a,r,"user-mismatch"),hc._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Fr(r,"user-mismatch"),s}})}function QB(t,e,n=!1){return m(this,null,function*(){if(Wn(t.app))return Promise.reject(Li(t));let r="signIn",i=yield n0(t,r,e),s=yield hc._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function dv(t,e,n,r){return Qe(t).onIdTokenChanged(e,n,r)}function hv(t,e,n){return Qe(t).beforeAuthStateChanged(e,n)}var Hd="__sak";var qd=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hd,"1"),this.storage.removeItem(Hd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var YB=1e3,JB=10,ZB=(()=>{class t extends qd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ZA(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);VB()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,JB):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},YB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return m(this,null,function*(){yield pt(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return m(this,null,function*(){let r=yield pt(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return m(this,null,function*(){yield pt(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),r0=ZB;var XB=(()=>{class t extends qd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),fv=XB;function e$(t){return Promise.all(t.map(e=>m(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var t$=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return m(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(a).map(h=>m(this,null,function*(){return h(r.origin,o)})),l=yield e$(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function i0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Wy=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return m(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{let l=i0("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let y=p;if(y.data.eventId===l)switch(y.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(y.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function _n(){return window}function n$(t){_n().location.href=t}function s0(){return typeof _n().WorkerGlobalScope<"u"&&typeof _n().importScripts=="function"}function r$(){return m(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function i$(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function s$(){return s0()?self:null}var o0="firebaseLocalStorageDb",o$=1,zd="firebaseLocalStorage",a0="fbase_key",Ui=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Wd(t,e){return t.transaction([zd],e?"readwrite":"readonly").objectStore(zd)}function a$(){let t=indexedDB.deleteDatabase(o0);return new Ui(t).toPromise()}function Ky(){let t=indexedDB.open(o0,o$);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(zd,{keyPath:a0})}catch(i){n(i)}}),t.addEventListener("success",()=>m(this,null,function*(){let r=t.result;r.objectStoreNames.contains(zd)?e(r):(r.close(),yield a$(),e(yield Ky()))}))})}function RA(t,e,n){return m(this,null,function*(){let r=Wd(t,!0).put({[a0]:e,value:n});return new Ui(r).toPromise()})}function c$(t,e){return m(this,null,function*(){let n=Wd(t,!1).get(e),r=yield new Ui(n).toPromise();return r===void 0?null:r.value})}function NA(t,e){let n=Wd(t,!0).delete(e);return new Ui(n).toPromise()}var u$=800,l$=3,d$=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return m(this,null,function*(){return this.db?this.db:(this.db=yield Ky(),this.db)})}_withRetries(n){return m(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>l$)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return m(this,null,function*(){return s0()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return m(this,null,function*(){this.receiver=t$._getInstance(s$()),this.receiver._subscribe("keyChanged",(n,r)=>m(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>m(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return m(this,null,function*(){var n,r;if(this.activeServiceWorker=yield r$(),!this.activeServiceWorker)return;this.sender=new Wy(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return m(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||i$()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return m(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Ky();return yield RA(n,Hd,"1"),yield NA(n,Hd),!0}catch{}return!1})}_withPendingWrite(n){return m(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return m(this,null,function*(){return this._withPendingWrite(()=>m(this,null,function*(){return yield this._withRetries(i=>RA(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return m(this,null,function*(){let r=yield this._withRetries(i=>c$(i,n));return this.localCache[n]=r,r})}_remove(n){return m(this,null,function*(){return this._withPendingWrite(()=>m(this,null,function*(){return yield this._withRetries(r=>NA(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return m(this,null,function*(){let n=yield this._withRetries(s=>{let o=Wd(s,!1).getAll();return new Ui(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>m(this,null,function*(){return this._poll()}),u$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),c0=d$;var dY=e0("rcb"),hY=new Vi(3e4,6e4);function h$(t,e){return e?Yn(e):(Y(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var fc=class extends Bd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ly(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ly(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ly(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function f$(t){return QB(t.auth,new fc(t),t.bypassAuthState)}function p$(t){let{auth:e,user:n}=t;return Y(n,e,"internal-error"),KB(n,new fc(t),t.bypassAuthState)}function m$(t){return m(this,null,function*(){let{auth:e,user:n}=t;return Y(n,e,"internal-error"),WB(n,new fc(t),t.bypassAuthState)})}var Qy=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>m(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return m(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return f$;case"linkViaPopup":case"linkViaRedirect":return m$;case"reauthViaPopup":case"reauthViaRedirect":return p$;default:Fr(this.auth,"internal-error")}}resolve(e){Vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var fY=new Vi(2e3,1e4);var g$="pendingRedirect",xd=new Map,Yy=class t extends Qy{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return m(this,null,function*(){let e=xd.get(this.auth._key());if(!e){try{let r=(yield y$(this.resolver,this.auth))?yield pt(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}xd.set(this.auth._key(),e)}return this.bypassAuthState||xd.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return m(this,null,function*(){if(e.type==="signInViaRedirect")return pt(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,pt(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return m(this,null,function*(){})}cleanUp(){}};function y$(t,e){return m(this,null,function*(){let n=I$(e),r=_$(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function v$(t,e){xd.set(t._key(),e)}function _$(t){return Yn(t._redirectPersistence)}function I$(t){return Od(g$,t.config.apiKey,t.name)}function w$(t,e,n=!1){return m(this,null,function*(){if(Wn(t.app))return Promise.reject(Li(t));let r=av(t),i=h$(r,e),o=yield new Yy(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var E$=10*60*1e3,Jy=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!T$(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!u0(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Fi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=E$&&this.cachedEventUids.clear(),this.cachedEventUids.has(PA(e))}saveEventToCache(e){this.cachedEventUids.add(PA(e)),this.lastProcessedEventTime=Date.now()}};function PA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function u0({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function T$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return u0(t);default:return!1}}function b$(n){return m(this,arguments,function*(t,e={}){return io(t,"GET","/v1/projects",e)})}var C$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,D$=/^https?/;function S$(t){return m(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield b$(t);for(let n of e)try{if(A$(n))return}catch{}Fr(t,"unauthorized-domain")})}function A$(t){let e=Vy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!D$.test(n))return!1;if(C$.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var R$=new Vi(3e4,6e4);function MA(){let t=_n().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function N$(t){return new Promise((e,n)=>{var r,i,s;function o(){MA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{MA(),n(Fi(t,"network-request-failed"))},timeout:R$.get()})}if(!((i=(r=_n().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=_n().gapi)===null||s===void 0)&&s.load)o();else{let a=e0("iframefcb");return _n()[a]=()=>{gapi.load?o():n(Fi(t,"network-request-failed"))},$B(`${HB()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw kd=null,e})}var kd=null;function P$(t){return kd=kd||N$(t),kd}var M$=new Vi(5e3,15e3),O$="__/auth/iframe",x$="emulator/auth/iframe",k$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},L$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function F$(t){let e=t.config;Y(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?tv(e,x$):`https://${t.config.authDomain}/${O$}`,r={apiKey:e.apiKey,appName:t.name,v:kr},i=L$.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${rc(r).slice(1)}`}function V$(t){return m(this,null,function*(){let e=yield P$(t),n=_n().gapi;return Y(n,t,"internal-error"),e.open({where:document.body,url:F$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:k$,dontclear:!0},r=>new Promise((i,s)=>m(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Fi(t,"network-request-failed"),a=_n().setTimeout(()=>{s(o)},M$.get());function u(){_n().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var U$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},j$=500,B$=600,$$="_blank",H$="http://localhost",Gd=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function q$(t,e,n,r=j$,i=B$){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},U$),{width:r.toString(),height:i.toString(),top:s,left:o}),l=qe().toLowerCase();n&&(a=WA(l)?$$:n),zA(l)&&(e=e||H$,u.scrollbars="yes");let h=Object.entries(u).reduce((y,[w,S])=>`${y}${w}=${S},`,"");if(FB(l)&&a!=="_self")return z$(e||"",a),new Gd(null);let p=window.open(e||"",a,h);Y(p,t,"popup-blocked");try{p.focus()}catch{}return new Gd(p)}function z$(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var G$="__/auth/handler",W$="emulator/auth/handler",K$=encodeURIComponent("fac");function OA(t,e,n,r,i,s){return m(this,null,function*(){Y(t.config.authDomain,t,"auth-domain-config-required"),Y(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:kr,eventId:i};if(e instanceof $d){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",hA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof zy){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${K$}=${encodeURIComponent(u)}`:"";return`${Q$(t)}?${rc(a).slice(1)}${l}`})}function Q$({config:t}){return t.emulator?tv(t,W$):`https://${t.authDomain}/${G$}`}var Fy="webStorageSupport",Zy=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fv,this._completeRedirectFn=w$,this._overrideRedirectResult=v$}_openPopup(e,n,r,i){return m(this,null,function*(){var s;Vr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield OA(e,n,r,Vy(),i);return q$(e,o,i0())})}_openRedirect(e,n,r,i){return m(this,null,function*(){yield this._originValidation(e);let s=yield OA(e,n,r,Vy(),i);return n$(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Vr(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return m(this,null,function*(){let n=yield V$(e),r=new Jy(e);return n.register("authEvent",i=>(Y(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Fy,{type:Fy},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Fy];o!==void 0&&n(!!o),Fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=S$(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ZA()||GA()||ov()}},l0=Zy;var xA="@firebase/auth",kA="1.7.9";var Xy=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return m(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Y$(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function J$(t){xr(new zt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Y(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:XA(t)},l=new qy(r,i,s,u);return qB(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),xr(new zt("auth-internal",e=>{let n=av(e.getProvider("auth").getImmediate());return(r=>new Xy(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$e(xA,kA,Y$(t)),$e(xA,kA,"esm2017")}var Z$=5*60,X$=wy("authIdTokenMaxAge")||Z$,LA=null,eH=t=>e=>m(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>X$)return;let i=n?.token;LA!==i&&(LA=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function pv(t=Xs()){let e=oc(t,"auth");if(e.isInitialized())return e.getImmediate();let n=uv(t,{popupRedirectResolver:l0,persistence:[c0,r0,fv]}),r=wy("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=eH(s.toString());hv(n,o,()=>o(n.currentUser)),dv(n,a=>o(a))}}let i=_y("auth");return i&&lv(n,`http://${i}`),n}function tH(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}BB({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Fi("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",tH().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});J$("Browser");var d0="auth",pc=class{constructor(e){return e}},mc=class{constructor(){return ac(d0)}};var mv=new K("angularfire2.auth-instances");function QH(t,e){let n=Rd(d0,t,e);return n&&new pc(n)}function YH(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new pc(r)}}var JH={provide:mc,deps:[[new _t,mv]]},ZH={provide:pc,useFactory:QH,deps:[[new _t,mv],Kn]};function h0(t,...e){return $e("angularfire",xi.full,"auth"),hn([ZH,JH,{provide:mv,useFactory:YH(t),multi:!0,deps:[Te,Bt,no,ki,[new _t,to],...e]}])}var f0=Gt(pv,!0);var p0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},m0={};var Ur,gv;(function(){var t;function e(T,v){function _(){}_.prototype=v.prototype,T.D=v.prototype,T.prototype=new _,T.prototype.constructor=T,T.C=function(E,b,D){for(var I=Array(arguments.length-2),Sn=2;Sn<arguments.length;Sn++)I[Sn-2]=arguments[Sn];return v.prototype[b].apply(E,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,_){_||(_=0);var E=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)E[b]=v.charCodeAt(_++)|v.charCodeAt(_++)<<8|v.charCodeAt(_++)<<16|v.charCodeAt(_++)<<24;else for(b=0;16>b;++b)E[b]=v[_++]|v[_++]<<8|v[_++]<<16|v[_++]<<24;v=T.g[0],_=T.g[1],b=T.g[2];var D=T.g[3],I=v+(D^_&(b^D))+E[0]+3614090360&4294967295;v=_+(I<<7&4294967295|I>>>25),I=D+(b^v&(_^b))+E[1]+3905402710&4294967295,D=v+(I<<12&4294967295|I>>>20),I=b+(_^D&(v^_))+E[2]+606105819&4294967295,b=D+(I<<17&4294967295|I>>>15),I=_+(v^b&(D^v))+E[3]+3250441966&4294967295,_=b+(I<<22&4294967295|I>>>10),I=v+(D^_&(b^D))+E[4]+4118548399&4294967295,v=_+(I<<7&4294967295|I>>>25),I=D+(b^v&(_^b))+E[5]+1200080426&4294967295,D=v+(I<<12&4294967295|I>>>20),I=b+(_^D&(v^_))+E[6]+2821735955&4294967295,b=D+(I<<17&4294967295|I>>>15),I=_+(v^b&(D^v))+E[7]+4249261313&4294967295,_=b+(I<<22&4294967295|I>>>10),I=v+(D^_&(b^D))+E[8]+1770035416&4294967295,v=_+(I<<7&4294967295|I>>>25),I=D+(b^v&(_^b))+E[9]+2336552879&4294967295,D=v+(I<<12&4294967295|I>>>20),I=b+(_^D&(v^_))+E[10]+4294925233&4294967295,b=D+(I<<17&4294967295|I>>>15),I=_+(v^b&(D^v))+E[11]+2304563134&4294967295,_=b+(I<<22&4294967295|I>>>10),I=v+(D^_&(b^D))+E[12]+1804603682&4294967295,v=_+(I<<7&4294967295|I>>>25),I=D+(b^v&(_^b))+E[13]+4254626195&4294967295,D=v+(I<<12&4294967295|I>>>20),I=b+(_^D&(v^_))+E[14]+2792965006&4294967295,b=D+(I<<17&4294967295|I>>>15),I=_+(v^b&(D^v))+E[15]+1236535329&4294967295,_=b+(I<<22&4294967295|I>>>10),I=v+(b^D&(_^b))+E[1]+4129170786&4294967295,v=_+(I<<5&4294967295|I>>>27),I=D+(_^b&(v^_))+E[6]+3225465664&4294967295,D=v+(I<<9&4294967295|I>>>23),I=b+(v^_&(D^v))+E[11]+643717713&4294967295,b=D+(I<<14&4294967295|I>>>18),I=_+(D^v&(b^D))+E[0]+3921069994&4294967295,_=b+(I<<20&4294967295|I>>>12),I=v+(b^D&(_^b))+E[5]+3593408605&4294967295,v=_+(I<<5&4294967295|I>>>27),I=D+(_^b&(v^_))+E[10]+38016083&4294967295,D=v+(I<<9&4294967295|I>>>23),I=b+(v^_&(D^v))+E[15]+3634488961&4294967295,b=D+(I<<14&4294967295|I>>>18),I=_+(D^v&(b^D))+E[4]+3889429448&4294967295,_=b+(I<<20&4294967295|I>>>12),I=v+(b^D&(_^b))+E[9]+568446438&4294967295,v=_+(I<<5&4294967295|I>>>27),I=D+(_^b&(v^_))+E[14]+3275163606&4294967295,D=v+(I<<9&4294967295|I>>>23),I=b+(v^_&(D^v))+E[3]+4107603335&4294967295,b=D+(I<<14&4294967295|I>>>18),I=_+(D^v&(b^D))+E[8]+1163531501&4294967295,_=b+(I<<20&4294967295|I>>>12),I=v+(b^D&(_^b))+E[13]+2850285829&4294967295,v=_+(I<<5&4294967295|I>>>27),I=D+(_^b&(v^_))+E[2]+4243563512&4294967295,D=v+(I<<9&4294967295|I>>>23),I=b+(v^_&(D^v))+E[7]+1735328473&4294967295,b=D+(I<<14&4294967295|I>>>18),I=_+(D^v&(b^D))+E[12]+2368359562&4294967295,_=b+(I<<20&4294967295|I>>>12),I=v+(_^b^D)+E[5]+4294588738&4294967295,v=_+(I<<4&4294967295|I>>>28),I=D+(v^_^b)+E[8]+2272392833&4294967295,D=v+(I<<11&4294967295|I>>>21),I=b+(D^v^_)+E[11]+1839030562&4294967295,b=D+(I<<16&4294967295|I>>>16),I=_+(b^D^v)+E[14]+4259657740&4294967295,_=b+(I<<23&4294967295|I>>>9),I=v+(_^b^D)+E[1]+2763975236&4294967295,v=_+(I<<4&4294967295|I>>>28),I=D+(v^_^b)+E[4]+1272893353&4294967295,D=v+(I<<11&4294967295|I>>>21),I=b+(D^v^_)+E[7]+4139469664&4294967295,b=D+(I<<16&4294967295|I>>>16),I=_+(b^D^v)+E[10]+3200236656&4294967295,_=b+(I<<23&4294967295|I>>>9),I=v+(_^b^D)+E[13]+681279174&4294967295,v=_+(I<<4&4294967295|I>>>28),I=D+(v^_^b)+E[0]+3936430074&4294967295,D=v+(I<<11&4294967295|I>>>21),I=b+(D^v^_)+E[3]+3572445317&4294967295,b=D+(I<<16&4294967295|I>>>16),I=_+(b^D^v)+E[6]+76029189&4294967295,_=b+(I<<23&4294967295|I>>>9),I=v+(_^b^D)+E[9]+3654602809&4294967295,v=_+(I<<4&4294967295|I>>>28),I=D+(v^_^b)+E[12]+3873151461&4294967295,D=v+(I<<11&4294967295|I>>>21),I=b+(D^v^_)+E[15]+530742520&4294967295,b=D+(I<<16&4294967295|I>>>16),I=_+(b^D^v)+E[2]+3299628645&4294967295,_=b+(I<<23&4294967295|I>>>9),I=v+(b^(_|~D))+E[0]+4096336452&4294967295,v=_+(I<<6&4294967295|I>>>26),I=D+(_^(v|~b))+E[7]+1126891415&4294967295,D=v+(I<<10&4294967295|I>>>22),I=b+(v^(D|~_))+E[14]+2878612391&4294967295,b=D+(I<<15&4294967295|I>>>17),I=_+(D^(b|~v))+E[5]+4237533241&4294967295,_=b+(I<<21&4294967295|I>>>11),I=v+(b^(_|~D))+E[12]+1700485571&4294967295,v=_+(I<<6&4294967295|I>>>26),I=D+(_^(v|~b))+E[3]+2399980690&4294967295,D=v+(I<<10&4294967295|I>>>22),I=b+(v^(D|~_))+E[10]+4293915773&4294967295,b=D+(I<<15&4294967295|I>>>17),I=_+(D^(b|~v))+E[1]+2240044497&4294967295,_=b+(I<<21&4294967295|I>>>11),I=v+(b^(_|~D))+E[8]+1873313359&4294967295,v=_+(I<<6&4294967295|I>>>26),I=D+(_^(v|~b))+E[15]+4264355552&4294967295,D=v+(I<<10&4294967295|I>>>22),I=b+(v^(D|~_))+E[6]+2734768916&4294967295,b=D+(I<<15&4294967295|I>>>17),I=_+(D^(b|~v))+E[13]+1309151649&4294967295,_=b+(I<<21&4294967295|I>>>11),I=v+(b^(_|~D))+E[4]+4149444226&4294967295,v=_+(I<<6&4294967295|I>>>26),I=D+(_^(v|~b))+E[11]+3174756917&4294967295,D=v+(I<<10&4294967295|I>>>22),I=b+(v^(D|~_))+E[2]+718787259&4294967295,b=D+(I<<15&4294967295|I>>>17),I=_+(D^(b|~v))+E[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(b+(I<<21&4294967295|I>>>11))&4294967295,T.g[2]=T.g[2]+b&4294967295,T.g[3]=T.g[3]+D&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var _=v-this.blockSize,E=this.B,b=this.h,D=0;D<v;){if(b==0)for(;D<=_;)i(this,T,D),D+=this.blockSize;if(typeof T=="string"){for(;D<v;)if(E[b++]=T.charCodeAt(D++),b==this.blockSize){i(this,E),b=0;break}}else for(;D<v;)if(E[b++]=T[D++],b==this.blockSize){i(this,E),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var _=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=_&255,_/=256;for(this.u(T),T=Array(16),v=_=0;4>v;++v)for(var E=0;32>E;E+=8)T[_++]=this.g[v]>>>E&255;return T};function s(T,v){var _=a;return Object.prototype.hasOwnProperty.call(_,T)?_[T]:_[T]=v(T)}function o(T,v){this.h=v;for(var _=[],E=!0,b=T.length-1;0<=b;b--){var D=T[b]|0;E&&D==v||(_[b]=D,E=!1)}this.g=_}var a={};function u(T){return-128<=T&&128>T?s(T,function(v){return new o([v|0],0>v?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return N(l(-T));for(var v=[],_=1,E=0;T>=_;E++)v[E]=T/_|0,_*=4294967296;return new o(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return N(h(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(v,8)),E=p,b=0;b<T.length;b+=8){var D=Math.min(8,T.length-b),I=parseInt(T.substring(b,b+D),v);8>D?(D=l(Math.pow(v,D)),E=E.j(D).add(l(I))):(E=E.j(_),E=E.add(l(I)))}return E}var p=u(0),y=u(1),w=u(16777216);t=o.prototype,t.m=function(){if(R(this))return-N(this).m();for(var T=0,v=1,_=0;_<this.g.length;_++){var E=this.i(_);T+=(0<=E?E:4294967296+E)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(S(this))return"0";if(R(this))return"-"+N(this).toString(T);for(var v=l(Math.pow(T,6)),_=this,E="";;){var b=ae(_,v).g;_=k(_,b.j(v));var D=((0<_.g.length?_.g[0]:_.h)>>>0).toString(T);if(_=b,S(_))return D+E;for(;6>D.length;)D="0"+D;E=D+E}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function S(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function R(T){return T.h==-1}t.l=function(T){return T=k(this,T),R(T)?-1:S(T)?0:1};function N(T){for(var v=T.g.length,_=[],E=0;E<v;E++)_[E]=~T.g[E];return new o(_,~T.h).add(y)}t.abs=function(){return R(this)?N(this):this},t.add=function(T){for(var v=Math.max(this.g.length,T.g.length),_=[],E=0,b=0;b<=v;b++){var D=E+(this.i(b)&65535)+(T.i(b)&65535),I=(D>>>16)+(this.i(b)>>>16)+(T.i(b)>>>16);E=I>>>16,D&=65535,I&=65535,_[b]=I<<16|D}return new o(_,_[_.length-1]&-2147483648?-1:0)};function k(T,v){return T.add(N(v))}t.j=function(T){if(S(this)||S(T))return p;if(R(this))return R(T)?N(this).j(N(T)):N(N(this).j(T));if(R(T))return N(this.j(N(T)));if(0>this.l(w)&&0>T.l(w))return l(this.m()*T.m());for(var v=this.g.length+T.g.length,_=[],E=0;E<2*v;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(var b=0;b<T.g.length;b++){var D=this.i(E)>>>16,I=this.i(E)&65535,Sn=T.i(b)>>>16,Ro=T.i(b)&65535;_[2*E+2*b]+=I*Ro,j(_,2*E+2*b),_[2*E+2*b+1]+=D*Ro,j(_,2*E+2*b+1),_[2*E+2*b+1]+=I*Sn,j(_,2*E+2*b+1),_[2*E+2*b+2]+=D*Sn,j(_,2*E+2*b+2)}for(E=0;E<v;E++)_[E]=_[2*E+1]<<16|_[2*E];for(E=v;E<2*v;E++)_[E]=0;return new o(_,0)};function j(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function U(T,v){this.g=T,this.h=v}function ae(T,v){if(S(v))throw Error("division by zero");if(S(T))return new U(p,p);if(R(T))return v=ae(N(T),v),new U(N(v.g),N(v.h));if(R(v))return v=ae(T,N(v)),new U(N(v.g),v.h);if(30<T.g.length){if(R(T)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var _=y,E=v;0>=E.l(T);)_=Re(_),E=Re(E);var b=te(_,1),D=te(E,1);for(E=te(E,2),_=te(_,2);!S(E);){var I=D.add(E);0>=I.l(T)&&(b=b.add(_),D=I),E=te(E,1),_=te(_,1)}return v=k(T,b.j(v)),new U(b,v)}for(b=p;0<=T.l(v);){for(_=Math.max(1,Math.floor(T.m()/v.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),D=l(_),I=D.j(v);R(I)||0<I.l(T);)_-=E,D=l(_),I=D.j(v);S(D)&&(D=y),b=b.add(D),T=k(T,I)}return new U(b,T)}t.A=function(T){return ae(this,T).h},t.and=function(T){for(var v=Math.max(this.g.length,T.g.length),_=[],E=0;E<v;E++)_[E]=this.i(E)&T.i(E);return new o(_,this.h&T.h)},t.or=function(T){for(var v=Math.max(this.g.length,T.g.length),_=[],E=0;E<v;E++)_[E]=this.i(E)|T.i(E);return new o(_,this.h|T.h)},t.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),_=[],E=0;E<v;E++)_[E]=this.i(E)^T.i(E);return new o(_,this.h^T.h)};function Re(T){for(var v=T.g.length+1,_=[],E=0;E<v;E++)_[E]=T.i(E)<<1|T.i(E-1)>>>31;return new o(_,T.h)}function te(T,v){var _=v>>5;v%=32;for(var E=T.g.length-_,b=[],D=0;D<E;D++)b[D]=0<v?T.i(D+_)>>>v|T.i(D+_+1)<<32-v:T.i(D+_);return new o(b,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,gv=m0.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,Ur=m0.Integer=o}).apply(typeof p0<"u"?p0:typeof self<"u"?self:typeof window<"u"?window:{});var Kd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Jn={};var yv,XH,so,vv,gc,Qd,_v,Iv,wv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kd=="object"&&Kd];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var C=c[g];if(!(C in f))break e;f=f[C]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var f=0,g=!1,C={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function y(c,d,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,y.apply(null,arguments)}function w(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function S(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,C,A){for(var x=Array(arguments.length-2),be=2;be<arguments.length;be++)x[be-2]=arguments[be];return d.prototype[C].apply(g,x)}}function R(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function N(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let C=c.length||0,A=g.length||0;c.length=C+A;for(let x=0;x<A;x++)c[C+x]=g[x]}else c.push(g)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function j(c){return/^[\s\xa0]*$/.test(c)}function U(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function ae(c){return ae[" "](c),c}ae[" "]=function(){};var Re=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function te(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function T(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)c[f]=g[f];for(let A=0;A<_.length;A++)f=_[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function b(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function D(c){a.setTimeout(()=>{throw c},0)}function I(){var c=Uh;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Sn{constructor(){this.h=this.g=null}add(d,f){let g=Ro.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Ro=new k(()=>new IN,c=>c.reset());class IN{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let No,Po=!1,Uh=new Sn,RI=()=>{let c=a.Promise.resolve(void 0);No=()=>{c.then(wN)}};var wN=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(f){D(f)}var d=Ro;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Po=!1};function rr(){this.s=this.s,this.C=this.C}rr.prototype.s=!1,rr.prototype.ma=function(){this.s||(this.s=!0,this.N())},rr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Je(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Je.prototype.h=function(){this.defaultPrevented=!0};var EN=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Mo(c,d){if(Je.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Re){e:{try{ae(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:TN[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Mo.aa.h.call(this)}}S(Mo,Je);var TN={2:"touch",3:"pen",4:"mouse"};Mo.prototype.h=function(){Mo.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Oo="closure_listenable_"+(1e6*Math.random()|0),bN=0;function CN(c,d,f,g,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++bN,this.da=this.fa=!1}function Uc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function jc(c){this.src=c,this.g={},this.h=0}jc.prototype.add=function(c,d,f,g,C){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var x=Bh(c,d,g,C);return-1<x?(d=c[x],f||(d.fa=!1)):(d=new CN(d,this.src,A,!!g,C),d.fa=f,c.push(d)),d};function jh(c,d){var f=d.type;if(f in c.g){var g=c.g[f],C=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(g,C,1),A&&(Uc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Bh(c,d,f,g){for(var C=0;C<c.length;++C){var A=c[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return C}return-1}var $h="closure_lm_"+(1e6*Math.random()|0),Hh={};function NI(c,d,f,g,C){if(g&&g.once)return MI(c,d,f,g,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)NI(c,d[A],f,g,C);return null}return f=Wh(f),c&&c[Oo]?c.K(d,f,l(g)?!!g.capture:!!g,C):PI(c,d,f,!1,g,C)}function PI(c,d,f,g,C,A){if(!d)throw Error("Invalid event type");var x=l(C)?!!C.capture:!!C,be=zh(c);if(be||(c[$h]=be=new jc(c)),f=be.add(d,f,g,x,A),f.proxy)return f;if(g=DN(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)EN||(C=x),C===void 0&&(C=!1),c.addEventListener(d.toString(),g,C);else if(c.attachEvent)c.attachEvent(xI(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function DN(){function c(f){return d.call(c.src,c.listener,f)}let d=SN;return c}function MI(c,d,f,g,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)MI(c,d[A],f,g,C);return null}return f=Wh(f),c&&c[Oo]?c.L(d,f,l(g)?!!g.capture:!!g,C):PI(c,d,f,!0,g,C)}function OI(c,d,f,g,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)OI(c,d[A],f,g,C);else g=l(g)?!!g.capture:!!g,f=Wh(f),c&&c[Oo]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Bh(A,f,g,C),-1<f&&(Uc(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=zh(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Bh(d,f,g,C)),(f=-1<c?d[c]:null)&&qh(f))}function qh(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Oo])jh(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(xI(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=zh(d))?(jh(f,c),f.h==0&&(f.src=null,d[$h]=null)):Uc(c)}}}function xI(c){return c in Hh?Hh[c]:Hh[c]="on"+c}function SN(c,d){if(c.da)c=!0;else{d=new Mo(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&qh(c),c=f.call(g,d)}return c}function zh(c){return c=c[$h],c instanceof jc?c:null}var Gh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wh(c){return typeof c=="function"?c:(c[Gh]||(c[Gh]=function(d){return c.handleEvent(d)}),c[Gh])}function Ze(){rr.call(this),this.i=new jc(this),this.M=this,this.F=null}S(Ze,rr),Ze.prototype[Oo]=!0,Ze.prototype.removeEventListener=function(c,d,f,g){OI(this,c,d,f,g)};function ht(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new Je(d,c);else if(d instanceof Je)d.target=d.target||c;else{var C=d;d=new Je(g,c),E(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var x=d.g=f[A];C=Bc(x,g,!0,d)&&C}if(x=d.g=c,C=Bc(x,g,!0,d)&&C,C=Bc(x,g,!1,d)&&C,f)for(A=0;A<f.length;A++)x=d.g=f[A],C=Bc(x,g,!1,d)&&C}Ze.prototype.N=function(){if(Ze.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Uc(f[g]);delete c.g[d],c.h--}}this.F=null},Ze.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},Ze.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Bc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var x=d[A];if(x&&!x.da&&x.capture==f){var be=x.listener,Ge=x.ha||x.src;x.fa&&jh(c.i,x),C=be.call(Ge,g)!==!1&&C}}return C&&!g.defaultPrevented}function kI(c,d,f){if(typeof c=="function")f&&(c=y(c,f));else if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function LI(c){c.g=kI(()=>{c.g=null,c.i&&(c.i=!1,LI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class AN extends rr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:LI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xo(c){rr.call(this),this.h=c,this.g={}}S(xo,rr);var FI=[];function VI(c){te(c.g,function(d,f){this.g.hasOwnProperty(f)&&qh(d)},c),c.g={}}xo.prototype.N=function(){xo.aa.N.call(this),VI(this)},xo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kh=a.JSON.stringify,RN=a.JSON.parse,NN=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Qh(){}Qh.prototype.h=null;function UI(c){return c.h||(c.h=c.i())}function jI(){}var ko={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Yh(){Je.call(this,"d")}S(Yh,Je);function Jh(){Je.call(this,"c")}S(Jh,Je);var Gr={},BI=null;function $c(){return BI=BI||new Ze}Gr.La="serverreachability";function $I(c){Je.call(this,Gr.La,c)}S($I,Je);function Lo(c){let d=$c();ht(d,new $I(d))}Gr.STAT_EVENT="statevent";function HI(c,d){Je.call(this,Gr.STAT_EVENT,c),this.stat=d}S(HI,Je);function ft(c){let d=$c();ht(d,new HI(d,c))}Gr.Ma="timingevent";function qI(c,d){Je.call(this,Gr.Ma,c),this.size=d}S(qI,Je);function Fo(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Vo(){this.g=!0}Vo.prototype.xa=function(){this.g=!1};function PN(c,d,f,g,C,A){c.info(function(){if(c.g)if(A)for(var x="",be=A.split("&"),Ge=0;Ge<be.length;Ge++){var ye=be[Ge].split("=");if(1<ye.length){var Xe=ye[0];ye=ye[1];var et=Xe.split("_");x=2<=et.length&&et[1]=="type"?x+(Xe+"="+ye+"&"):x+(Xe+"=redacted&")}}else x=null;else x=A;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+x})}function MN(c,d,f,g,C,A,x){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+x})}function Zi(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+xN(c,f)+(g?" "+g:"")})}function ON(c,d){c.info(function(){return"TIMEOUT: "+d})}Vo.prototype.info=function(){};function xN(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var x=1;x<C.length;x++)C[x]=""}}}}return Kh(f)}catch{return d}}var Hc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},zI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zh;function qc(){}S(qc,Qh),qc.prototype.g=function(){return new XMLHttpRequest},qc.prototype.i=function(){return{}},Zh=new qc;function ir(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new xo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new GI}function GI(){this.i=null,this.g="",this.h=!1}var WI={},Xh={};function ef(c,d,f){c.L=1,c.v=Kc(An(d)),c.m=f,c.P=!0,KI(c,null)}function KI(c,d){c.F=Date.now(),zc(c),c.A=An(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),cw(f.i,"t",g),c.C=0,f=c.j.J,c.h=new GI,c.g=Dw(c.j,f?d:null,!c.m),0<c.O&&(c.M=new AN(y(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(FI[0]=C.toString()),C=FI);for(var A=0;A<C.length;A++){var x=NI(f,C[A],g||d.handleEvent,!1,d.h||d);if(!x)break;d.g[x.key]=x}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Lo(),PN(c.i,c.u,c.A,c.l,c.R,c.m)}ir.prototype.ca=function(c){c=c.target;let d=this.M;d&&Rn(c)==3?d.j():this.Y(c)},ir.prototype.Y=function(c){try{if(c==this.g)e:{let et=Rn(this.g);var d=this.g.Ba();let ts=this.g.Z();if(!(3>et)&&(et!=3||this.g&&(this.h.h||this.g.oa()||mw(this.g)))){this.J||et!=4||d==7||(d==8||0>=ts?Lo(3):Lo(2)),tf(this);var f=this.g.Z();this.X=f;t:if(QI(this)){var g=mw(this.g);c="";var C=g.length,A=Rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wr(this),Uo(this);var x="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==C-1)});g.length=0,this.h.g+=c,this.C=0,x=this.h.g}else x=this.g.oa();if(this.o=f==200,MN(this.i,this.u,this.A,this.l,this.R,et,f),this.o){if(this.T&&!this.K){t:{if(this.g){var be,Ge=this.g;if((be=Ge.g?Ge.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(be)){var ye=be;break t}}ye=null}if(f=ye)Zi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nf(this,f);else{this.o=!1,this.s=3,ft(12),Wr(this),Uo(this);break e}}if(this.P){f=!0;let Kt;for(;!this.J&&this.C<x.length;)if(Kt=kN(this,x),Kt==Xh){et==4&&(this.s=4,ft(14),f=!1),Zi(this.i,this.l,null,"[Incomplete Response]");break}else if(Kt==WI){this.s=4,ft(15),Zi(this.i,this.l,x,"[Invalid Chunk]"),f=!1;break}else Zi(this.i,this.l,Kt,null),nf(this,Kt);if(QI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),et!=4||x.length!=0||this.h.h||(this.s=1,ft(16),f=!1),this.o=this.o&&f,!f)Zi(this.i,this.l,x,"[Invalid Chunked Response]"),Wr(this),Uo(this);else if(0<x.length&&!this.W){this.W=!0;var Xe=this.j;Xe.g==this&&Xe.ba&&!Xe.M&&(Xe.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),uf(Xe),Xe.M=!0,ft(11))}}else Zi(this.i,this.l,x,null),nf(this,x);et==4&&Wr(this),this.o&&!this.J&&(et==4?Ew(this.j,this):(this.o=!1,zc(this)))}else ZN(this.g),f==400&&0<x.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),Wr(this),Uo(this)}}}catch{}finally{}};function QI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function kN(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Xh:(f=Number(d.substring(f,g)),isNaN(f)?WI:(g+=1,g+f>d.length?Xh:(d=d.slice(g,g+f),c.C=g+f,d)))}ir.prototype.cancel=function(){this.J=!0,Wr(this)};function zc(c){c.S=Date.now()+c.I,YI(c,c.I)}function YI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Fo(y(c.ba,c),d)}function tf(c){c.B&&(a.clearTimeout(c.B),c.B=null)}ir.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(ON(this.i,this.A),this.L!=2&&(Lo(),ft(17)),Wr(this),this.s=2,Uo(this)):YI(this,this.S-c)};function Uo(c){c.j.G==0||c.J||Ew(c.j,c)}function Wr(c){tf(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,VI(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function nf(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||rf(f.h,c))){if(!c.K&&rf(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Xc(f),Jc(f);else break e;cf(f),ft(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Fo(y(f.Za,f),6e3));if(1>=XI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Qr(f,11)}else if((c.K||f.g==c)&&Xc(f),!j(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let ye=C[d];if(f.T=ye[0],ye=ye[1],f.G==2)if(ye[0]=="c"){f.K=ye[1],f.ia=ye[2];let Xe=ye[3];Xe!=null&&(f.la=Xe,f.j.info("VER="+f.la));let et=ye[4];et!=null&&(f.Aa=et,f.j.info("SVER="+f.Aa));let ts=ye[5];ts!=null&&typeof ts=="number"&&0<ts&&(g=1.5*ts,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Kt=c.g;if(Kt){let tu=Kt.g?Kt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tu){var A=g.h;A.g||tu.indexOf("spdy")==-1&&tu.indexOf("quic")==-1&&tu.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(sf(A,A.h),A.h=null))}if(g.D){let lf=Kt.g?Kt.g.getResponseHeader("X-HTTP-Session-Id"):null;lf&&(g.ya=lf,Se(g.I,g.D,lf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var x=c;if(g.qa=Cw(g,g.J?g.ia:null,g.W),x.K){ew(g.h,x);var be=x,Ge=g.L;Ge&&(be.I=Ge),be.B&&(tf(be),zc(be)),g.g=x}else Iw(g);0<f.i.length&&Zc(f)}else ye[0]!="stop"&&ye[0]!="close"||Qr(f,7);else f.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?Qr(f,7):af(f):ye[0]!="noop"&&f.l&&f.l.ta(ye),f.v=0)}}Lo(4)}catch{}}var LN=class{constructor(c,d){this.g=c,this.map=d}};function JI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ZI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function XI(c){return c.h?1:c.g?c.g.size:0}function rf(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function sf(c,d){c.g?c.g.add(d):c.h=d}function ew(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}JI.prototype.cancel=function(){if(this.i=tw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function tw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return R(c.i)}function FN(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function VN(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function nw(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=VN(c),g=FN(c),C=g.length,A=0;A<C;A++)d.call(void 0,g[A],f&&f[A],c)}var rw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function UN(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),C=null;if(0<=g){var A=c[f].substring(0,g);C=c[f].substring(g+1)}else A=c[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Kr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Kr){this.h=c.h,Gc(this,c.j),this.o=c.o,this.g=c.g,Wc(this,c.s),this.l=c.l;var d=c.i,f=new $o;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),iw(this,f),this.m=c.m}else c&&(d=String(c).match(rw))?(this.h=!1,Gc(this,d[1]||"",!0),this.o=jo(d[2]||""),this.g=jo(d[3]||"",!0),Wc(this,d[4]),this.l=jo(d[5]||"",!0),iw(this,d[6]||"",!0),this.m=jo(d[7]||"")):(this.h=!1,this.i=new $o(null,this.h))}Kr.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Bo(d,sw,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Bo(d,sw,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Bo(f,f.charAt(0)=="/"?$N:BN,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Bo(f,qN)),c.join("")};function An(c){return new Kr(c)}function Gc(c,d,f){c.j=f?jo(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Wc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function iw(c,d,f){d instanceof $o?(c.i=d,zN(c.i,c.h)):(f||(d=Bo(d,HN)),c.i=new $o(d,c.h))}function Se(c,d,f){c.i.set(d,f)}function Kc(c){return Se(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function jo(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Bo(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,jN),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function jN(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var sw=/[#\/\?@]/g,BN=/[#\?:]/g,$N=/[#\?]/g,HN=/[#\?@]/g,qN=/#/g;function $o(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function sr(c){c.g||(c.g=new Map,c.h=0,c.i&&UN(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=$o.prototype,t.add=function(c,d){sr(this),this.i=null,c=Xi(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function ow(c,d){sr(c),d=Xi(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function aw(c,d){return sr(c),d=Xi(c,d),c.g.has(d)}t.forEach=function(c,d){sr(this),this.g.forEach(function(f,g){f.forEach(function(C){c.call(d,C,g,this)},this)},this)},t.na=function(){sr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=c[g];for(let A=0;A<C.length;A++)f.push(d[g])}return f},t.V=function(c){sr(this);let d=[];if(typeof c=="string")aw(this,c)&&(d=d.concat(this.g.get(Xi(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return sr(this),this.i=null,c=Xi(this,c),aw(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function cw(c,d,f){ow(c,d),0<f.length&&(c.i=null,c.g.set(Xi(c,d),R(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),x=this.V(g);for(g=0;g<x.length;g++){var C=A;x[g]!==""&&(C+="="+encodeURIComponent(String(x[g]))),c.push(C)}}return this.i=c.join("&")};function Xi(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function zN(c,d){d&&!c.j&&(sr(c),c.i=null,c.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(ow(this,g),cw(this,C,f))},c)),c.j=d}function GN(c,d){let f=new Vo;if(a.Image){let g=new Image;g.onload=w(or,f,"TestLoadImage: loaded",!0,d,g),g.onerror=w(or,f,"TestLoadImage: error",!1,d,g),g.onabort=w(or,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=w(or,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function WN(c,d){let f=new Vo,g=new AbortController,C=setTimeout(()=>{g.abort(),or(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(C),A.ok?or(f,"TestPingServer: ok",!0,d):or(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),or(f,"TestPingServer: error",!1,d)})}function or(c,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function KN(){this.g=new NN}function QN(c,d,f){let g=f||"";try{nw(c,function(C,A){let x=C;l(C)&&(x=Kh(C)),d.push(g+A+"="+encodeURIComponent(x))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function Ho(c){this.l=c.Ub||null,this.j=c.eb||!1}S(Ho,Qh),Ho.prototype.g=function(){return new Qc(this.l,this.j)},Ho.prototype.i=function(c){return function(){return c}}({});function Qc(c,d){Ze.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Qc,Ze),t=Qc.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,zo(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qo(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,zo(this)),this.g&&(this.readyState=3,zo(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;uw(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function uw(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?qo(this):zo(this),this.readyState==3&&uw(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,qo(this))},t.Qa=function(c){this.g&&(this.response=c,qo(this))},t.ga=function(){this.g&&qo(this)};function qo(c){c.readyState=4,c.l=null,c.j=null,c.v=null,zo(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function zo(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Qc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function lw(c){let d="";return te(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function of(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=lw(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Se(c,d,f))}function Ne(c){Ze.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Ne,Ze);var YN=/^https?$/i,JN=["POST","PUT"];t=Ne.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zh.g(),this.v=this.o?UI(this.o):UI(Zh),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){dw(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(JN,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,x]of f)this.g.setRequestHeader(A,x);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{pw(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){dw(this,A)}};function dw(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,hw(c),Yc(c)}function hw(c){c.A||(c.A=!0,ht(c,"complete"),ht(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,ht(this,"complete"),ht(this,"abort"),Yc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yc(this,!0)),Ne.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?fw(this):this.bb())},t.bb=function(){fw(this)};function fw(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Rn(c)!=4||c.Z()!=2)){if(c.u&&Rn(c)==4)kI(c.Ea,0,c);else if(ht(c,"readystatechange"),Rn(c)==4){c.h=!1;try{let x=c.Z();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=x===0){var C=String(c.D).match(rw)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!YN.test(C?C.toLowerCase():"")}f=g}if(f)ht(c,"complete"),ht(c,"success");else{c.m=6;try{var A=2<Rn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",hw(c)}}finally{Yc(c)}}}}function Yc(c,d){if(c.g){pw(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||ht(c,"ready");try{f.onreadystatechange=g}catch{}}}function pw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Rn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Rn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),RN(d)}};function mw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ZN(c){let d={};c=(c.g&&2<=Rn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(j(c[g]))continue;var f=b(c[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}T(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Go(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function gw(c){this.Aa=0,this.i=[],this.j=new Vo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Go("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Go("baseRetryDelayMs",5e3,c),this.cb=Go("retryDelaySeedMs",1e4,c),this.Wa=Go("forwardChannelMaxRetries",2,c),this.wa=Go("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new JI(c&&c.concurrentRequestLimit),this.Da=new KN,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=gw.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){ft(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Cw(this,null,this.W),Zc(this)};function af(c){if(yw(c),c.G==3){var d=c.U++,f=An(c.I);if(Se(f,"SID",c.K),Se(f,"RID",d),Se(f,"TYPE","terminate"),Wo(c,f),d=new ir(c,c.j,d),d.L=2,d.v=Kc(An(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Dw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),zc(d)}bw(c)}function Jc(c){c.g&&(uf(c),c.g.cancel(),c.g=null)}function yw(c){Jc(c),c.u&&(a.clearTimeout(c.u),c.u=null),Xc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Zc(c){if(!ZI(c.h)&&!c.s){c.s=!0;var d=c.Ga;No||RI(),Po||(No(),Po=!0),Uh.add(d,c),c.B=0}}function XN(c,d){return XI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Fo(y(c.Ga,c,d),Tw(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new ir(this,this.j,c),A=this.o;if(this.S&&(A?(A=v(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=_w(this,C,d),f=An(this.I),Se(f,"RID",c),Se(f,"CVER",22),this.D&&Se(f,"X-HTTP-Session-Id",this.D),Wo(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(lw(A)))+"&"+d:this.m&&of(f,this.m,A)),sf(this.h,C),this.Ua&&Se(f,"TYPE","init"),this.P?(Se(f,"$req",d),Se(f,"SID","null"),C.T=!0,ef(C,f,null)):ef(C,f,d),this.G=2}}else this.G==3&&(c?vw(this,c):this.i.length==0||ZI(this.h)||vw(this))};function vw(c,d){var f;d?f=d.l:f=c.U++;let g=An(c.I);Se(g,"SID",c.K),Se(g,"RID",f),Se(g,"AID",c.T),Wo(c,g),c.m&&c.o&&of(g,c.m,c.o),f=new ir(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=_w(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),sf(c.h,f),ef(f,g,d)}function Wo(c,d){c.H&&te(c.H,function(f,g){Se(d,g,f)}),c.l&&nw({},function(f,g){Se(d,g,f)})}function _w(c,d,f){f=Math.min(c.i.length,f);var g=c.l?y(c.l.Na,c.l,c):null;e:{var C=c.i;let A=-1;for(;;){let x=["count="+f];A==-1?0<f?(A=C[0].g,x.push("ofs="+A)):A=0:x.push("ofs="+A);let be=!0;for(let Ge=0;Ge<f;Ge++){let ye=C[Ge].g,Xe=C[Ge].map;if(ye-=A,0>ye)A=Math.max(0,C[Ge].g-100),be=!1;else try{QN(Xe,x,"req"+ye+"_")}catch{g&&g(Xe)}}if(be){g=x.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function Iw(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;No||RI(),Po||(No(),Po=!0),Uh.add(d,c),c.v=0}}function cf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Fo(y(c.Fa,c),Tw(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,ww(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Fo(y(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),Jc(this),ww(this))};function uf(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function ww(c){c.g=new ir(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=An(c.qa);Se(d,"RID","rpc"),Se(d,"SID",c.K),Se(d,"AID",c.T),Se(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Se(d,"TO",c.ja),Se(d,"TYPE","xmlhttp"),Wo(c,d),c.m&&c.o&&of(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Kc(An(d)),f.m=null,f.P=!0,KI(f,c)}t.Za=function(){this.C!=null&&(this.C=null,Jc(this),cf(this),ft(19))};function Xc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Ew(c,d){var f=null;if(c.g==d){Xc(c),uf(c),c.g=null;var g=2}else if(rf(c.h,d))f=d.D,ew(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;g=$c(),ht(g,new qI(g,f)),Zc(c)}else Iw(c);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&XN(c,d)||g==2&&cf(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:Qr(c,5);break;case 4:Qr(c,10);break;case 3:Qr(c,6);break;default:Qr(c,2)}}}function Tw(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Qr(c,d){if(c.j.info("Error code "+d),d==2){var f=y(c.fb,c),g=c.Xa;let C=!g;g=new Kr(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Gc(g,"https"),Kc(g),C?GN(g.toString(),f):WN(g.toString(),f)}else ft(2);c.G=0,c.l&&c.l.sa(d),bw(c),yw(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function bw(c){if(c.G=0,c.ka=[],c.l){let d=tw(c.h);(d.length!=0||c.i.length!=0)&&(N(c.ka,d),N(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function Cw(c,d,f){var g=f instanceof Kr?An(f):new Kr(f);if(g.g!="")d&&(g.g=d+"."+g.g),Wc(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new Kr(null);g&&Gc(A,g),d&&(A.g=d),C&&Wc(A,C),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Se(g,f,d),Se(g,"VER",c.la),Wo(c,g),g}function Dw(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ne(new Ho({eb:f})):new Ne(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Sw(){}t=Sw.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function eu(){}eu.prototype.g=function(c,d){return new Et(c,d)};function Et(c,d){Ze.call(this),this.g=new gw(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!j(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!j(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new es(this)}S(Et,Ze),Et.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Et.prototype.close=function(){af(this.g)},Et.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Kh(c),c=f);d.i.push(new LN(d.Ya++,c)),d.G==3&&Zc(d)},Et.prototype.N=function(){this.g.l=null,delete this.j,af(this.g),delete this.g,Et.aa.N.call(this)};function Aw(c){Yh.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}S(Aw,Yh);function Rw(){Jh.call(this),this.status=1}S(Rw,Jh);function es(c){this.g=c}S(es,Sw),es.prototype.ua=function(){ht(this.g,"a")},es.prototype.ta=function(c){ht(this.g,new Aw(c))},es.prototype.sa=function(c){ht(this.g,new Rw)},es.prototype.ra=function(){ht(this.g,"b")},eu.prototype.createWebChannel=eu.prototype.g,Et.prototype.send=Et.prototype.o,Et.prototype.open=Et.prototype.m,Et.prototype.close=Et.prototype.close,wv=Jn.createWebChannelTransport=function(){return new eu},Iv=Jn.getStatEventTarget=function(){return $c()},_v=Jn.Event=Gr,Qd=Jn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hc.NO_ERROR=0,Hc.TIMEOUT=8,Hc.HTTP_ERROR=6,gc=Jn.ErrorCode=Hc,zI.COMPLETE="complete",vv=Jn.EventType=zI,jI.EventType=ko,ko.OPEN="a",ko.CLOSE="b",ko.ERROR="c",ko.MESSAGE="d",Ze.prototype.listen=Ze.prototype.K,so=Jn.WebChannel=jI,XH=Jn.FetchXmlHttpFactory=Ho,Ne.prototype.listenOnce=Ne.prototype.L,Ne.prototype.getLastError=Ne.prototype.Ka,Ne.prototype.getLastErrorCode=Ne.prototype.Ba,Ne.prototype.getStatus=Ne.prototype.Z,Ne.prototype.getResponseJson=Ne.prototype.Oa,Ne.prototype.getResponseText=Ne.prototype.oa,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Ha,yv=Jn.XhrIo=Ne}).apply(typeof Kd<"u"?Kd:typeof self<"u"?self:typeof window<"u"?window:{});var g0="@firebase/firestore";var ze=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ze.UNAUTHENTICATED=new ze(null),ze.GOOGLE_CREDENTIALS=new ze("google-credentials-uid"),ze.FIRST_PARTY=new ze("first-party-uid"),ze.MOCK_USER=new ze("mock-user");var So="10.14.0";var Hi=new Mr("@firebase/firestore");function yc(){return Hi.logLevel}function L(t,...e){if(Hi.logLevel<=le.DEBUG){let n=e.map(rI);Hi.debug(`Firestore (${So}): ${t}`,...n)}}function er(t,...e){if(Hi.logLevel<=le.ERROR){let n=e.map(rI);Hi.error(`Firestore (${So}): ${t}`,...n)}}function fo(t,...e){if(Hi.logLevel<=le.WARN){let n=e.map(rI);Hi.warn(`Firestore (${So}): ${t}`,...n)}}function rI(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function W(t="Unexpected state"){let e=`FIRESTORE (${So}) INTERNAL ASSERTION FAILED: `+t;throw er(e),new Error(e)}function Ee(t,e){t||W()}function J(t,e){return t}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},V=class extends Pt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Zn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var eh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Dv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ze.UNAUTHENTICATED))}shutdown(){}},Sv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Av=class{constructor(e){this.t=e,this.currentUser=ze.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ee(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new Zn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Zn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>m(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Zn)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string"),new eh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string"),new ze(e)}},Rv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ze.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Nv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Rv(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ze.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Pv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Mv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ee(this.o===void 0);let r=s=>{s.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,L("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ee(typeof n.token=="string"),this.R=n.token,new Pv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function eq(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var th=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=eq(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function _e(t,e){return t<e?-1:t>e?1:0}function po(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Ye=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new V(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new V(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new V(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ee=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Ye(0,0))}static max(){return new t(new Ye(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var nh=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&W(),r===void 0?r=e.length-n:r>e.length-n&&W(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Me=class t extends nh{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new V(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},tq=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ot=class t extends nh{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return tq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new V(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new V(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new V(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new V(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var H=class t{constructor(e){this.path=e}static fromPath(e){return new t(Me.fromString(e))}static fromName(e){return new t(Me.fromString(e).popFirst(5))}static empty(){return new t(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Me(e.slice()))}};var Ov=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Ov.UNKNOWN_ID=-1;function nq(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new Ye(n+1,0):new Ye(n,r));return new qi(i,H.empty(),e)}function rq(t){return new qi(t.readTime,t.key,-1)}var qi=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ee.min(),H.empty(),-1)}static max(){return new t(ee.max(),H.empty(),-1)}};function iq(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=H.comparator(t.documentKey,e.documentKey),n!==0?n:_e(t.largestBatchId,e.largestBatchId))}var sq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",xv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function kc(t){return m(this,null,function*(){if(t.code!==P.FAILED_PRECONDITION||t.message!==sq)throw t;L("LocalStore","Unexpectedly lost primary lease")})}var M=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&W(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let l=u;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function oq(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Lc(t){return t.name==="IndexedDbTransactionError"}var Q0=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Ph(t){return t==null}function Tc(t){return t===0&&1/t==-1/0}function aq(t){return typeof t=="number"&&Number.isInteger(t)&&!Tc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var cq=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],hJ=[...cq,"documentOverlays"],uq=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],lq=uq,dq=[...lq,"indexConfiguration","indexState","indexEntries"];var fJ=[...dq,"globals"];function y0(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Qi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Y0(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Oe=class t{constructor(e,n){this.comparator=e,this.root=n||wn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uo(this.root,e,this.comparator,!1)}getReverseIterator(){return new uo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uo(this.root,e,this.comparator,!0)}},uo=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},wn=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw W();let e=this.left.check();if(e!==this.right.check())throw W();return e+(this.isRed()?0:1)}};wn.EMPTY=null,wn.RED=!0,wn.BLACK=!1;wn.EMPTY=new class{constructor(){this.size=0}get key(){throw W()}get value(){throw W()}get color(){throw W()}get left(){throw W()}get right(){throw W()}copy(e,n,r,i,s){return this}insert(e,n,r){return new wn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var lt=class t{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new rh(this.data.getIterator())}getIteratorFrom(e){return new rh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},rh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Wt=class t{constructor(e){this.fields=e,e.sort(Ot.comparator)}static empty(){return new t([])}unionWith(e){let n=new lt(Ot.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return po(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var ih=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var dt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ih("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};dt.EMPTY_BYTE_STRING=new dt("");var hq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tr(t){if(Ee(!!t),typeof t=="string"){let e=0,n=hq.exec(t);if(Ee(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ae(t.seconds),nanos:Ae(t.nanos)}}function Ae(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function $r(t){return typeof t=="string"?dt.fromBase64String(t):dt.fromUint8Array(t)}function iI(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function sI(t){let e=t.mapValue.fields.__previous_value__;return iI(e)?sI(e):e}function bc(t){let e=tr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ye(e.seconds,e.nanos)}var kv=class{constructor(e,n,r,i,s,o,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},sh=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Yd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function zi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?iI(t)?4:Z0(t)?9007199254740991:J0(t)?10:11:W()}function bn(t,e){if(t===e)return!0;let n=zi(t);if(n!==zi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bc(t).isEqual(bc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=tr(i.timestampValue),a=tr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return $r(i.bytesValue).isEqual($r(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ae(i.geoPointValue.latitude)===Ae(s.geoPointValue.latitude)&&Ae(i.geoPointValue.longitude)===Ae(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ae(i.integerValue)===Ae(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ae(i.doubleValue),a=Ae(s.doubleValue);return o===a?Tc(o)===Tc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return po(t.arrayValue.values||[],e.arrayValue.values||[],bn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(y0(o)!==y0(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!bn(o[u],a[u])))return!1;return!0}(t,e);default:return W()}}function Cc(t,e){return(t.values||[]).find(n=>bn(n,e))!==void 0}function mo(t,e){if(t===e)return 0;let n=zi(t),r=zi(e);if(n!==r)return _e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _e(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Ae(s.integerValue||s.doubleValue),u=Ae(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return v0(t.timestampValue,e.timestampValue);case 4:return v0(bc(t),bc(e));case 5:return _e(t.stringValue,e.stringValue);case 6:return function(s,o){let a=$r(s),u=$r(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=_e(a[l],u[l]);if(h!==0)return h}return _e(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=_e(Ae(s.latitude),Ae(o.latitude));return a!==0?a:_e(Ae(s.longitude),Ae(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return _0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,l,h;let p=s.fields||{},y=o.fields||{},w=(a=p.value)===null||a===void 0?void 0:a.arrayValue,S=(u=y.value)===null||u===void 0?void 0:u.arrayValue,R=_e(((l=w?.values)===null||l===void 0?void 0:l.length)||0,((h=S?.values)===null||h===void 0?void 0:h.length)||0);return R!==0?R:_0(w,S)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Yd.mapValue&&o===Yd.mapValue)return 0;if(s===Yd.mapValue)return 1;if(o===Yd.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let y=_e(u[p],h[p]);if(y!==0)return y;let w=mo(a[u[p]],l[h[p]]);if(w!==0)return w}return _e(u.length,h.length)}(t.mapValue,e.mapValue);default:throw W()}}function v0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _e(t,e);let n=tr(t),r=tr(e),i=_e(n.seconds,r.seconds);return i!==0?i:_e(n.nanos,r.nanos)}function _0(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=mo(n[i],r[i]);if(s)return s}return _e(n.length,r.length)}function go(t){return Lv(t)}function Lv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=tr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return $r(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return H.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Lv(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Lv(n.fields[o])}`;return i+"}"}(t.mapValue):W()}function Fv(t){return!!t&&"integerValue"in t}function oI(t){return!!t&&"arrayValue"in t}function I0(t){return!!t&&"nullValue"in t}function w0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zd(t){return!!t&&"mapValue"in t}function J0(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function _c(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Qi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=_c(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_c(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Z0(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Mt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Zd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_c(n)}setAll(e){let n=Ot.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=_c(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Zd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Zd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Qi(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(_c(this.value))}};function X0(t){let e=[];return Qi(t.fields,(n,r)=>{let i=new Ot([n]);if(Zd(r)){let s=X0(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Wt(e)}var sn=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ee.min(),ee.min(),ee.min(),Mt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ee.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ee.min(),ee.min(),Mt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ee.min(),ee.min(),Mt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var yo=class{constructor(e,n){this.position=e,this.inclusive=n}};function E0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=H.comparator(H.fromName(o.referenceValue),n.key):r=mo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function T0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!bn(t.position[n],e.position[n]))return!1;return!0}var vo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function fq(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var oh=class{},He=class t extends oh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Uv(e,n,r):n==="array-contains"?new $v(e,r):n==="in"?new Hv(e,r):n==="not-in"?new qv(e,r):n==="array-contains-any"?new zv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new jv(e,r):new Bv(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(mo(n,this.value)):n!==null&&zi(this.value)===zi(n)&&this.matchesComparison(mo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return W()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Cn=class t extends oh{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return eR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function eR(t){return t.op==="and"}function tR(t){return pq(t)&&eR(t)}function pq(t){for(let e of t.filters)if(e instanceof Cn)return!1;return!0}function Vv(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+go(t.value);if(tR(t))return t.filters.map(e=>Vv(e)).join(",");{let e=t.filters.map(n=>Vv(n)).join(",");return`${t.op}(${e})`}}function nR(t,e){return t instanceof He?function(r,i){return i instanceof He&&r.op===i.op&&r.field.isEqual(i.field)&&bn(r.value,i.value)}(t,e):t instanceof Cn?function(r,i){return i instanceof Cn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&nR(o,i.filters[a]),!0):!1}(t,e):void W()}function rR(t){return t instanceof He?function(n){return`${n.field.canonicalString()} ${n.op} ${go(n.value)}`}(t):t instanceof Cn?function(n){return n.op.toString()+" {"+n.getFilters().map(rR).join(" ,")+"}"}(t):"Filter"}var Uv=class extends He{constructor(e,n,r){super(e,n,r),this.key=H.fromName(r.referenceValue)}matches(e){let n=H.comparator(e.key,this.key);return this.matchesComparison(n)}},jv=class extends He{constructor(e,n){super(e,"in",n),this.keys=iR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Bv=class extends He{constructor(e,n){super(e,"not-in",n),this.keys=iR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function iR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>H.fromName(r.referenceValue))}var $v=class extends He{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return oI(n)&&Cc(n.arrayValue,this.value)}},Hv=class extends He{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Cc(this.value.arrayValue,n)}},qv=class extends He{constructor(e,n){super(e,"not-in",n)}matches(e){if(Cc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Cc(this.value.arrayValue,n)}},zv=class extends He{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!oI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Cc(this.value.arrayValue,r))}};var Gv=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function b0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Gv(t,e,n,r,i,s,o)}function aI(t){let e=J(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Vv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ph(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>go(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>go(r)).join(",")),e.ue=n}return e.ue}function cI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!fq(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!nR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!T0(t.startAt,e.startAt)&&T0(t.endAt,e.endAt)}function Wv(t){return H.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var _o=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function mq(t,e,n,r,i,s,o,a){return new _o(t,e,n,r,i,s,o,a)}function uI(t){return new _o(t)}function C0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function gq(t){return t.collectionGroup!==null}function Ic(t){let e=J(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new lt(Ot.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new vo(s,r))}),n.has(Ot.keyField().canonicalString())||e.ce.push(new vo(Ot.keyField(),r))}return e.ce}function En(t){let e=J(t);return e.le||(e.le=yq(e,Ic(t))),e.le}function yq(t,e){if(t.limitType==="F")return b0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new vo(i.field,s)});let n=t.endAt?new yo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new yo(t.startAt.position,t.startAt.inclusive):null;return b0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Kv(t,e,n){return new _o(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Mh(t,e){return cI(En(t),En(e))&&t.limitType===e.limitType}function sR(t){return`${aI(En(t))}|lt:${t.limitType}`}function oo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>rR(i)).join(", ")}]`),Ph(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>go(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>go(i)).join(",")),`Target(${r})`}(En(t))}; limitType=${t.limitType})`}function Oh(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):H.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Ic(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let l=E0(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Ic(r),i)||r.endAt&&!function(o,a,u){let l=E0(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Ic(r),i))}(t,e)}function vq(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function oR(t){return(e,n)=>{let r=!1;for(let i of Ic(t)){let s=_q(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function _q(t,e,n){let r=t.field.isKeyField()?H.comparator(e.key,n.key):function(s,o,a){let u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?mo(u,l):W()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return W()}}var Hr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Qi(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return Y0(this.inner)}size(){return this.innerSize}};var Iq=new Oe(H.comparator);function nr(){return Iq}var aR=new Oe(H.comparator);function vc(...t){let e=aR;for(let n of t)e=e.insert(n.key,n);return e}function cR(t){let e=aR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ji(){return wc()}function uR(){return wc()}function wc(){return new Hr(t=>t.toString(),(t,e)=>t.isEqual(e))}var wq=new Oe(H.comparator),Eq=new lt(H.comparator);function de(...t){let e=Eq;for(let n of t)e=e.add(n);return e}var Tq=new lt(_e);function bq(){return Tq}function lI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tc(e)?"-0":e}}function lR(t){return{integerValue:""+t}}function Cq(t,e){return aq(e)?lR(e):lI(t,e)}var Io=class{constructor(){this._=void 0}};function Dq(t,e,n){return t instanceof wo?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&iI(s)&&(s=sI(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Gi?hR(t,e):t instanceof Wi?fR(t,e):function(i,s){let o=dR(i,s),a=D0(o)+D0(i.Pe);return Fv(o)&&Fv(i.Pe)?lR(a):lI(i.serializer,a)}(t,e)}function Sq(t,e,n){return t instanceof Gi?hR(t,e):t instanceof Wi?fR(t,e):n}function dR(t,e){return t instanceof Eo?function(r){return Fv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var wo=class extends Io{},Gi=class extends Io{constructor(e){super(),this.elements=e}};function hR(t,e){let n=pR(e);for(let r of t.elements)n.some(i=>bn(i,r))||n.push(r);return{arrayValue:{values:n}}}var Wi=class extends Io{constructor(e){super(),this.elements=e}};function fR(t,e){let n=pR(e);for(let r of t.elements)n=n.filter(i=>!bn(i,r));return{arrayValue:{values:n}}}var Eo=class extends Io{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function D0(t){return Ae(t.integerValue||t.doubleValue)}function pR(t){return oI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Aq(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Gi&&i instanceof Gi||r instanceof Wi&&i instanceof Wi?po(r.elements,i.elements,bn):r instanceof Eo&&i instanceof Eo?bn(r.Pe,i.Pe):r instanceof wo&&i instanceof wo}(t.transform,e.transform)}var Qv=class{constructor(e,n){this.version=e,this.transformResults=n}},Xn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Xd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var To=class{};function mR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Dc(t.key,Xn.none()):new Ki(t.key,t.data,Xn.none());{let n=t.data,r=Mt.empty(),i=new lt(Ot.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Dn(t.key,r,new Wt(i.toArray()),Xn.none())}}function Rq(t,e,n){t instanceof Ki?function(i,s,o){let a=i.value.clone(),u=A0(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Dn?function(i,s,o){if(!Xd(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=A0(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(gR(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ec(t,e,n,r){return t instanceof Ki?function(s,o,a,u){if(!Xd(s.precondition,o))return a;let l=s.value.clone(),h=R0(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Dn?function(s,o,a,u){if(!Xd(s.precondition,o))return a;let l=R0(s.fieldTransforms,u,o),h=o.data;return h.setAll(gR(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return Xd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Nq(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=dR(r.transform,i||null);s!=null&&(n===null&&(n=Mt.empty()),n.set(r.field,s))}return n||null}function S0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&po(r,i,(s,o)=>Aq(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ki=class extends To{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Dn=class extends To{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function gR(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function A0(t,e,n){let r=new Map;Ee(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Sq(o,a,n[i]))}return r}function R0(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,Dq(s,o,e))}return r}var Dc=class extends To{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Yv=class extends To{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Jv=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&Rq(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ec(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Ec(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=uR();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let u=mR(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&po(this.mutations,e.mutations,(n,r)=>S0(n,r))&&po(this.baseMutations,e.baseMutations,(n,r)=>S0(n,r))}},Zv=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ee(e.mutations.length===r.length);let i=function(){return wq}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Xv=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var e_=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Fe,ge;function Pq(t){switch(t){default:return W();case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0}}function yR(t){if(t===void 0)return er("GRPC error has no .code"),P.UNKNOWN;switch(t){case Fe.OK:return P.OK;case Fe.CANCELLED:return P.CANCELLED;case Fe.UNKNOWN:return P.UNKNOWN;case Fe.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case Fe.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case Fe.INTERNAL:return P.INTERNAL;case Fe.UNAVAILABLE:return P.UNAVAILABLE;case Fe.UNAUTHENTICATED:return P.UNAUTHENTICATED;case Fe.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case Fe.NOT_FOUND:return P.NOT_FOUND;case Fe.ALREADY_EXISTS:return P.ALREADY_EXISTS;case Fe.PERMISSION_DENIED:return P.PERMISSION_DENIED;case Fe.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case Fe.ABORTED:return P.ABORTED;case Fe.OUT_OF_RANGE:return P.OUT_OF_RANGE;case Fe.UNIMPLEMENTED:return P.UNIMPLEMENTED;case Fe.DATA_LOSS:return P.DATA_LOSS;default:return W()}}(ge=Fe||(Fe={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";var N0=null;function Mq(){return new TextEncoder}var Oq=new Ur([4294967295,4294967295],0);function P0(t){let e=Mq().encode(t),n=new gv;return n.update(e),new Uint8Array(n.digest())}function M0(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ur([n,r],0),new Ur([i,s],0)]}var t_=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Bi(`Invalid padding: ${n}`);if(r<0)throw new Bi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Bi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ur.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Ur.fromNumber(r)));return i.compare(Oq)===1&&(i=new Ur([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=P0(e),[r,i]=M0(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=P0(e),[r,i]=M0(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Bi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var ah=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Sc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ee.min(),i,new Oe(_e),nr(),de())}},Sc=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,de(),de(),de())}};var lo=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},ch=class{constructor(e,n){this.targetId=e,this.me=n}},uh=class{constructor(e,n,r=dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},lh=class{constructor(){this.fe=0,this.ge=x0(),this.pe=dt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=de(),n=de(),r=de();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:W()}}),new Sc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=x0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ee(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},n_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=nr(),this.qe=O0(),this.Qe=new Oe(_e)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:W()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(Wv(s))if(r===0){let o=new H(s.path);this.Ue(n,o,sn.newNoDocument(o,ee.min()))}else Ee(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}N0?.et(function(h,p,y,w,S){var R,N,k,j,U,ae;let Re={localCacheCount:h,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},te=p.unchangedNames;return te&&(Re.bloomFilter={applied:S===0,hashCount:(R=te?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(j=(k=(N=te?.bits)===null||N===void 0?void 0:N.bitmap)===null||k===void 0?void 0:k.length)!==null&&j!==void 0?j:0,padding:(ae=(U=te?.bits)===null||U===void 0?void 0:U.padding)!==null&&ae!==void 0?ae:0,mightContain:T=>{var v;return(v=w?.mightContain(T))!==null&&v!==void 0&&v}}),Re}(o,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=$r(r).toUint8Array()}catch(u){if(u instanceof ih)return fo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new t_(o,i,s)}catch(u){return fo(u instanceof Bi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&Wv(a.target)){let u=new H(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,sn.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=de();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new ah(e,n,this.Qe,this.ke,r);return this.ke=nr(),this.qe=O0(),this.Qe=new Oe(_e),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new lh,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new lt(_e),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||L("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new lh),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function O0(){return new Oe(H.comparator)}function x0(){return new Oe(H.comparator)}var xq={asc:"ASCENDING",desc:"DESCENDING"},kq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Lq={and:"AND",or:"OR"},r_=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function i_(t,e){return t.useProto3Json||Ph(e)?e:{value:e}}function dh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Fq(t,e){return dh(t,e.toTimestamp())}function Tn(t){return Ee(!!t),ee.fromTimestamp(function(n){let r=tr(n);return new Ye(r.seconds,r.nanos)}(t))}function dI(t,e){return s_(t,e).canonicalString()}function s_(t,e){let n=function(i){return new Me(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function _R(t){let e=Me.fromString(t);return Ee(bR(e)),e}function o_(t,e){return dI(t.databaseId,e.path)}function Ev(t,e){let n=_R(e);if(n.get(1)!==t.databaseId.projectId)throw new V(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new V(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H(wR(n))}function IR(t,e){return dI(t.databaseId,e)}function Vq(t){let e=_R(t);return e.length===4?Me.emptyPath():wR(e)}function a_(t){return new Me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function wR(t){return Ee(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function k0(t,e,n){return{name:o_(t,e),fields:n.value.mapValue.fields}}function Uq(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:W()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(Ee(h===void 0||typeof h=="string"),dt.fromBase64String(h||"")):(Ee(h===void 0||h instanceof Buffer||h instanceof Uint8Array),dt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?P.UNKNOWN:yR(l.code);return new V(h,l.message||"")}(o);n=new uh(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Ev(t,r.document.name),s=Tn(r.document.updateTime),o=r.document.createTime?Tn(r.document.createTime):ee.min(),a=new Mt({mapValue:{fields:r.document.fields}}),u=sn.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new lo(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Ev(t,r.document),s=r.readTime?Tn(r.readTime):ee.min(),o=sn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new lo([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Ev(t,r.document),s=r.removedTargetIds||[];n=new lo([],s,i,null)}else{if(!("filter"in e))return W();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new e_(i,s),a=r.targetId;n=new ch(a,o)}}return n}function jq(t,e){let n;if(e instanceof Ki)n={update:k0(t,e.key,e.value)};else if(e instanceof Dc)n={delete:o_(t,e.key)};else if(e instanceof Dn)n={update:k0(t,e.key,e.data),updateMask:Qq(e.fieldMask)};else{if(!(e instanceof Yv))return W();n={verify:o_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof wo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Gi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Wi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Eo)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw W()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Fq(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:W()}(t,e.precondition)),n}function Bq(t,e){return t&&t.length>0?(Ee(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Tn(i.updateTime):Tn(s);return o.isEqual(ee.min())&&(o=Tn(s)),new Qv(o,i.transformResults||[])}(n,e))):[]}function $q(t,e){return{documents:[IR(t,e.path)]}}function Hq(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=IR(t,i);let s=function(l){if(l.length!==0)return TR(Cn.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(y){return{field:ao(y.field),direction:Gq(y.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=i_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function qq(t){let e=Vq(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ee(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){let y=ER(p);return y instanceof Cn&&tR(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(y=>function(S){return new vo(co(S.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(y))}(n.orderBy));let a=null;n.limit&&(a=function(p){let y;return y=typeof p=="object"?p.value:p,Ph(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(p){let y=!!p.before,w=p.values||[];return new yo(w,y)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let y=!p.before,w=p.values||[];return new yo(w,y)}(n.endAt)),mq(e,i,o,s,a,"F",u,l)}function zq(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ER(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=co(n.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=co(n.unaryFilter.field);return He.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=co(n.unaryFilter.field);return He.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=co(n.unaryFilter.field);return He.create(o,"!=",{nullValue:"NULL_VALUE"});default:return W()}}(t):t.fieldFilter!==void 0?function(n){return He.create(co(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return W()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Cn.create(n.compositeFilter.filters.map(r=>ER(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return W()}}(n.compositeFilter.op))}(t):W()}function Gq(t){return xq[t]}function Wq(t){return kq[t]}function Kq(t){return Lq[t]}function ao(t){return{fieldPath:t.canonicalString()}}function co(t){return Ot.fromServerFormat(t.fieldPath)}function TR(t){return t instanceof He?function(n){if(n.op==="=="){if(w0(n.value))return{unaryFilter:{field:ao(n.field),op:"IS_NAN"}};if(I0(n.value))return{unaryFilter:{field:ao(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(w0(n.value))return{unaryFilter:{field:ao(n.field),op:"IS_NOT_NAN"}};if(I0(n.value))return{unaryFilter:{field:ao(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ao(n.field),op:Wq(n.op),value:n.value}}}(t):t instanceof Cn?function(n){let r=n.getFilters().map(i=>TR(i));return r.length===1?r[0]:{compositeFilter:{op:Kq(n.op),filters:r}}}(t):W()}function Qq(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function bR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ac=class t{constructor(e,n,r,i,s=ee.min(),o=ee.min(),a=dt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var c_=class{constructor(e){this.ct=e}};function Yq(t){let e=qq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Kv(e,e.limit,"L"):e}var hh=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Ae(e.integerValue));else if("doubleValue"in e){let r=Ae(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Tc(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=tr(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt($r(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?Z0(e)?this.dt(n,Number.MAX_SAFE_INTEGER):J0(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):W()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Ae(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),H.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};hh.vt=new hh;var u_=class{constructor(){this.un=new l_}addToCollectionParentIndex(e,n){return this.un.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(qi.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(qi.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}},l_=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new lt(Me.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new lt(Me.comparator)).toArray()}};var mJ=new Uint8Array(0);var In=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(41943040,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);var Rc=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var d_=class{constructor(){this.changes=new Hr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var h_=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var f_=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ec(r.mutation,i,Wt.empty(),Ye.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,n,r=de()){let i=ji();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=vc();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=ji();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,de()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=nr(),o=wc(),a=function(){return wc()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Dn)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),Ec(h.mutation,l,h.mutation.getFieldMask(),Ye.now())):o.set(l.key,Wt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new h_(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=wc(),i=new Oe((o,a)=>o-a),s=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Wt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||de()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=uR();h.forEach(y=>{if(!s.has(y)){let w=mR(n.get(y),r.get(y));w!==null&&p.set(y,w),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return H.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gq(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):M.resolve(ji()),a=-1,u=s;return o.next(l=>M.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?M.resolve():this.remoteDocumentCache.getEntry(e,h).next(y=>{u=u.insert(h,y)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,de())).next(h=>({batchId:a,changes:cR(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new H(n)).next(r=>{let i=vc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=vc();return this.indexManager.getCollectionParents(e,s).next(a=>M.forEach(a,u=>{let l=function(p,y){return new _o(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,y)=>{o=o.insert(p,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,sn.newInvalidDocument(h)))});let a=vc();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&Ec(h.mutation,l,Wt.empty(),Ye.now()),Oh(n,l)&&(a=a.insert(u,l))}),a})}};var p_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return M.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Tn(i.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Yq(i.bundledQuery),readTime:Tn(i.readTime)}}(n)),M.resolve()}};var m_=class{constructor(){this.overlays=new Oe(H.comparator),this.Ir=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){let r=ji();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){let i=ji(),s=n.length+1,o=new H(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Oe((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=ji(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=ji(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return M.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Xv(n,r));let s=this.Ir.get(n);s===void 0&&(s=de(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}};var g_=class{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}};var Nc=class{constructor(){this.Tr=new lt(Ve.Er),this.dr=new lt(Ve.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new Ve(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ve(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new H(new Me([])),r=new Ve(n,e),i=new Ve(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new H(new Me([])),r=new Ve(n,e),i=new Ve(n,e+1),s=de();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Ve(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ve=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return H.comparator(e.key,n.key)||_e(e.wr,n.wr)}static Ar(e,n){return _e(e.wr,n.wr)||H.comparator(e.key,n.key)}};var y_=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new lt(Ve.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Jv(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new Ve(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ve(n,0),i=new Ve(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new lt(_e);return n.forEach(i=>{let s=new Ve(i,0),o=new Ve(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;H.isDocumentKey(s)||(s=s.child(""));let o=new Ve(new H(s),0),a=new lt(_e);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},o),M.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ee(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(n.mutations,i=>{let s=new Ve(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new Ve(n,0),i=this.br.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var v_=class{constructor(e){this.Mr=e,this.docs=function(){return new Oe(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():sn.newInvalidDocument(n))}getEntries(e,n){let r=nr();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():sn.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=nr(),o=n.path,a=new H(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||iq(rq(h),r)<=0||(i.has(h.key)||Oh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,r,i){W()}Or(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new __(this)}getSize(e){return M.resolve(this.size)}},__=class extends d_{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var I_=class{constructor(e){this.persistence=e,this.Nr=new Hr(n=>aI(n),cI),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Nc,this.targetCount=0,this.kr=Rc.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),M.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new Rc(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Kn(n),M.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),M.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Br.containsKey(n))}};var w_=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Q0(0),this.Kr=!1,this.Kr=!0,this.$r=new g_,this.referenceDelegate=e(this),this.Ur=new I_(this),this.indexManager=new u_,this.remoteDocumentCache=function(i){return new v_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new c_(n),this.Gr=new p_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new m_,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new y_(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){L("MemoryPersistence","Starting transaction:",e);let i=new E_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},E_=class extends xv{constructor(e){super(),this.currentSequenceNumber=e}},T_=class t{constructor(e){this.persistence=e,this.Jr=new Nc,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw W()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),M.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{let i=H.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return M.or([()=>M.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var b_=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=de(),i=de();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var C_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var D_=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return lA()?8:oq(qe())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new C_;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(yc()<=le.DEBUG&&L("QueryEngine","SDK will not create cache indexes for query:",oo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(yc()<=le.DEBUG&&L("QueryEngine","Query:",oo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(yc()<=le.DEBUG&&L("QueryEngine","The SDK decides to create cache indexes for query:",oo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,En(n))):M.resolve())}Yi(e,n){if(C0(n))return M.resolve(null);let r=En(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Kv(n,null,"F"),r=En(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=de(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(n,a);return this.ns(n,l,o,u.readTime)?this.Yi(e,Kv(n,null,"F")):this.rs(e,l,n,u)}))})))}Zi(e,n,r,i){return C0(n)||i.isEqual(ee.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(n,s);return this.ns(n,o,r,i)?M.resolve(null):(yc()<=le.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),oo(n)),this.rs(e,o,n,nq(i,-1)).next(a=>a))})}ts(e,n){let r=new lt(oR(e));return n.forEach((i,s)=>{Oh(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return yc()<=le.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",oo(n)),this.Ji.getDocumentsMatchingQuery(e,n,qi.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var S_=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Oe(_e),this._s=new Hr(s=>aI(s),cI),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new f_(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function Jq(t,e,n,r){return new S_(t,e,n,r)}function CR(t,e){return m(this,null,function*(){let n=J(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=de();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function Zq(t,e){let n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,y=p.keys(),w=M.resolve();return y.forEach(S=>{w=w.next(()=>h.getEntry(u,S)).next(R=>{let N=l.docVersions.get(S);Ee(N!==null),R.version.compareTo(N)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),h.addEntry(R)))})}),w.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=de();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function DR(t){let e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Xq(t,e){let n=J(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((h,p)=>{let y=i.get(p);if(!y)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,p)));let w=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(dt.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):h.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(h.resumeToken,r)),i=i.insert(p,w),function(R,N,k){return R.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(y,w,h)&&a.push(n.Ur.updateTargetData(s,w))});let u=nr(),l=de();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(ez(s,o,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(ee.min())){let h=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return M.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.os=i,s))}function ez(t,e,n){let r=de(),i=de();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=nr();return n.forEach((a,u)=>{let l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):L("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function tz(t,e){let n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function nz(t,e){let n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Ac(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function A_(t,e,n){return m(this,null,function*(){let r=J(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Lc(o))throw o;L("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function L0(t,e,n){let r=J(t),i=ee.min(),s=de();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){let p=J(u),y=p._s.get(h);return y!==void 0?M.resolve(p.os.get(y)):p.Ur.getTargetData(l,h)}(r,o,En(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ee.min(),n?s:de())).next(a=>(rz(r,vq(e),a),{documents:a,Ts:s})))}function rz(t,e,n){let r=t.us.get(e)||ee.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}var fh=class{constructor(){this.activeTargetIds=bq()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var R_=class{constructor(){this.so=new fh,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new fh,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var N_=class{_o(e){}shutdown(){}};var ph=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){L("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){L("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Jd=null;function Tv(){return Jd===null?Jd=function(){return 268435456+Math.round(2147483648*Math.random())}():Jd++,"0x"+Jd.toString(16)}var iz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var P_=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var ut="WebChannelConnection",M_=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){let a=Tv(),u=this.xo(n,r.toUriEncodedString());L("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(n,u,l,i).then(h=>(L("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw fo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+So}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){let i=iz[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let s=Tv();return new Promise((o,a)=>{let u=new yv;u.setWithCredentials(!0),u.listenOnce(vv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case gc.NO_ERROR:let h=u.getResponseJson();L(ut,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case gc.TIMEOUT:L(ut,`RPC '${e}' ${s} timed out`),a(new V(P.DEADLINE_EXCEEDED,"Request time out"));break;case gc.HTTP_ERROR:let p=u.getStatus();if(L(ut,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);let w=y?.error;if(w&&w.status&&w.message){let S=function(N){let k=N.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(k)>=0?k:P.UNKNOWN}(w.status);a(new V(S,w.message))}else a(new V(P.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new V(P.UNAVAILABLE,"Connection failed."));break;default:W()}}finally{L(ut,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);L(ut,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=Tv(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=wv(),a=Iv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=s.join("");L(ut,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u),y=!1,w=!1,S=new P_({Io:N=>{w?L(ut,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(y||(L(ut,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),L(ut,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},To:()=>p.close()}),R=(N,k,j)=>{N.listen(k,U=>{try{j(U)}catch(ae){setTimeout(()=>{throw ae},0)}})};return R(p,so.EventType.OPEN,()=>{w||(L(ut,`RPC '${e}' stream ${i} transport opened.`),S.yo())}),R(p,so.EventType.CLOSE,()=>{w||(w=!0,L(ut,`RPC '${e}' stream ${i} transport closed`),S.So())}),R(p,so.EventType.ERROR,N=>{w||(w=!0,fo(ut,`RPC '${e}' stream ${i} transport errored:`,N),S.So(new V(P.UNAVAILABLE,"The operation could not be completed")))}),R(p,so.EventType.MESSAGE,N=>{var k;if(!w){let j=N.data[0];Ee(!!j);let U=j,ae=U.error||((k=U[0])===null||k===void 0?void 0:k.error);if(ae){L(ut,`RPC '${e}' stream ${i} received error:`,ae);let Re=ae.status,te=function(_){let E=Fe[_];if(E!==void 0)return yR(E)}(Re),T=ae.message;te===void 0&&(te=P.INTERNAL,T="Unknown error status: "+Re+" with message "+ae.message),w=!0,S.So(new V(te,T)),p.close()}else L(ut,`RPC '${e}' stream ${i} received:`,j),S.bo(j)}}),R(a,_v.STAT_EVENT,N=>{N.stat===Qd.PROXY?L(ut,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Qd.NOPROXY&&L(ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}};function bv(){return typeof document<"u"?document:null}function xh(t){return new r_(t,!0)}var mh=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&L("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var gh=class{constructor(e,n,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new mh(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return m(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return m(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return m(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===P.RESOURCE_EXHAUSTED?(er(n.toString()),er("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new V(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>m(this,null,function*(){this.state=0,this.start()}))}I_(e){return L("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(L("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},O_=class extends gh{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=Uq(this.serializer,e),r=function(s){if(!("targetChange"in s))return ee.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?Tn(o.readTime):ee.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=a_(this.serializer),n.addTarget=function(s,o){let a,u=o.target;if(a=Wv(u)?{documents:$q(s,u)}:{query:Hq(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=vR(s,o.resumeToken);let l=i_(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ee.min())>0){a.readTime=dh(s,o.snapshotVersion.toTimestamp());let l=i_(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=zq(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=a_(this.serializer),n.removeTarget=e,this.a_(n)}},x_=class extends gh{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=Bq(e.writeResults,e.commitTime),r=Tn(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=a_(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>jq(this.serializer,r))};this.a_(n)}};var k_=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new V(P.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,s_(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(P.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,s_(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new V(P.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},L_=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(er(n),this.D_=!1):L("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var F_=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>m(this,null,function*(){Yi(this)&&(L("RemoteStore","Restarting streams for network reachability change."),yield function(u){return m(this,null,function*(){let l=J(u);l.L_.add(4),yield Fc(l),l.q_.set("Unknown"),l.L_.delete(4),yield kh(l)})}(this))}))}),this.q_=new L_(r,i)}};function kh(t){return m(this,null,function*(){if(Yi(t))for(let e of t.B_)yield e(!0)})}function Fc(t){return m(this,null,function*(){for(let e of t.B_)yield e(!1)})}function SR(t,e){let n=J(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),mI(n)?pI(n):Ao(n).r_()&&fI(n,e))}function hI(t,e){let n=J(t),r=Ao(n);n.N_.delete(e),r.r_()&&AR(n,e),n.N_.size===0&&(r.r_()?r.o_():Yi(n)&&n.q_.set("Unknown"))}function fI(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ao(t).A_(e)}function AR(t,e){t.Q_.xe(e),Ao(t).R_(e)}function pI(t){t.Q_=new n_({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ao(t).start(),t.q_.v_()}function mI(t){return Yi(t)&&!Ao(t).n_()&&t.N_.size>0}function Yi(t){return J(t).L_.size===0}function RR(t){t.Q_=void 0}function sz(t){return m(this,null,function*(){t.q_.set("Online")})}function oz(t){return m(this,null,function*(){t.N_.forEach((e,n)=>{fI(t,e)})})}function az(t,e){return m(this,null,function*(){RR(t),mI(t)?(t.q_.M_(e),pI(t)):t.q_.set("Unknown")})}function cz(t,e,n){return m(this,null,function*(){if(t.q_.set("Online"),e instanceof uh&&e.state===2&&e.cause)try{yield function(i,s){return m(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){L("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield yh(t,r)}else if(e instanceof lo?t.Q_.Ke(e):e instanceof ch?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ee.min()))try{let r=yield DR(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{let h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(dt.EMPTY_BYTE_STRING,h.snapshotVersion)),AR(s,u);let p=new Ac(h.target,u,l,h.sequenceNumber);fI(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){L("RemoteStore","Failed to raise snapshot:",r),yield yh(t,r)}})}function yh(t,e,n){return m(this,null,function*(){if(!Lc(e))throw e;t.L_.add(1),yield Fc(t),t.q_.set("Offline"),n||(n=()=>DR(t.localStore)),t.asyncQueue.enqueueRetryable(()=>m(this,null,function*(){L("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield kh(t)}))})}function NR(t,e){return e().catch(n=>yh(t,n,e))}function Lh(t){return m(this,null,function*(){let e=J(t),n=qr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;uz(e);)try{let i=yield tz(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,lz(e,i)}catch(i){yield yh(e,i)}PR(e)&&MR(e)})}function uz(t){return Yi(t)&&t.O_.length<10}function lz(t,e){t.O_.push(e);let n=qr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function PR(t){return Yi(t)&&!qr(t).n_()&&t.O_.length>0}function MR(t){qr(t).start()}function dz(t){return m(this,null,function*(){qr(t).p_()})}function hz(t){return m(this,null,function*(){let e=qr(t);for(let n of t.O_)e.m_(n.mutations)})}function fz(t,e,n){return m(this,null,function*(){let r=t.O_.shift(),i=Zv.from(r,e,n);yield NR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Lh(t)})}function pz(t,e){return m(this,null,function*(){e&&qr(t).V_&&(yield function(r,i){return m(this,null,function*(){if(function(o){return Pq(o)&&o!==P.ABORTED}(i.code)){let s=r.O_.shift();qr(r).s_(),yield NR(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Lh(r)}})}(t,e)),PR(t)&&MR(t)})}function F0(t,e){return m(this,null,function*(){let n=J(t);n.asyncQueue.verifyOperationInProgress(),L("RemoteStore","RemoteStore received new credentials");let r=Yi(n);n.L_.add(3),yield Fc(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield kh(n)})}function mz(t,e){return m(this,null,function*(){let n=J(t);e?(n.L_.delete(2),yield kh(n)):e||(n.L_.add(2),yield Fc(n),n.q_.set("Unknown"))})}function Ao(t){return t.K_||(t.K_=function(n,r,i){let s=J(n);return s.w_(),new O_(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:sz.bind(null,t),Ro:oz.bind(null,t),mo:az.bind(null,t),d_:cz.bind(null,t)}),t.B_.push(e=>m(this,null,function*(){e?(t.K_.s_(),mI(t)?pI(t):t.q_.set("Unknown")):(yield t.K_.stop(),RR(t))}))),t.K_}function qr(t){return t.U_||(t.U_=function(n,r,i){let s=J(n);return s.w_(),new x_(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:dz.bind(null,t),mo:pz.bind(null,t),f_:hz.bind(null,t),g_:fz.bind(null,t)}),t.B_.push(e=>m(this,null,function*(){e?(t.U_.s_(),yield Lh(t)):(yield t.U_.stop(),t.O_.length>0&&(L("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var V_=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function gI(t,e){if(er("AsyncQueue",`${e}: ${t}`),Lc(t))return new V(P.UNAVAILABLE,`${e}: ${t}`);throw t}var vh=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||H.comparator(n.key,r.key):(n,r)=>H.comparator(n.key,r.key),this.keyedMap=vc(),this.sortedSet=new Oe(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var _h=class{constructor(){this.W_=new Oe(H.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):W():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},bo=class t{constructor(e,n,r,i,s,o,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,vh.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var U_=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},j_=class{constructor(){this.queries=V0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=J(n),s=i.queries;i.queries=V0(),s.forEach((o,a)=>{for(let u of a.j_)u.onError(r)})})(this,new V(P.ABORTED,"Firestore shutting down"))}};function V0(){return new Hr(t=>sR(t),Mh)}function gz(t,e){return m(this,null,function*(){let n=J(t),r=3,i=e.query,s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new U_,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=gI(o,`Initialization of query '${oo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&yI(n)})}function yz(t,e){return m(this,null,function*(){let n=J(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function vz(t,e){let n=J(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&yI(n)}function _z(t,e,n){let r=J(t),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(n);r.queries.delete(e)}function yI(t){t.Y_.forEach(e=>{e.next()})}var B_,U0;(U0=B_||(B_={})).ea="default",U0.Cache="cache";var $_=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new bo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=bo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==B_.Cache}};var Ih=class{constructor(e){this.key=e}},wh=class{constructor(e){this.key=e}},H_=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=de(),this.mutatedKeys=de(),this.Aa=oR(e),this.Ra=new vh(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new _h,i=n?n.Ra:this.Ra,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let y=i.get(h),w=Oh(this.query,p)?p:null,S=!!y&&this.mutatedKeys.has(y.key),R=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations),N=!1;y&&w?y.data.isEqual(w.data)?S!==R&&(r.track({type:3,doc:w}),N=!0):this.ga(y,w)||(r.track({type:2,doc:w}),N=!0,(u&&this.Aa(w,u)>0||l&&this.Aa(w,l)<0)&&(a=!0)):!y&&w?(r.track({type:0,doc:w}),N=!0):y&&!w&&(r.track({type:1,doc:y}),N=!0,(u||l)&&(a=!0)),N&&(w?(o=o.add(w),s=R?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(w,S){let R=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W()}};return R(w)-R(S)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,o.length!==0||l?{snapshot:new bo(this.query,e.Ra,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new _h,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=de(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new wh(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Ih(r))}),n}ba(e){this.Ta=e.Ts,this.da=de();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return bo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},q_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},z_=class{constructor(e){this.key=e,this.va=!1}},G_=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Hr(a=>sR(a),Mh),this.Ma=new Map,this.xa=new Set,this.Oa=new Oe(H.comparator),this.Na=new Map,this.La=new Nc,this.Ba={},this.ka=new Map,this.qa=Rc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function Iz(t,e,n=!0){return m(this,null,function*(){let r=VR(t),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield OR(r,e,n,!0),i})}function wz(t,e){return m(this,null,function*(){let n=VR(t);yield OR(n,e,!0,!1)})}function OR(t,e,n,r){return m(this,null,function*(){let i=yield nz(t.localStore,En(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n),a;return r&&(a=yield Ez(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&SR(t.remoteStore,i),a})}function Ez(t,e,n,r,i){return m(this,null,function*(){t.Ka=(p,y,w)=>function(R,N,k,j){return m(this,null,function*(){let U=N.view.ma(k);U.ns&&(U=yield L0(R.localStore,N.query,!1).then(({documents:T})=>N.view.ma(T,U)));let ae=j&&j.targetChanges.get(N.targetId),Re=j&&j.targetMismatches.get(N.targetId)!=null,te=N.view.applyChanges(U,R.isPrimaryClient,ae,Re);return B0(R,N.targetId,te.wa),te.snapshot})}(t,p,y,w);let s=yield L0(t.localStore,e,!0),o=new H_(e,s.Ts),a=o.ma(s.documents),u=Sc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,u);B0(t,n,l.wa);let h=new q_(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function Tz(t,e,n){return m(this,null,function*(){let r=J(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Mh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield A_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&hI(r.remoteStore,i.targetId),W_(r,i.targetId)}).catch(kc))):(W_(r,i.targetId),yield A_(r.localStore,i.targetId,!0))})}function bz(t,e){return m(this,null,function*(){let n=J(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),hI(n.remoteStore,r.targetId))})}function Cz(t,e,n){return m(this,null,function*(){let r=Mz(t);try{let i=yield function(o,a){let u=J(o),l=Ye.now(),h=a.reduce((w,S)=>w.add(S.key),de()),p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let S=nr(),R=de();return u.cs.getEntries(w,h).next(N=>{S=N,S.forEach((k,j)=>{j.isValidDocument()||(R=R.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,S)).next(N=>{p=N;let k=[];for(let j of a){let U=Nq(j,p.get(j.key).overlayedDocument);U!=null&&k.push(new Dn(j.key,U,X0(U.value.mapValue),Xn.exists(!0)))}return u.mutationQueue.addMutationBatch(w,l,k,a)}).next(N=>{y=N;let k=N.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(w,N.batchId,k)})}).then(()=>({batchId:y.batchId,changes:cR(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Ba[o.currentUser.toKey()];l||(l=new Oe(_e)),l=l.insert(a,u),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,n),yield Vc(r,i.changes),yield Lh(r.remoteStore)}catch(i){let s=gI(i,"Failed to persist write");n.reject(s)}})}function xR(t,e){return m(this,null,function*(){let n=J(t);try{let r=yield Xq(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Na.get(s);o&&(Ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ee(o.va):i.removedDocuments.size>0&&(Ee(o.va),o.va=!1))}),yield Vc(n,r,e)}catch(r){yield kc(r)}})}function j0(t,e,n){let r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=J(o);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let y of p.j_)y.Z_(a)&&(l=!0)}),l&&yI(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Dz(t,e,n){return m(this,null,function*(){let r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Oe(H.comparator);o=o.insert(s,sn.newNoDocument(s,ee.min()));let a=de().add(s),u=new ah(ee.min(),new Map,new Oe(_e),o,a);yield xR(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),vI(r)}else yield A_(r.localStore,e,!1).then(()=>W_(r,e,n)).catch(kc)})}function Sz(t,e){return m(this,null,function*(){let n=J(t),r=e.batch.batchId;try{let i=yield Zq(n.localStore,e);LR(n,r,null),kR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Vc(n,i)}catch(i){yield kc(i)}})}function Az(t,e,n){return m(this,null,function*(){let r=J(t);try{let i=yield function(o,a){let u=J(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Ee(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);LR(r,e,n),kR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Vc(r,i)}catch(i){yield kc(i)}})}function kR(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function LR(t,e,n){let r=J(t),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function W_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||FR(t,r)})}function FR(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(hI(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),vI(t))}function B0(t,e,n){for(let r of n)r instanceof Ih?(t.La.addReference(r.key,e),Rz(t,r)):r instanceof wh?(L("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||FR(t,r.key)):W()}function Rz(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(L("SyncEngine","New document in limbo: "+n),t.xa.add(r),vI(t))}function vI(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new H(Me.fromString(e)),r=t.qa.next();t.Na.set(r,new z_(n)),t.Oa=t.Oa.insert(n,r),SR(t.remoteStore,new Ac(En(uI(n.path)),r,"TargetPurposeLimboResolution",Q0.oe))}}function Vc(t,e,n){return m(this,null,function*(){let r=J(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=b_.Wi(u.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(u,l){return m(this,null,function*(){let h=J(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>M.forEach(l,y=>M.forEach(y.$i,w=>h.persistence.referenceDelegate.addReference(p,y.targetId,w)).next(()=>M.forEach(y.Ui,w=>h.persistence.referenceDelegate.removeReference(p,y.targetId,w)))))}catch(p){if(!Lc(p))throw p;L("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let y=p.targetId;if(!p.fromCache){let w=h.os.get(y),S=w.snapshotVersion,R=w.withLastLimboFreeSnapshotVersion(S);h.os=h.os.insert(y,R)}}})}(r.localStore,s))})}function Nz(t,e){return m(this,null,function*(){let n=J(t);if(!n.currentUser.isEqual(e)){L("SyncEngine","User change. New user:",e.toKey());let r=yield CR(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new V(P.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Vc(n,r.hs)}})}function Pz(t,e){let n=J(t),r=n.Na.get(e);if(r&&r.va)return de().add(r.key);{let i=de(),s=n.Ma.get(e);if(!s)return i;for(let o of s){let a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function VR(t){let e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=xR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Pz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Dz.bind(null,e),e.Ca.d_=vz.bind(null,e.eventManager),e.Ca.$a=_z.bind(null,e.eventManager),e}function Mz(t){let e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Sz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Az.bind(null,e),e}var $0=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return m(this,null,function*(){this.serializer=xh(n.databaseInfo.databaseId),this.sharedClientState=this.Wa(n),this.persistence=this.Ga(n),yield this.persistence.start(),this.localStore=this.za(n),this.gcScheduler=this.ja(n,this.localStore),this.indexBackfillerScheduler=this.Ha(n,this.localStore)})}ja(n,r){return null}Ha(n,r){return null}za(n){return Jq(this.persistence,new D_,n.initialUser,this.serializer)}Ga(n){return new w_(T_.Zr,this.serializer)}Wa(n){return new R_}terminate(){return m(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})();var Oz=(()=>{class t{initialize(n,r){return m(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>j0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Nz.bind(null,this.syncEngine),yield mz(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new j_}()}createDatastore(n){let r=xh(n.databaseInfo.databaseId),i=function(o){return new M_(o)}(n.databaseInfo);return function(o,a,u,l){return new k_(o,a,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,s,o,a,u){return new F_(i,s,o,a,u)}(this.localStore,this.datastore,n.asyncQueue,r=>j0(this.syncEngine,r,0),function(){return ph.D()?new ph:new N_}())}createSyncEngine(n,r){return function(s,o,a,u,l,h,p){let y=new G_(s,o,a,u,l,h);return p&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return m(this,null,function*(){var n,r;yield function(s){return m(this,null,function*(){let o=J(s);L("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Fc(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var K_=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):er("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Q_=class{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ze.UNAUTHENTICATED,this.clientId=th.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>m(this,null,function*(){L("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(L("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>m(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=gI(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Cv(t,e){return m(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),L("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>m(this,null,function*(){r.isEqual(i)||(yield CR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function H0(t,e){return m(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield xz(t);L("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>F0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>F0(e.remoteStore,i)),t._onlineComponents=e})}function xz(t){return m(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){L("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Cv(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===P.FAILED_PRECONDITION||i.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;fo("Error using user provided cache. Falling back to memory cache: "+n),yield Cv(t,new $0)}}else L("FirestoreClient","Using default OfflineComponentProvider"),yield Cv(t,new $0);return t._offlineComponents})}function UR(t){return m(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(L("FirestoreClient","Using user provided OnlineComponentProvider"),yield H0(t,t._uninitializedComponentsProvider._online)):(L("FirestoreClient","Using default OnlineComponentProvider"),yield H0(t,new Oz))),t._onlineComponents})}function kz(t){return UR(t).then(e=>e.syncEngine)}function q0(t){return m(this,null,function*(){let e=yield UR(t),n=e.eventManager;return n.onListen=Iz.bind(null,e.syncEngine),n.onUnlisten=Tz.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=wz.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=bz.bind(null,e.syncEngine),n})}function jR(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var z0=new Map;function BR(t,e,n){if(!n)throw new V(P.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Lz(t,e,n,r){if(e===!0&&r===!0)throw new V(P.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function G0(t){if(!H.isDocumentKey(t))throw new V(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function W0(t){if(H.isDocumentKey(t))throw new V(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function _I(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":W()}function jr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new V(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=_I(t);throw new V(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Eh=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new V(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new V(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Lz("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new V(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new V(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new V(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Co=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Eh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new V(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new V(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Eh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Dv;switch(r.type){case"firstParty":return new Nv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new V(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return m(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=z0.get(n);r&&(L("ComponentProvider","Removing Datastore"),z0.delete(n),r.terminate())}(this),Promise.resolve()}};function $R(t,e,n,r={}){var i;let s=(t=jr(t,Co))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=ze.MOCK_USER;else{a=iA(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new V(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ze(l)}t._authCredentials=new Sv(new eh(a,u))}}var Th=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},xt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Br=class t extends Th{constructor(e,n,r){super(e,n,uI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new H(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function HR(t,e,...n){if(t=Qe(t),BR("collection","path",e),t instanceof Co){let r=Me.fromString(e,...n);return W0(r),new Br(t,null,r)}{if(!(t instanceof xt||t instanceof Br))throw new V(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Me.fromString(e,...n));return W0(r),new Br(t.firestore,null,r)}}function II(t,e,...n){if(t=Qe(t),arguments.length===1&&(e=th.newId()),BR("doc","path",e),t instanceof Co){let r=Me.fromString(e,...n);return G0(r),new xt(t,null,new H(r))}{if(!(t instanceof xt||t instanceof Br))throw new V(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Me.fromString(e,...n));return G0(r),new xt(t.firestore,t instanceof Br?t.converter:null,new H(r))}}var bh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new mh(this,"async_queue_retry"),this.Vu=()=>{let r=bv();r&&L("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let n=bv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let n=bv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let n=new Zn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return m(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Lc(e))throw e;L("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw er("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);let i=V_.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&W()}verifyOperationInProgress(){}wu(){return m(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let n=this.Tu.indexOf(e);this.Tu.splice(n,1)}};function K0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var zr=class extends Co{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new bh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return m(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new bh(e),this._firestoreClient=void 0,yield e}})}};function qR(t,e){let n=typeof t=="object"?t:Xs(),r=typeof t=="string"?t:e||"(default)",i=oc(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=rA("firestore");s&&$R(i,...s)}return i}function zR(t){if(t._terminated)throw new V(P.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Fz(t),t._firestoreClient}function Fz(t){var e,n,r;let i=t._freezeSettings(),s=function(a,u,l,h){return new kv(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,jR(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Q_(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(t._componentsProvider))}var Pc=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(dt.fromBase64String(e))}catch(n){throw new V(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Do=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new V(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Mc=class{constructor(e){this._methodName=e}};var Oc=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new V(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new V(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}};var xc=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var Vz=/^__.*__$/,Y_=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Dn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ki(e,this.data,n,this.fieldTransforms)}},Ch=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Dn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function GR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W()}}var J_=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Sh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(GR(this.Cu)&&Vz.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Z_=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||xh(e)}Qu(e,n,r,i=!1){return new J_({Cu:e,methodName:n,qu:r,path:Ot.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function WR(t){let e=t._freezeSettings(),n=xh(t._databaseId);return new Z_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Uz(t,e,n,r,i,s={}){let o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);wI("Data must be an object, but it was:",o,r);let a=KR(r,o),u,l;if(s.merge)u=new Wt(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let y=X_(e,p,n);if(!o.contains(y))throw new V(P.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);YR(h,y)||h.push(y)}u=new Wt(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new Y_(new Mt(a),u,l)}var Dh=class t extends Mc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function jz(t,e,n,r){let i=t.Qu(1,e,n);wI("Data must be an object, but it was:",i,r);let s=[],o=Mt.empty();Qi(r,(u,l)=>{let h=EI(e,u,n);l=Qe(l);let p=i.Nu(h);if(l instanceof Dh)s.push(h);else{let y=Fh(l,p);y!=null&&(s.push(h),o.set(h,y))}});let a=new Wt(s);return new Ch(o,a,i.fieldTransforms)}function Bz(t,e,n,r,i,s){let o=t.Qu(1,e,n),a=[X_(e,r,n)],u=[i];if(s.length%2!=0)throw new V(P.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(X_(e,s[y])),u.push(s[y+1]);let l=[],h=Mt.empty();for(let y=a.length-1;y>=0;--y)if(!YR(l,a[y])){let w=a[y],S=u[y];S=Qe(S);let R=o.Nu(w);if(S instanceof Dh)l.push(w);else{let N=Fh(S,R);N!=null&&(l.push(w),h.set(w,N))}}let p=new Wt(l);return new Ch(h,p,o.fieldTransforms)}function Fh(t,e){if(QR(t=Qe(t)))return wI("Unsupported field value:",e,t),KR(t,e);if(t instanceof Mc)return function(r,i){if(!GR(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=Fh(a,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Cq(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Ye.fromDate(r);return{timestampValue:dh(i.serializer,s)}}if(r instanceof Ye){let s=new Ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:dh(i.serializer,s)}}if(r instanceof Oc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pc)return{bytesValue:vR(i.serializer,r._byteString)};if(r instanceof xt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:dI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof xc)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return lI(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${_I(r)}`)}(t,e)}function KR(t,e){let n={};return Y0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qi(t,(r,i)=>{let s=Fh(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function QR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ye||t instanceof Oc||t instanceof Pc||t instanceof xt||t instanceof Mc||t instanceof xc)}function wI(t,e,n){if(!QR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=_I(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function X_(t,e,n){if((e=Qe(e))instanceof Do)return e._internalPath;if(typeof e=="string")return EI(t,e);throw Sh("Field path arguments must be of type string or ",t,!1,void 0,n)}var $z=new RegExp("[~\\*/\\[\\]]");function EI(t,e,n){if(e.search($z)>=0)throw Sh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Do(...e.split("."))._internalPath}catch{throw Sh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Sh(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new V(P.INVALID_ARGUMENT,a+t+u)}function YR(t,e){return t.some(n=>n.isEqual(e))}var Ah=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new eI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(JR("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},eI=class extends Ah{data(){return super.data()}};function JR(t,e){return typeof e=="string"?EI(t,e):e instanceof Do?e._internalPath:e._delegate._internalPath}function Hz(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new V(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var tI=class{convertValue(e,n="none"){switch(zi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ae(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes($r(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw W()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Qi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ae(o.doubleValue));return new xc(s)}convertGeoPoint(e){return new Oc(Ae(e.latitude),Ae(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=sI(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(bc(e));default:return null}}convertTimestamp(e){let n=tr(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Me.fromString(e);Ee(bR(r));let i=new sh(r.get(1),r.get(3)),s=new H(r.popFirst(5));return i.isEqual(n)||er(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function qz(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var $i=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Rh=class extends Ah{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new ho(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(JR("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},ho=class extends Rh{data(e={}){return super.data(e)}},nI=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new $i(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ho(this._firestore,this._userDataWriter,r.key,r,new $i(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new V(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new ho(i._firestore,i._userDataWriter,a.doc.key,a.doc,new $i(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new ho(i._firestore,i._userDataWriter,a.doc.key,a.doc,new $i(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:zz(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function zz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W()}}var Nh=class extends tI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pc(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}};function ZR(t,e,n,...r){t=jr(t,xt);let i=jr(t.firestore,zr),s=WR(i),o;return o=typeof(e=Qe(e))=="string"||e instanceof Do?Bz(s,"updateDoc",t._key,e,n,r):jz(s,"updateDoc",t._key,e),bI(i,[o.toMutation(t._key,Xn.exists(!0))])}function XR(t){return bI(jr(t.firestore,zr),[new Dc(t._key,Xn.none())])}function eN(t,e){let n=jr(t.firestore,zr),r=II(t),i=qz(t.converter,e);return bI(n,[Uz(WR(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Xn.exists(!1))]).then(()=>r)}function TI(t,...e){var n,r,i;t=Qe(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||K0(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(K0(e[o])){let p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof xt)l=jr(t.firestore,zr),h=uI(t._key.path),u={next:p=>{e[o]&&e[o](Gz(l,t,p))},error:e[o+1],complete:e[o+2]};else{let p=jr(t,Th);l=jr(p.firestore,zr),h=p._query;let y=new Nh(l);u={next:w=>{e[o]&&e[o](new nI(l,y,p,w))},error:e[o+1],complete:e[o+2]},Hz(t._query)}return function(y,w,S,R){let N=new K_(R),k=new $_(w,N,S);return y.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return gz(yield q0(y),k)})),()=>{N.Za(),y.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return yz(yield q0(y),k)}))}}(zR(l),h,a,u)}function bI(t,e){return function(r,i){let s=new Zn;return r.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return Cz(yield kz(r),i,s)})),s.promise}(zR(t),e)}function Gz(t,e,n){let r=n.docs.get(e._key),i=new Nh(t);return new Rh(t,i,e._key,r,new $i(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){So=i})(kr),xr(new zt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new zr(new Av(r.getProvider("auth-internal")),new Mv(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new V(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sh(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),$e(g0,"4.7.3",e),$e(g0,"4.7.3","esm2017")})();var Vh=function(){return Vh=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Vh.apply(this,arguments)};var Qz={includeMetadataChanges:!1};function tN(t,e){return e===void 0&&(e=Qz),new ce(function(n){var r=TI(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function nN(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Vh(Vh({},r),(n={},n[e.idField]=t.id,n))}function rN(t){return tN(t,{includeMetadataChanges:!0}).pipe(ie(function(e){return e.docs}))}function iN(t,e){return e===void 0&&(e={}),rN(t).pipe(ie(function(n){return n.map(function(r){return nN(r,e)})}))}var Ji=class{constructor(e){return e}},sN="firestore",CI=class{constructor(){return ac(sN)}};var DI=new K("angularfire2.firestore-instances");function Yz(t,e){let n=Rd(sN,t,e);return n&&new Ji(n)}function Jz(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Ji(r)}}var Zz={provide:CI,deps:[[new _t,DI]]},Xz={provide:Ji,useFactory:Yz,deps:[[new _t,DI],Kn]};function oN(t,...e){return $e("angularfire",xi.full,"fst"),hn([Xz,Zz,{provide:DI,useFactory:Jz(t),multi:!0,deps:[Te,Bt,no,ki,[new _t,mc],[new _t,to],...e]}])}var aN=Gt(iN,!0);var cN=Gt(eN,!0);var SI=Gt(HR,!0);var uN=Gt(XR,!0);var AI=Gt(II,!0);var lN=Gt(qR,!0);var dN=Gt(ZR,!0);var hN=(()=>{class t{constructor(n){this.fireStore=n}createNote(n){console.log(n);let r=SI(this.fireStore,"Notes");cN(r,{name:n.name,content:n.content}).then(()=>{alert("created")}).catch(i=>alert("error: "+i))}getNotes(){let n=SI(this.fireStore,"Notes");return aN(n,{idField:"id"})}updateNote(n,r){let i=AI(this.fireStore,"Notes",n);return dN(i,{name:r.name,content:r.content}).then(()=>{alert("Updated successfully")}).catch(s=>{alert("Error: "+s)})}deleteNote(n){let r=AI(this.fireStore,"Notes",n);uN(r).then(i=>alert("deleted: "+i)).catch(i=>alert("error: "+i))}static{this.\u0275fac=function(r){return new(r||t)(re(Ji))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var fN=(()=>{class t{constructor(n){this.crudService=n,this.note=new Ed("",""),this.update=new Td("","",""),this.id=""}GetData(){this.crudService.getNotes().subscribe({next(n){console.log(n)},error(n){console.log(n)}})}AddNote(){this.crudService.createNote(this.note)}deleteNote(){this.crudService.deleteNote(this.id)}UpdateNote(){if(!this.update.id){alert("Please enter Note ID");return}this.crudService.updateNote(this.update.id,this.update)}static{this.\u0275fac=function(r){return new(r||t)(oe(hN))}}static{this.\u0275cmp=ot({type:t,selectors:[["app-note"]],standalone:!0,features:[at],decls:40,vars:6,consts:[[1,"m-5"],[1,"btn","btn-primary",3,"click"],[1,"mb-3"],["for","exampleInputEmail1",1,"form-label"],["type","email","name","name","id","exampleInputEmail1","aria-describedby","emailHelp",1,"form-control",3,"ngModelChange","ngModel"],["type","email","name","content","id","exampleInputEmail1","aria-describedby","emailHelp",1,"form-control",3,"ngModelChange","ngModel"],["type","email","name","id","id","exampleInputEmail1","aria-describedby","emailHelp",1,"form-control",3,"ngModelChange","ngModel"],[1,"note-form"],["for","noteId"],["id","noteId","placeholder","Enter note ID",3,"ngModelChange","ngModel"],["for","name"],["id","name","placeholder","Enter name",3,"ngModelChange","ngModel"],["for","content"],["id","content","placeholder","Enter content",3,"ngModelChange","ngModel"],[3,"click"]],template:function(r,i){r&1&&(q(0,"h1",0),me(1," Notes"),z(),q(2,"button",1),Be("click",function(){return i.GetData()}),me(3,"Get Notes"),z(),q(4,"h1",0),me(5," Add Note"),z(),q(6,"form")(7,"div",2)(8,"label",3),me(9,"Name"),z(),q(10,"input",4),wt("ngModelChange",function(o){return At(i.note.name,o)||(i.note.name=o),o}),z()(),q(11,"div",2)(12,"label",3),me(13,"Content"),z(),q(14,"input",5),wt("ngModelChange",function(o){return At(i.note.content,o)||(i.note.content=o),o}),z()(),q(15,"button",1),Be("click",function(){return i.AddNote()}),me(16,"Add note"),z()(),q(17,"h1",0),me(18," Delete note"),z(),q(19,"form")(20,"div",2)(21,"label",3),me(22,"Id"),z(),q(23,"input",6),wt("ngModelChange",function(o){return At(i.id,o)||(i.id=o),o}),z()(),q(24,"button",1),Be("click",function(){return i.deleteNote()}),me(25,"Delete note"),z()(),q(26,"div",7)(27,"h2"),me(28,"Update Note"),z(),q(29,"label",8),me(30,"Note ID"),z(),q(31,"input",9),wt("ngModelChange",function(o){return At(i.update.id,o)||(i.update.id=o),o}),z(),q(32,"label",10),me(33,"Name"),z(),q(34,"input",11),wt("ngModelChange",function(o){return At(i.update.name,o)||(i.update.name=o),o}),z(),q(35,"label",12),me(36,"Content"),z(),q(37,"textarea",13),wt("ngModelChange",function(o){return At(i.update.content,o)||(i.update.content=o),o}),z(),q(38,"button",14),Be("click",function(){return i.UpdateNote()}),me(39,"Update"),z()()),r&2&&(St(10),It("ngModel",i.note.name),St(4),It("ngModel",i.note.content),St(9),It("ngModel",i.id),St(8),It("ngModel",i.update.id),St(3),It("ngModel",i.update.name),St(3),It("ngModel",i.update.content))},dependencies:[zs,qs,br,$s,Hs,Ci,bi]})}}return t})();var pN=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:ID},{path:"login",component:_D},{path:"register",component:XS},{path:"note",component:fN}];var mN={production:!1,firebaseConfig:{apiKey:"AIzaSyB0W1JEEcRvd17RlqVLT98Yium5jIWlGYo",authDomain:"mynewproject-4672f.firebaseapp.com",projectId:"mynewproject-4672f",storageBucket:"mynewproject-4672f.firebasestorage.app",messagingSenderId:"319170823578",appId:"1:319170823578:web:710fb20baa3b78a91a2623",measurementId:"G-GMBP1QWP6S"}};var gN={providers:[YC(pN),wA(()=>EA(mN.firebaseConfig)),oN(()=>lN()),h0(()=>f0())]};var yN=(()=>{class t{constructor(n,r){this.router=n,this.authService=r}Logout(){this.authService.Logout("login"),this.router.navigateByUrl("login")}Register(){this.router.navigateByUrl("register")}Note(){this.router.navigateByUrl("note")}static{this.\u0275fac=function(r){return new(r||t)(oe(nn),oe(Yl))}}static{this.\u0275cmp=ot({type:t,selectors:[["app-nav-bar"]],standalone:!0,features:[at],decls:14,vars:0,consts:[[1,"navbar","navbar-expand-lg","bg-body-tertiary","firebase-gradient"],[1,"container-fluid"],["routerLink","/dashboard",1,"navbar-brand"],["id","navbarNavAltMarkup",1,"collapse","navbar-collapse"],[1,"navbar-nav"],["routerLink","/home",1,"nav-link","pointer"],[1,"nav-link","pointer",3,"click"]],template:function(r,i){r&1&&(q(0,"nav",0)(1,"div",1)(2,"a",2),me(3,"Navbar"),z(),q(4,"div",3)(5,"div",4)(6,"a",5),me(7,"Home"),z(),q(8,"a",6),Be("click",function(){return i.Logout()}),me(9," Logout "),z(),q(10,"a",6),Be("click",function(){return i.Register()}),me(11," Register "),z(),q(12,"a",6),Be("click",function(){return i.Note()}),me(13," Note "),z()()()()())},dependencies:[QC,pm],styles:[".pointer[_ngcontent-%COMP%]{cursor:pointer}.firebase-gradient[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffca28,#f57c00,#e53935)}"]})}}return t})();var vN=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=ot({type:t,selectors:[["app-main-layout"]],standalone:!0,features:[at],decls:2,vars:0,consts:[[1,"container"]],template:function(r,i){r&1&&(q(0,"div",0),mi(1,"router-outlet"),z())},dependencies:[ka]})}}return t})();var _N=(()=>{class t{constructor(){this.title="FireDemo"}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=ot({type:t,selectors:[["app-root"]],standalone:!0,features:[at],decls:3,vars:0,template:function(r,i){r&1&&mi(0,"app-nav-bar")(1,"app-main-layout")(2,"router-outlet")},dependencies:[yN,vN,ka]})}}return t})();pC(_N,gN).catch(t=>console.error(t));
